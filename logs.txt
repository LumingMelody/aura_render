/usr/local/bin/python3 /Users/luming/Downloads/aura_render/app.py
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/pydantic/_internal/_config.py:345: UserWarning: Valid config keys have changed in V2:
* 'schema_extra' has been renamed to 'json_schema_extra'
  warnings.warn(message, UserWarning)
INFO:llm.qwen:âœ… DashScope APIå¯†é’¥å·²è®¾ç½®: sk-a48a1d84e...
INFO:__main__:âœ… VGPæ–°å·¥ä½œæµAPIå·²åŠ è½½: /vgp/generate
INFO:__main__:âœ… VGPèŠ‚ç‚¹å·²åŠ è½½: video_type_identification - è§†é¢‘ç±»å‹è¯†åˆ«
INFO:__main__:âœ… VGPèŠ‚ç‚¹å·²åŠ è½½: emotion_analysis - æƒ…æ„ŸåŸºè°ƒåˆ†æ
INFO:__main__:âœ… VGPèŠ‚ç‚¹å·²åŠ è½½: shot_block_generation - åˆ†é•œå—ç”Ÿæˆ
INFO:__main__:âœ… VGPèŠ‚ç‚¹å·²åŠ è½½: bgm_anchor_planning - BGMé”šç‚¹è§„åˆ’
INFO:__main__:âœ… VGPèŠ‚ç‚¹å·²åŠ è½½: bgm_composition - BGMåˆæˆæŸ¥æ‰¾
INFO:__main__:âœ… VGPèŠ‚ç‚¹å·²åŠ è½½: asset_request - ç´ æéœ€æ±‚è§£æ
INFO:__main__:âœ… VGPèŠ‚ç‚¹å·²åŠ è½½: audio_processing - éŸ³é¢‘å¤„ç†
INFO:llm.qwen:âœ… DashScope APIå¯†é’¥å·²è®¾ç½®: sk-a48a1d84e...
INFO:__main__:âœ… VGPèŠ‚ç‚¹å·²åŠ è½½: sfx_integration - éŸ³æ•ˆæ·»åŠ 
INFO:llm.qwen:âœ… DashScope APIå¯†é’¥å·²è®¾ç½®: sk-a48a1d84e...
INFO:__main__:âœ… VGPèŠ‚ç‚¹å·²åŠ è½½: transition_selection - è½¬åœºé€‰æ‹©
INFO:__main__:âœ… VGPèŠ‚ç‚¹å·²åŠ è½½: filter_application - æ»¤é•œåº”ç”¨
INFO:llm.qwen:âœ… DashScope APIå¯†é’¥å·²è®¾ç½®: sk-a48a1d84e...
INFO:__main__:âœ… VGPèŠ‚ç‚¹å·²åŠ è½½: dynamic_effects - åŠ¨æ€ç‰¹æ•ˆæ·»åŠ 
INFO:llm.qwen:âœ… DashScope APIå¯†é’¥å·²è®¾ç½®: sk-a48a1d84e...
INFO:__main__:âœ… VGPèŠ‚ç‚¹å·²åŠ è½½: aux_media_insertion - é¢å¤–åª’ä½“æ’å…¥
INFO:llm.qwen:âœ… DashScope APIå¯†é’¥å·²è®¾ç½®: sk-a48a1d84e...
INFO:__main__:âœ… VGPèŠ‚ç‚¹å·²åŠ è½½: aux_text_insertion - è£…é¥°æ–‡å­—æ’å…¥
INFO:llm.qwen:âœ… DashScope APIå¯†é’¥å·²è®¾ç½®: sk-a48a1d84e...
INFO:__main__:âœ… VGPèŠ‚ç‚¹å·²åŠ è½½: subtitle_generation - å­—å¹•ç”Ÿæˆ
INFO:llm.qwen:âœ… DashScope APIå¯†é’¥å·²è®¾ç½®: sk-a48a1d84e...
INFO:__main__:âœ… VGPèŠ‚ç‚¹å·²åŠ è½½: intro_outro - ç‰‡å¤´ç‰‡å°¾ç”Ÿæˆ
INFO:__main__:âœ… VGPèŠ‚ç‚¹å·²åŠ è½½: timeline_integration - æœ€ç»ˆæ—¶é—´çº¿æ•´åˆ
INFO:__main__:ğŸ¯ VGPèŠ‚ç‚¹ç³»ç»Ÿåˆå§‹åŒ–å®Œæˆ: 16/16 ä¸ªèŠ‚ç‚¹å¯ç”¨
INFO:__main__:âœ… Loaded 16 nodes
INFO:     Will watch for changes in these directories: ['/Users/luming/Downloads/aura_render']
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [28079] using WatchFiles
/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/pydantic/_internal/_config.py:345: UserWarning: Valid config keys have changed in V2:
* 'schema_extra' has been renamed to 'json_schema_extra'
  warnings.warn(message, UserWarning)
INFO:llm.qwen:âœ… DashScope APIå¯†é’¥å·²è®¾ç½®: sk-a48a1d84e...
INFO:__mp_main__:âœ… VGPæ–°å·¥ä½œæµAPIå·²åŠ è½½: /vgp/generate
INFO:__mp_main__:âœ… VGPèŠ‚ç‚¹å·²åŠ è½½: video_type_identification - è§†é¢‘ç±»å‹è¯†åˆ«
INFO:__mp_main__:âœ… VGPèŠ‚ç‚¹å·²åŠ è½½: emotion_analysis - æƒ…æ„ŸåŸºè°ƒåˆ†æ
INFO:__mp_main__:âœ… VGPèŠ‚ç‚¹å·²åŠ è½½: shot_block_generation - åˆ†é•œå—ç”Ÿæˆ
INFO:__mp_main__:âœ… VGPèŠ‚ç‚¹å·²åŠ è½½: bgm_anchor_planning - BGMé”šç‚¹è§„åˆ’
INFO:__mp_main__:âœ… VGPèŠ‚ç‚¹å·²åŠ è½½: bgm_composition - BGMåˆæˆæŸ¥æ‰¾
INFO:__mp_main__:âœ… VGPèŠ‚ç‚¹å·²åŠ è½½: asset_request - ç´ æéœ€æ±‚è§£æ
INFO:__mp_main__:âœ… VGPèŠ‚ç‚¹å·²åŠ è½½: audio_processing - éŸ³é¢‘å¤„ç†
INFO:llm.qwen:âœ… DashScope APIå¯†é’¥å·²è®¾ç½®: sk-a48a1d84e...
INFO:__mp_main__:âœ… VGPèŠ‚ç‚¹å·²åŠ è½½: sfx_integration - éŸ³æ•ˆæ·»åŠ 
INFO:llm.qwen:âœ… DashScope APIå¯†é’¥å·²è®¾ç½®: sk-a48a1d84e...
INFO:__mp_main__:âœ… VGPèŠ‚ç‚¹å·²åŠ è½½: transition_selection - è½¬åœºé€‰æ‹©
INFO:__mp_main__:âœ… VGPèŠ‚ç‚¹å·²åŠ è½½: filter_application - æ»¤é•œåº”ç”¨
INFO:llm.qwen:âœ… DashScope APIå¯†é’¥å·²è®¾ç½®: sk-a48a1d84e...
INFO:__mp_main__:âœ… VGPèŠ‚ç‚¹å·²åŠ è½½: dynamic_effects - åŠ¨æ€ç‰¹æ•ˆæ·»åŠ 
INFO:llm.qwen:âœ… DashScope APIå¯†é’¥å·²è®¾ç½®: sk-a48a1d84e...
INFO:__mp_main__:âœ… VGPèŠ‚ç‚¹å·²åŠ è½½: aux_media_insertion - é¢å¤–åª’ä½“æ’å…¥
INFO:llm.qwen:âœ… DashScope APIå¯†é’¥å·²è®¾ç½®: sk-a48a1d84e...
INFO:__mp_main__:âœ… VGPèŠ‚ç‚¹å·²åŠ è½½: aux_text_insertion - è£…é¥°æ–‡å­—æ’å…¥
INFO:llm.qwen:âœ… DashScope APIå¯†é’¥å·²è®¾ç½®: sk-a48a1d84e...
INFO:__mp_main__:âœ… VGPèŠ‚ç‚¹å·²åŠ è½½: subtitle_generation - å­—å¹•ç”Ÿæˆ
INFO:llm.qwen:âœ… DashScope APIå¯†é’¥å·²è®¾ç½®: sk-a48a1d84e...
INFO:__mp_main__:âœ… VGPèŠ‚ç‚¹å·²åŠ è½½: intro_outro - ç‰‡å¤´ç‰‡å°¾ç”Ÿæˆ
INFO:__mp_main__:âœ… VGPèŠ‚ç‚¹å·²åŠ è½½: timeline_integration - æœ€ç»ˆæ—¶é—´çº¿æ•´åˆ
INFO:__mp_main__:ğŸ¯ VGPèŠ‚ç‚¹ç³»ç»Ÿåˆå§‹åŒ–å®Œæˆ: 16/16 ä¸ªèŠ‚ç‚¹å¯ç”¨
INFO:__mp_main__:âœ… Loaded 16 nodes
INFO:app:âœ… VGPæ–°å·¥ä½œæµAPIå·²åŠ è½½: /vgp/generate
INFO:app:âœ… VGPèŠ‚ç‚¹å·²åŠ è½½: video_type_identification - è§†é¢‘ç±»å‹è¯†åˆ«
INFO:app:âœ… VGPèŠ‚ç‚¹å·²åŠ è½½: emotion_analysis - æƒ…æ„ŸåŸºè°ƒåˆ†æ
INFO:app:âœ… VGPèŠ‚ç‚¹å·²åŠ è½½: shot_block_generation - åˆ†é•œå—ç”Ÿæˆ
INFO:app:âœ… VGPèŠ‚ç‚¹å·²åŠ è½½: bgm_anchor_planning - BGMé”šç‚¹è§„åˆ’
INFO:app:âœ… VGPèŠ‚ç‚¹å·²åŠ è½½: bgm_composition - BGMåˆæˆæŸ¥æ‰¾
INFO:app:âœ… VGPèŠ‚ç‚¹å·²åŠ è½½: asset_request - ç´ æéœ€æ±‚è§£æ
INFO:app:âœ… VGPèŠ‚ç‚¹å·²åŠ è½½: audio_processing - éŸ³é¢‘å¤„ç†
INFO:llm.qwen:âœ… DashScope APIå¯†é’¥å·²è®¾ç½®: sk-a48a1d84e...
INFO:app:âœ… VGPèŠ‚ç‚¹å·²åŠ è½½: sfx_integration - éŸ³æ•ˆæ·»åŠ 
INFO:llm.qwen:âœ… DashScope APIå¯†é’¥å·²è®¾ç½®: sk-a48a1d84e...
INFO:app:âœ… VGPèŠ‚ç‚¹å·²åŠ è½½: transition_selection - è½¬åœºé€‰æ‹©
INFO:app:âœ… VGPèŠ‚ç‚¹å·²åŠ è½½: filter_application - æ»¤é•œåº”ç”¨
INFO:llm.qwen:âœ… DashScope APIå¯†é’¥å·²è®¾ç½®: sk-a48a1d84e...
INFO:app:âœ… VGPèŠ‚ç‚¹å·²åŠ è½½: dynamic_effects - åŠ¨æ€ç‰¹æ•ˆæ·»åŠ 
INFO:llm.qwen:âœ… DashScope APIå¯†é’¥å·²è®¾ç½®: sk-a48a1d84e...
INFO:app:âœ… VGPèŠ‚ç‚¹å·²åŠ è½½: aux_media_insertion - é¢å¤–åª’ä½“æ’å…¥
INFO:llm.qwen:âœ… DashScope APIå¯†é’¥å·²è®¾ç½®: sk-a48a1d84e...
INFO:app:âœ… VGPèŠ‚ç‚¹å·²åŠ è½½: aux_text_insertion - è£…é¥°æ–‡å­—æ’å…¥
INFO:llm.qwen:âœ… DashScope APIå¯†é’¥å·²è®¾ç½®: sk-a48a1d84e...
INFO:app:âœ… VGPèŠ‚ç‚¹å·²åŠ è½½: subtitle_generation - å­—å¹•ç”Ÿæˆ
INFO:llm.qwen:âœ… DashScope APIå¯†é’¥å·²è®¾ç½®: sk-a48a1d84e...
INFO:app:âœ… VGPèŠ‚ç‚¹å·²åŠ è½½: intro_outro - ç‰‡å¤´ç‰‡å°¾ç”Ÿæˆ
INFO:app:âœ… VGPèŠ‚ç‚¹å·²åŠ è½½: timeline_integration - æœ€ç»ˆæ—¶é—´çº¿æ•´åˆ
INFO:app:ğŸ¯ VGPèŠ‚ç‚¹ç³»ç»Ÿåˆå§‹åŒ–å®Œæˆ: 16/16 ä¸ªèŠ‚ç‚¹å¯ç”¨
INFO:app:âœ… Loaded 16 nodes
INFO:     Started server process [28086]
INFO:     Waiting for application startup.
INFO:app:ğŸš€ Aura Render API starting up...
INFO:app:ğŸ“ Environment: Development
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:PRAGMA main.table_info("projects")
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:PRAGMA main.table_info("tasks")
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:PRAGMA main.table_info("node_executions")
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:PRAGMA main.table_info("materials")
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:PRAGMA main.table_info("task_materials")
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:PRAGMA main.table_info("user_preferences")
INFO:sqlalchemy.engine.Engine:[raw sql] ()
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:database.base:âœ… Database tables created successfully
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT projects.id AS projects_id, projects.uuid AS projects_uuid, projects.name AS projects_name, projects.description AS projects_description, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.user_id AS projects_user_id, projects.settings AS projects_settings
FROM projects
WHERE projects.name = ?
 LIMIT ? OFFSET ?
INFO:sqlalchemy.engine.Engine:[generated in 0.00007s] ('Default', 1, 0)
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:app:âœ… Database initialized
INFO:app:ğŸš€ Initializing VGP workflow system...
INFO:llm.qwen:âœ… DashScope APIå¯†é’¥å·²è®¾ç½®: sk-a48a1d84e...
INFO:llm.qwen:âœ… DashScope APIå¯†é’¥å·²è®¾ç½®: sk-a48a1d84e...
INFO:app:âœ… VGP workflow system initialized
INFO:     Application startup complete.
2025-10-09 17:05:15,819 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-09 17:05:15,819 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("projects")
2025-10-09 17:05:15,819 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-09 17:05:15,819 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("tasks")
2025-10-09 17:05:15,819 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-09 17:05:15,819 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("node_executions")
2025-10-09 17:05:15,820 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-09 17:05:15,820 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("materials")
2025-10-09 17:05:15,820 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-09 17:05:15,820 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("task_materials")
2025-10-09 17:05:15,820 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-09 17:05:15,820 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("user_preferences")
2025-10-09 17:05:15,820 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-10-09 17:05:15,820 INFO sqlalchemy.engine.Engine COMMIT
2025-10-09 17:05:15,826 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-09 17:05:15,827 INFO sqlalchemy.engine.Engine SELECT projects.id AS projects_id, projects.uuid AS projects_uuid, projects.name AS projects_name, projects.description AS projects_description, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.user_id AS projects_user_id, projects.settings AS projects_settings
FROM projects
WHERE projects.name = ?
 LIMIT ? OFFSET ?
2025-10-09 17:05:15,827 INFO sqlalchemy.engine.Engine [generated in 0.00007s] ('Default', 1, 0)
2025-10-09 17:05:15,827 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Workflow template registered: basic_video_generation
âœ… Workflow template registered: advanced_video_generation
âœ… Workflow template registered: audio_focused_generation
âœ… Workflow template registered: quick_prototype
âœ… Workflow template registered: vgp_new_pipeline
âœ… æ–°VGPå·¥ä½œæµæ¨¡æ¿ (vgp_new_pipeline) å·²æ³¨å†Œ
âœ… Workflow template registered: vgp_full_pipeline
âœ… æ—§VGPå·¥ä½œæµæ¨¡æ¿ (vgp_full_pipeline) å·²æ³¨å†Œï¼ˆå¤‡ç”¨ï¼‰
ğŸš€ Initializing Video Generation Workflow System...
  âš ï¸  Database manager doesn't require initialization
  âš ï¸  Cache manager doesn't require initialization
  âš ï¸  Task queue manager doesn't require initialization
  âš ï¸  Material client manager doesn't require initialization
  âš ï¸  TTS service manager doesn't require initialization
  âš ï¸  Image generation manager doesn't require initialization
âœ… Video Generation Workflow System initialized successfully
   Core workflow system is ready (optional services may be skipped)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT projects.id AS projects_id, projects.uuid AS projects_uuid, projects.name AS projects_name, projects.description AS projects_description, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.user_id AS projects_user_id, projects.settings AS projects_settings
FROM projects
WHERE projects.name = ?
 LIMIT ? OFFSET ?
INFO:sqlalchemy.engine.Engine:[cached since 5.123s ago] ('Default', 1, 0)
INFO:sqlalchemy.engine.Engine:INSERT INTO tasks (task_id, theme, keywords, target_duration, user_description, config, priority, status, progress, message, output_url, error_message, retry_count, started_at, completed_at, processing_time, project_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING id, created_at
INFO:sqlalchemy.engine.Engine:[generated in 0.00032s] ('3256dedc-aed9-46dd-8aa5-5b6b52802b3d', 'äº§å“å±•ç¤º', '["\\u667a\\u80fd\\u6295\\u5f71\\u4eea", "4K\\u9ad8\\u6e05", "\\u4fbf\\u643a", "\\u8bed\\u97f3\\u63a7\\u5236"]', 20, 'å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚', '{}', 0, 'PENDING', 0.0, None, None, None, 0, None, None, None, 1)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT tasks.id, tasks.task_id, tasks.theme, tasks.keywords, tasks.target_duration, tasks.user_description, tasks.config, tasks.priority, tasks.status, tasks.progress, tasks.message, tasks.result, tasks.output_url, tasks.error_message, tasks.retry_count, tasks.created_at, tasks.started_at, tasks.completed_at, tasks.processing_time, tasks.project_id
FROM tasks
WHERE tasks.id = ?
INFO:sqlalchemy.engine.Engine:[generated in 0.00008s] (103,)
INFO:app:ğŸš€ Starting video generation task: 3256dedc-aed9-46dd-8aa5-5b6b52802b3d
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT tasks.id AS tasks_id, tasks.task_id AS tasks_task_id, tasks.theme AS tasks_theme, tasks.keywords AS tasks_keywords, tasks.target_duration AS tasks_target_duration, tasks.user_description AS tasks_user_description, tasks.config AS tasks_config, tasks.priority AS tasks_priority, tasks.status AS tasks_status, tasks.progress AS tasks_progress, tasks.message AS tasks_message, tasks.result AS tasks_result, tasks.output_url AS tasks_output_url, tasks.error_message AS tasks_error_message, tasks.retry_count AS tasks_retry_count, tasks.created_at AS tasks_created_at, tasks.started_at AS tasks_started_at, tasks.completed_at AS tasks_completed_at, tasks.processing_time AS tasks_processing_time, tasks.project_id AS tasks_project_id
FROM tasks
WHERE tasks.task_id = ?
 LIMIT ? OFFSET ?
INFO:sqlalchemy.engine.Engine:[generated in 0.00007s] ('3256dedc-aed9-46dd-8aa5-5b6b52802b3d', 1, 0)
INFO:sqlalchemy.engine.Engine:UPDATE tasks SET status=?, message=?, started_at=? WHERE tasks.id = ?
INFO:sqlalchemy.engine.Engine:[generated in 0.00005s] ('PROCESSING', 'å¼€å§‹å¤„ç†è§†é¢‘ç”Ÿæˆä»»åŠ¡', '2025-10-09 09:05:20.959431', 103)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT tasks.id, tasks.task_id, tasks.theme, tasks.keywords, tasks.target_duration, tasks.user_description, tasks.config, tasks.priority, tasks.status, tasks.progress, tasks.message, tasks.result, tasks.output_url, tasks.error_message, tasks.retry_count, tasks.created_at, tasks.started_at, tasks.completed_at, tasks.processing_time, tasks.project_id
FROM tasks
WHERE tasks.id = ?
INFO:sqlalchemy.engine.Engine:[cached since 0.003592s ago] (103,)
INFO:app:ğŸš€ Starting background processing for task 3256dedc-aed9-46dd-8aa5-5b6b52802b3d
2025-10-09 17:05:20,950 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-09 17:05:20,950 INFO sqlalchemy.engine.Engine SELECT projects.id AS projects_id, projects.uuid AS projects_uuid, projects.name AS projects_name, projects.description AS projects_description, projects.created_at AS projects_created_at, projects.updated_at AS projects_updated_at, projects.user_id AS projects_user_id, projects.settings AS projects_settings
FROM projects
WHERE projects.name = ?
 LIMIT ? OFFSET ?
2025-10-09 17:05:20,950 INFO sqlalchemy.engine.Engine [cached since 5.123s ago] ('Default', 1, 0)
2025-10-09 17:05:20,953 INFO sqlalchemy.engine.Engine INSERT INTO tasks (task_id, theme, keywords, target_duration, user_description, config, priority, status, progress, message, output_url, error_message, retry_count, started_at, completed_at, processing_time, project_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING id, created_at
2025-10-09 17:05:20,953 INFO sqlalchemy.engine.Engine [generated in 0.00032s] ('3256dedc-aed9-46dd-8aa5-5b6b52802b3d', 'äº§å“å±•ç¤º', '["\\u667a\\u80fd\\u6295\\u5f71\\u4eea", "4K\\u9ad8\\u6e05", "\\u4fbf\\u643a", "\\u8bed\\u97f3\\u63a7\\u5236"]', 20, 'å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚', '{}', 0, 'PENDING', 0.0, None, None, None, 0, None, None, None, 1)
2025-10-09 17:05:20,955 INFO sqlalchemy.engine.Engine COMMIT
2025-10-09 17:05:20,956 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-09 17:05:20,957 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.task_id, tasks.theme, tasks.keywords, tasks.target_duration, tasks.user_description, tasks.config, tasks.priority, tasks.status, tasks.progress, tasks.message, tasks.result, tasks.output_url, tasks.error_message, tasks.retry_count, tasks.created_at, tasks.started_at, tasks.completed_at, tasks.processing_time, tasks.project_id
FROM tasks
WHERE tasks.id = ?
2025-10-09 17:05:20,957 INFO sqlalchemy.engine.Engine [generated in 0.00008s] (103,)
2025-10-09 17:05:20,958 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:56278 - "POST /generate HTTP/1.1" 200 OK
2025-10-09 17:05:20,958 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-09 17:05:20,959 INFO sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.task_id AS tasks_task_id, tasks.theme AS tasks_theme, tasks.keywords AS tasks_keywords, tasks.target_duration AS tasks_target_duration, tasks.user_description AS tasks_user_description, tasks.config AS tasks_config, tasks.priority AS tasks_priority, tasks.status AS tasks_status, tasks.progress AS tasks_progress, tasks.message AS tasks_message, tasks.result AS tasks_result, tasks.output_url AS tasks_output_url, tasks.error_message AS tasks_error_message, tasks.retry_count AS tasks_retry_count, tasks.created_at AS tasks_created_at, tasks.started_at AS tasks_started_at, tasks.completed_at AS tasks_completed_at, tasks.processing_time AS tasks_processing_time, tasks.project_id AS tasks_project_id
FROM tasks
WHERE tasks.task_id = ?
 LIMIT ? OFFSET ?
2025-10-09 17:05:20,959 INFO sqlalchemy.engine.Engine [generated in 0.00007s] ('3256dedc-aed9-46dd-8aa5-5b6b52802b3d', 1, 0)
2025-10-09 17:05:20,959 INFO sqlalchemy.engine.Engine UPDATE tasks SET status=?, message=?, started_at=? WHERE tasks.id = ?
2025-10-09 17:05:20,959 INFO sqlalchemy.engine.Engine [generated in 0.00005s] ('PROCESSING', 'å¼€å§‹å¤„ç†è§†é¢‘ç”Ÿæˆä»»åŠ¡', '2025-10-09 09:05:20.959431', 103)
2025-10-09 17:05:20,960 INFO sqlalchemy.engine.Engine COMMIT
2025-10-09 17:05:20,960 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-09 17:05:20,960 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.task_id, tasks.theme, tasks.keywords, tasks.target_duration, tasks.user_description, tasks.config, tasks.priority, tasks.status, tasks.progress, tasks.message, tasks.result, tasks.output_url, tasks.error_message, tasks.retry_count, tasks.created_at, tasks.started_at, tasks.completed_at, tasks.processing_time, tasks.project_id
FROM tasks
WHERE tasks.id = ?
2025-10-09 17:05:20,960 INFO sqlalchemy.engine.Engine [cached since 0.003592s ago] (103,)
ğŸš€ Starting background processing for task 3256dedc-aed9-46dd-8aa5-5b6b52802b3d
INFO:watchfiles.main:2 changes detected
INFO:multimodal.vl_models:âœ… YOLOæ¨¡å‹å¯ç”¨
INFO:multimodal.vl_models:BLIPæ¨¡å‹åŠ è½½æˆåŠŸï¼Œä½¿ç”¨è®¾å¤‡: cpu
INFO:multimodal.vl_models:YOLOæ¨¡å‹åŠ è½½å¤±è´¥ï¼Œä½¿ç”¨æ¨¡æ‹Ÿå®ç°: PytorchStreamReader failed reading zip archive: failed finding central directory
INFO:multimodal.vl_models:Whisper base æ¨¡å‹åŠ è½½æˆåŠŸ
INFO:multimodal.qwen_integration:YOLOç‰¹å¾æå–å™¨è¿è¡Œåœ¨æ¨¡æ‹Ÿæ¨¡å¼
INFO:multimodal.qwen_integration:Qwenåˆ†æå™¨è¿è¡Œåœ¨æ¨¡æ‹Ÿæ¨¡å¼
INFO:multimodal.qwen_integration:QwenVLåˆ†æå™¨è¿è¡Œåœ¨æ¨¡æ‹Ÿæ¨¡å¼
INFO:app:ğŸ“¦ å¤„ç† 1 ä¸ªäº§å“å›¾ç‰‡
INFO:multimodal.analyzers.reference_image_analyzer.ReferenceImageAnalyzer:å›¾ç‰‡å·²ä¸‹è½½åˆ°ä¸´æ—¶æ–‡ä»¶: /var/folders/5k/_xpqn2rx06q47l0lv3lq16z40000gn/T/tmps2jsu1b6.jpg
INFO:multimodal.analyzers.reference_image_analyzer.ReferenceImageAnalyzer:å¼€å§‹åˆ†æå‚è€ƒå›¾ç‰‡: /var/folders/5k/_xpqn2rx06q47l0lv3lq16z40000gn/T/tmps2jsu1b6.jpg (ç±»å‹: product, æƒé‡: 1.0)
2025-10-09 17:07:05,749 INFO sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.task_id AS tasks_task_id, tasks.theme AS tasks_theme, tasks.keywords AS tasks_keywords, tasks.target_duration AS tasks_target_duration, tasks.user_description AS tasks_user_description, tasks.config AS tasks_config, tasks.priority AS tasks_priority, tasks.status AS tasks_status, tasks.progress AS tasks_progress, tasks.message AS tasks_message, tasks.result AS tasks_result, tasks.output_url AS tasks_output_url, tasks.error_message AS tasks_error_message, tasks.retry_count AS tasks_retry_count, tasks.created_at AS tasks_created_at, tasks.started_at AS tasks_started_at, tasks.completed_at AS tasks_completed_at, tasks.processing_time AS tasks_processing_time, tasks.project_id AS tasks_project_id
FROM tasks
WHERE tasks.task_id = ?
 LIMIT ? OFFSET ?
2025-10-09 17:07:05,749 INFO sqlalchemy.engine.Engine [cached since 104.8s ago] ('3256dedc-aed9-46dd-8aa5-5b6b52802b3d', 1, 0)
2025-10-09 17:07:05,750 INFO sqlalchemy.engine.Engine UPDATE tasks SET progress=?, message=? WHERE tasks.id = ?
2025-10-09 17:07:05,750 INFO sqlalchemy.engine.Engine [generated in 0.00009s] (10.0, 'å¤šæ¨¡æ€èåˆå®Œæˆ (ç½®ä¿¡åº¦: 0.00)', 103)
2025-10-09 17:07:05,750 INFO sqlalchemy.engine.Engine COMMIT
2025-10-09 17:07:05,751 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-09 17:07:05,751 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.task_id, tasks.theme, tasks.keywords, tasks.target_duration, tasks.user_description, tasks.config, tasks.priority, tasks.status, tasks.progress, tasks.message, tasks.result, tasks.output_url, tasks.error_message, tasks.retry_count, tasks.created_at, tasks.started_at, tasks.completed_at, tasks.processing_time, tasks.project_id
FROM tasks
WHERE tasks.id = ?
2025-10-09 17:07:05,751 INFO sqlalchemy.engine.Engine [cached since 104.8s ago] (103,)
ğŸ¯ Processing request: äº§å“å±•ç¤º - 20s
2025-10-09 17:07:05,752 INFO sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.task_id AS tasks_task_id, tasks.theme AS tasks_theme, tasks.keywords AS tasks_keywords, tasks.target_duration AS tasks_target_duration, tasks.user_description AS tasks_user_description, tasks.config AS tasks_config, tasks.priority AS tasks_priority, tasks.status AS tasks_status, tasks.progress AS tasks_progress, tasks.message AS tasks_message, tasks.result AS tasks_result, tasks.output_url AS tasks_output_url, tasks.error_message AS tasks_error_message, tasks.retry_count AS tasks_retry_count, tasks.created_at AS tasks_created_at, tasks.started_at AS tasks_started_at, tasks.completed_at AS tasks_completed_at, tasks.processing_time AS tasks_processing_time, tasks.project_id AS tasks_project_id
FROM tasks
WHERE tasks.task_id = ?
 LIMIT ? OFFSET ?
2025-10-09 17:07:05,752 INFO sqlalchemy.engine.Engine [cached since 104.8s ago] ('3256dedc-aed9-46dd-8aa5-5b6b52802b3d', 1, 0)
2025-10-09 17:07:05,752 INFO sqlalchemy.engine.Engine UPDATE tasks SET progress=?, message=? WHERE tasks.id = ?
2025-10-09 17:07:05,752 INFO sqlalchemy.engine.Engine [cached since 0.00214s ago] (0.0, 'æ­£åœ¨æ‰§è¡Œvideo_type_identification', 103)
2025-10-09 17:07:05,752 INFO sqlalchemy.engine.Engine COMMIT
2025-10-09 17:07:05,753 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-09 17:07:05,753 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.task_id, tasks.theme, tasks.keywords, tasks.target_duration, tasks.user_description, tasks.config, tasks.priority, tasks.status, tasks.progress, tasks.message, tasks.result, tasks.output_url, tasks.error_message, tasks.retry_count, tasks.created_at, tasks.started_at, tasks.completed_at, tasks.processing_time, tasks.project_id
FROM tasks
WHERE tasks.id = ?
2025-10-09 17:07:05,753 INFO sqlalchemy.engine.Engine [cached since 104.8s ago] (103,)
âš¡ æ‰§è¡Œ node 1/16: video_type_identification

ğŸ¬ [execute_node] Starting node: video_type_identification
ğŸ¬ [execute_node] Input context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion']
ğŸ¬ [execute_node] context[theme_id] = äº§å“å±•ç¤º
ğŸ¬ [execute_node] context[keywords_id] = ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
ğŸ¬ [execute_node] context[target_duration_id] = 20
ğŸ¬ [execute_node] context[user_description_id] = å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
ğŸ¬ [execute_node] Fixed context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion']

================================================================================
ğŸ” [prepare_context_for_node] node_type=video_type_identification
ğŸ” [prepare_context_for_node] raw_context keys=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion']
ğŸ” [prepare_context_for_node] input_data (before)=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ theme_id in raw_context: äº§å“å±•ç¤º
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ keywords_id in raw_context: ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ target_duration_id in raw_context: 20
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ user_description_id in raw_context: å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
ğŸ” [prepare_context_for_node] input_data (after)=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
ğŸ” [prepare_context_for_node] Final values:
    theme_id: äº§å“å±•ç¤º
    keywords_id: ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
    target_duration_id: 20
    user_description_id: å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
================================================================================

ğŸ¬ [execute_node] Prepared input keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
ğŸ¬ [execute_node] Execution context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion']
ğŸ¬ [execute_node] execution_context[theme_id] = äº§å“å±•ç¤º
ğŸ¬ [execute_node] execution_context[keywords_id] = ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
ğŸ¬ [execute_node] execution_context[target_duration_id] = 20
ğŸ¬ [execute_node] execution_context[user_description_id] = å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
ğŸ¬ [execute_node] Calling node.generate()...

ğŸ” [DEBUG] Node è§†é¢‘ç±»å‹è¯†åˆ« validation:
ğŸ” [DEBUG] Context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion']
ğŸ” [DEBUG] Required inputs: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
ğŸ” [DEBUG] Checking parameter 'theme_id': exists=True, value=äº§å“å±•ç¤º
ğŸ” [DEBUG] Checking parameter 'keywords_id': exists=True, value=['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
ğŸ” [DEBUG] Checking parameter 'target_duration_id': exists=True, value=20
ğŸ” [DEBUG] Checking parameter 'user_description_id': exists=True, value=å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
ğŸ” [VIDEO_TYPE_DEBUG] theme=äº§å“å±•ç¤º (type: <class 'str'>)
ğŸ” [VIDEO_TYPE_DEBUG] keywords=['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶'] (type: <class 'list'>)
ğŸ” [VIDEO_TYPE_DEBUG] target_duration=20 (type: <class 'int'>)
ğŸ” [VIDEO_TYPE_DEBUG] user_description=å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚ (type: <class 'str'>)
INFO:multimodal.analyzers.reference_image_analyzer.ReferenceImageAnalyzer:å›¾ç‰‡åˆ†æå®Œæˆ: /var/folders/5k/_xpqn2rx06q47l0lv3lq16z40000gn/T/tmps2jsu1b6.jpg (è€—æ—¶: 0.07s)
INFO:multimodal.analyzers.reference_image_analyzer.ReferenceImageAnalyzer:å·²æ¸…ç†ä¸´æ—¶æ–‡ä»¶: /var/folders/5k/_xpqn2rx06q47l0lv3lq16z40000gn/T/tmps2jsu1b6.jpg
INFO:app:âœ… äº§å“å›¾åˆ†æå®Œæˆ: https://ai-movie-cloud-v2.oss-cn-shanghai.aliyuncs.com/%E6%B5%8B%E8%AF%95%E5%95%86%E5%93%81.jpg
INFO:app:ğŸ¯ å¤šæ¨¡æ€å¤„ç†å®Œæˆ: 1 ä¸ªåª’ä½“æ–‡ä»¶
INFO:app:ğŸ¬ å¤šæ¨¡æ€è¾“å…¥å¤„ç†å®Œæˆ: 1 ä¸ªåª’ä½“æ–‡ä»¶
INFO:multimodal.fusion.multimodal_fusion_engine:ğŸ”„ å¼€å§‹å¤šæ¨¡æ€èåˆå¤„ç†
INFO:multimodal.fusion.multimodal_fusion_engine:âœ… å¤šæ¨¡æ€èåˆå®Œæˆï¼Œèåˆäº† 1 ä¸ªè¾“å…¥
INFO:app:ğŸ”„ å¤šæ¨¡æ€èåˆå®Œæˆï¼Œç½®ä¿¡åº¦: 0.00
INFO:sqlalchemy.engine.Engine:SELECT tasks.id AS tasks_id, tasks.task_id AS tasks_task_id, tasks.theme AS tasks_theme, tasks.keywords AS tasks_keywords, tasks.target_duration AS tasks_target_duration, tasks.user_description AS tasks_user_description, tasks.config AS tasks_config, tasks.priority AS tasks_priority, tasks.status AS tasks_status, tasks.progress AS tasks_progress, tasks.message AS tasks_message, tasks.result AS tasks_result, tasks.output_url AS tasks_output_url, tasks.error_message AS tasks_error_message, tasks.retry_count AS tasks_retry_count, tasks.created_at AS tasks_created_at, tasks.started_at AS tasks_started_at, tasks.completed_at AS tasks_completed_at, tasks.processing_time AS tasks_processing_time, tasks.project_id AS tasks_project_id
FROM tasks
WHERE tasks.task_id = ?
 LIMIT ? OFFSET ?
INFO:sqlalchemy.engine.Engine:[cached since 104.8s ago] ('3256dedc-aed9-46dd-8aa5-5b6b52802b3d', 1, 0)
INFO:sqlalchemy.engine.Engine:UPDATE tasks SET progress=?, message=? WHERE tasks.id = ?
INFO:sqlalchemy.engine.Engine:[generated in 0.00009s] (10.0, 'å¤šæ¨¡æ€èåˆå®Œæˆ (ç½®ä¿¡åº¦: 0.00)', 103)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT tasks.id, tasks.task_id, tasks.theme, tasks.keywords, tasks.target_duration, tasks.user_description, tasks.config, tasks.priority, tasks.status, tasks.progress, tasks.message, tasks.result, tasks.output_url, tasks.error_message, tasks.retry_count, tasks.created_at, tasks.started_at, tasks.completed_at, tasks.processing_time, tasks.project_id
FROM tasks
WHERE tasks.id = ?
INFO:sqlalchemy.engine.Engine:[cached since 104.8s ago] (103,)
INFO:app:ğŸ¯ Task context: {'theme_id': 'äº§å“å±•ç¤º', 'keywords_id': ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶'], 'target_duration_id': 20, 'user_description_id': 'å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚', 'reference_media': [{'media_type': 'product_image', 'original_input': {'url': 'https://ai-movie-cloud-v2.oss-cn-shanghai.aliyuncs.com/%E6%B5%8B%E8%AF%95%E5%95%86%E5%93%81.jpg', 'type': 'product', 'weight': 1.0}, 'analysis_result': {'image_path': '/var/folders/5k/_xpqn2rx06q47l0lv3lq16z40000gn/T/tmps2jsu1b6.jpg', 'analysis_type': 'product', 'analysis_weight': 1.0, 'analysis_result': {'style_analysis': {'color_palette': {'mean_rgb': [205.41571875, 205.590578125, 206.44095], 'color_temperature': 'neutral', 'saturation': 0.027028033088235294, 'brightness': 0.8071205841503268, 'dominant_colors': [(203, 203, 204), (211, 211, 212), (209, 209, 210), (205, 205, 206), (208, 208, 209)], 'color_harmony': 'analogous'}, 'composition': {'aspect_ratio': 1.0, 'composition_type': 'square', 'center_focus': {'mean_brightness': 0.38722515522875817, 'region_size': (400, 400)}, 'symmetry_score': 0.9854412867647059, 'image_size': (800, 800)}, 'filter_effects': {'detected_filters': ['blur'], 'blur_level': 0.9358062254901961, 'sharpness_level': 0.003681196071146661, 'contrast_level': 0.6141285911477374, 'filter_strength': 0.25}, 'style_score': 0.5062346599264705, 'analysis_method': 'pil_analysis', 'image_dimensions': (800, 800)}, 'mood_analysis': {'emotional_colors': {'hue': 40.8272375, 'saturation': 0.027028033088235294, 'value': 0.8110263664215687, 'emotional_category': 'warm_energetic', 'warmth_level': 0.39909826593137254}, 'atmosphere': {'dark_ratio': 0.1261328125, 'bright_ratio': 0.71140625, 'atmosphere_type': 'cheerful', 'contrast_level': 0.5852734375}, 'mood_intensity': 0.3061507352941177, 'primary_mood': 'neutral', 'analysis_method': 'mood_extraction'}}, 'analysis_metadata': {'analysis_time': 0.069201, 'timestamp': '2025-10-09T17:07:05.747109', 'pil_available': True, 'opencv_available': True, 'success': True}}, 'processing_status': 'success'}], 'multimodal_fusion': {'fusion_timestamp': '2025-10-09T17:07:05.749005', 'input_summary': {'total_inputs': 1, 'video_count': 0, 'image_count': 0, 'product_count': 1}, 'unified_style': {'dominant_colors': [], 'primary_mood': '', 'style_direction': '', 'style_source': 'multimodal_fusion', 'confidence': 0.0}, 'unified_content': {'key_elements': [], 'scene_description': 'ç°ä»£ç®€çº¦åœºæ™¯', 'content_source': 'multimodal_fusion'}, 'technical_requirements': {'resolution': '1920x1080', 'fps': 30, 'duration': '30s', 'format': 'mp4', 'quality': 'high'}, 'fusion_weights': {'unknown_unknown': 1.0}, 'confidence_score': 0.0}}
INFO:sqlalchemy.engine.Engine:SELECT tasks.id AS tasks_id, tasks.task_id AS tasks_task_id, tasks.theme AS tasks_theme, tasks.keywords AS tasks_keywords, tasks.target_duration AS tasks_target_duration, tasks.user_description AS tasks_user_description, tasks.config AS tasks_config, tasks.priority AS tasks_priority, tasks.status AS tasks_status, tasks.progress AS tasks_progress, tasks.message AS tasks_message, tasks.result AS tasks_result, tasks.output_url AS tasks_output_url, tasks.error_message AS tasks_error_message, tasks.retry_count AS tasks_retry_count, tasks.created_at AS tasks_created_at, tasks.started_at AS tasks_started_at, tasks.completed_at AS tasks_completed_at, tasks.processing_time AS tasks_processing_time, tasks.project_id AS tasks_project_id
FROM tasks
WHERE tasks.task_id = ?
 LIMIT ? OFFSET ?
INFO:sqlalchemy.engine.Engine:[cached since 104.8s ago] ('3256dedc-aed9-46dd-8aa5-5b6b52802b3d', 1, 0)
INFO:sqlalchemy.engine.Engine:UPDATE tasks SET progress=?, message=? WHERE tasks.id = ?
INFO:sqlalchemy.engine.Engine:[cached since 0.00214s ago] (0.0, 'æ­£åœ¨æ‰§è¡Œvideo_type_identification', 103)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT tasks.id, tasks.task_id, tasks.theme, tasks.keywords, tasks.target_duration, tasks.user_description, tasks.config, tasks.priority, tasks.status, tasks.progress, tasks.message, tasks.result, tasks.output_url, tasks.error_message, tasks.retry_count, tasks.created_at, tasks.started_at, tasks.completed_at, tasks.processing_time, tasks.project_id
FROM tasks
WHERE tasks.id = ?
INFO:sqlalchemy.engine.Engine:[cached since 104.8s ago] (103,)
INFO:app:ğŸ“‹ Task 3256dedc-aed9-46dd-8aa5-5b6b52802b3d - Node 1: processing - æ­£åœ¨æ‰§è¡Œvideo_type_identification
INFO:app:ğŸ¬ æ‰§è¡ŒVGPèŠ‚ç‚¹: video_type_identification - è§†é¢‘ç±»å‹è¯†åˆ«
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Unknown node type: multimodal_fusion
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Unknown node type: multimodal_fusion
INFO:video_generate_protocol.vgp_data_transformer:prepare_context_for_node: node_type=video_type_identification, raw_context keys=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion']
INFO:video_generate_protocol.vgp_data_transformer:prepare_context_for_node: æœ€ç»ˆå‡†å¤‡çš„ input_data keys=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
INFO:llm.qwen:âœ… DashScope APIå¯†é’¥å·²è®¾ç½®: sk-a48a1d84e...
INFO:watchfiles.main:2 changes detected
æ¨¡å‹åŸå§‹è¾“å‡º: æ ¹æ®æä¾›çš„ä¿¡æ¯ï¼Œè§†é¢‘çš„ä¸»è¦ç›®çš„æ˜¯å±•ç¤ºä¸€æ¬¾æ™ºèƒ½æŠ•å½±ä»ªçš„ç‰¹ç‚¹ä¸ä¼˜åŠ¿ï¼ŒåŒ…æ‹¬4Ké«˜æ¸…ç”»è´¨ã€ä¾¿æºæ€§ä»¥åŠè¯­éŸ³æ§åˆ¶åŠŸèƒ½ã€‚åŸºäºè¿™äº›ç‰¹ç‚¹ï¼Œæœ€åˆé€‚çš„è§†é¢‘ç±»å‹åº”ä¸ºâ€œå•†ä¸šç±»â€ä¸­çš„â€œäº§å“å¹¿å‘Šâ€ã€‚è¿™æ ·çš„è§†é¢‘èƒ½å¤Ÿæœ‰æ•ˆåœ°å‘è§‚ä¼—ä¼ è¾¾äº§å“çš„å…³é”®å–ç‚¹ï¼Œå¹¶æ¿€å‘æ½œåœ¨å®¢æˆ·çš„è´­ä¹°å…´è¶£ã€‚

å¯¹äºä¸€ä¸ªæ—¶é•¿ä»…ä¸º20ç§’çš„äº§å“å¹¿å‘Šæ¥è¯´ï¼Œéœ€è¦åšåˆ°ç®€æ´æ˜äº†åŒæ—¶åˆèƒ½å¸å¼•äººã€‚è€ƒè™‘åˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘å°†è®¾è®¡å¦‚ä¸‹ç»“æ„ï¼š

- **Introï¼ˆå¼€å¤´ï¼‰**ï¼šå¿«é€Ÿå¸å¼•æ³¨æ„åŠ›ï¼Œå¯ä»¥é€šè¿‡å±•ç¤ºäº§å“åœ¨ä½¿ç”¨ä¸­çš„ç²¾å½©ç¬é—´æ¥å®ç°ã€‚
- **Bodyï¼ˆä¸»ä½“ï¼‰**ï¼šçªå‡ºä»‹ç»äº§å“çš„ä¸‰å¤§æ ¸å¿ƒç‰¹æ€§â€”â€”4Ké«˜æ¸…ç”»è´¨ã€ä¾¿æºæ€§å’Œè¯­éŸ³æ§åˆ¶ã€‚
- **Conclusionï¼ˆç»“å°¾ï¼‰**ï¼šç®€çŸ­åœ°é‡ç”³å“ç‰Œæˆ–äº§å“åç§°ï¼Œç•™ä¸‹æ·±åˆ»å°è±¡ã€‚

ä¸‹é¢æ˜¯ç¬¦åˆè¦æ±‚çš„JSONæ ¼å¼è¾“å‡ºï¼š

```json
{
  "video_type": "äº§å“å¹¿å‘Š",
  "structure_template": {
    "intro": "ä»¥ä¸€æ®µå¿«é€Ÿå‰ªè¾‘å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªæŠ•å°„å‡ºçš„ç»šä¸½ç”»é¢ï¼ŒèƒŒæ™¯éŸ³ä¹è½»å¿«å¼•äººå…¥èƒœã€‚",
    "body": "ä¾æ¬¡é€šè¿‡åŠ¨æ€æ¼”ç¤ºçš„æ–¹å¼ä»‹ç»è¯¥æŠ•å½±ä»ªçš„ä¸‰ä¸ªä¸»è¦ç‰¹è‰²ï¼šé¦–å…ˆæ˜¾ç¤ºâ€˜4Kè¶…æ¸…â€™æ–‡å­—å åŠ äºé«˜è´¨é‡å½±åƒä¸Šï¼›æ¥ç€åˆ‡æ¢åˆ°æºå¸¦åœºæ™¯ï¼Œå¼ºè°ƒå…¶ä¾¿æºæ€§ï¼›æœ€åå±•ç¤ºç”¨æˆ·é€šè¿‡ç®€å•å£ä»¤æ“ä½œè®¾å¤‡çš„ç”»é¢ï¼Œçªå‡ºè¯­éŸ³æ§åˆ¶åŠŸèƒ½ã€‚",
    "conclusion": "æœ€åå‡ºç°å“ç‰ŒlogoåŠäº§å“åç§°ï¼Œé…ä»¥å·å¬æ€§è¯­å¥å¦‚â€˜ç«‹å³ä½“éªŒæœªæ¥è§†ç•Œâ€™ç­‰é¼“åŠ±è¡ŒåŠ¨çš„è¯æœ¯ã€‚"
  }
}
```

è¿™ä¸ªæ¨¡æ¿æ—¨åœ¨çŸ­æ—¶é—´å†…é«˜æ•ˆä¼ é€’ä¿¡æ¯çš„åŒæ—¶ä¿æŒè¶³å¤Ÿçš„å¸å¼•åŠ›ï¼Œé€‚åˆç”¨äºç¤¾äº¤åª’ä½“æ¨å¹¿æˆ–æ˜¯åœ¨çº¿å¹³å°çš„äº§å“å®£ä¼ ã€‚
ğŸ” Node video_type_identification extracted outputs: ['video_type_id', 'structure_template_id']
ğŸ¯ Context keys after video_type_identification: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id']
âœ… Node 1/16 completed: video_type_identification
2025-10-09 17:07:30,819 INFO sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.task_id AS tasks_task_id, tasks.theme AS tasks_theme, tasks.keywords AS tasks_keywords, tasks.target_duration AS tasks_target_duration, tasks.user_description AS tasks_user_description, tasks.config AS tasks_config, tasks.priority AS tasks_priority, tasks.status AS tasks_status, tasks.progress AS tasks_progress, tasks.message AS tasks_message, tasks.result AS tasks_result, tasks.output_url AS tasks_output_url, tasks.error_message AS tasks_error_message, tasks.retry_count AS tasks_retry_count, tasks.created_at AS tasks_created_at, tasks.started_at AS tasks_started_at, tasks.completed_at AS tasks_completed_at, tasks.processing_time AS tasks_processing_time, tasks.project_id AS tasks_project_id
FROM tasks
WHERE tasks.task_id = ?
 LIMIT ? OFFSET ?
2025-10-09 17:07:30,819 INFO sqlalchemy.engine.Engine [cached since 129.9s ago] ('3256dedc-aed9-46dd-8aa5-5b6b52802b3d', 1, 0)
2025-10-09 17:07:30,821 INFO sqlalchemy.engine.Engine UPDATE tasks SET progress=?, message=? WHERE tasks.id = ?
2025-10-09 17:07:30,821 INFO sqlalchemy.engine.Engine [cached since 25.07s ago] (6.25, 'æ­£åœ¨æ‰§è¡Œemotion_analysis', 103)
2025-10-09 17:07:30,822 INFO sqlalchemy.engine.Engine COMMIT
2025-10-09 17:07:30,824 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-09 17:07:30,824 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.task_id, tasks.theme, tasks.keywords, tasks.target_duration, tasks.user_description, tasks.config, tasks.priority, tasks.status, tasks.progress, tasks.message, tasks.result, tasks.output_url, tasks.error_message, tasks.retry_count, tasks.created_at, tasks.started_at, tasks.completed_at, tasks.processing_time, tasks.project_id
FROM tasks
WHERE tasks.id = ?
2025-10-09 17:07:30,824 INFO sqlalchemy.engine.Engine [cached since 129.9s ago] (103,)
âš¡ æ‰§è¡Œ node 2/16: emotion_analysis

ğŸ¬ [execute_node] Starting node: emotion_analysis
ğŸ¬ [execute_node] Input context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification']
ğŸ¬ [execute_node] context[theme_id] = äº§å“å±•ç¤º
ğŸ¬ [execute_node] context[keywords_id] = ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
ğŸ¬ [execute_node] context[target_duration_id] = 20
ğŸ¬ [execute_node] context[user_description_id] = å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
ğŸ¬ [execute_node] Fixed context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification']

================================================================================
ğŸ” [prepare_context_for_node] node_type=emotion_analysis
ğŸ” [prepare_context_for_node] raw_context keys=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification']
ğŸ” [prepare_context_for_node] input_data (before)=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ theme_id in raw_context: äº§å“å±•ç¤º
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ keywords_id in raw_context: ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ target_duration_id in raw_context: 20
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ user_description_id in raw_context: å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
ğŸ” [prepare_context_for_node] input_data (after)=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
ğŸ” [prepare_context_for_node] Final values:
    theme_id: äº§å“å±•ç¤º
    keywords_id: ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
    target_duration_id: 20
    user_description_id: å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
================================================================================

ğŸ¬ [execute_node] Prepared input keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
ğŸ¬ [execute_node] Execution context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification']
ğŸ¬ [execute_node] execution_context[theme_id] = äº§å“å±•ç¤º
ğŸ¬ [execute_node] execution_context[keywords_id] = ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
ğŸ¬ [execute_node] execution_context[target_duration_id] = 20
ğŸ¬ [execute_node] execution_context[user_description_id] = å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
ğŸ¬ [execute_node] Calling node.generate()...

ğŸ” [DEBUG] Node æƒ…æ„ŸåŸºè°ƒåˆ†æ validation:
ğŸ” [DEBUG] Context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification']
ğŸ” [DEBUG] Required inputs: ['user_description_id', 'video_type_id']
ğŸ” [DEBUG] Checking parameter 'user_description_id': exists=True, value=å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
ğŸ” [DEBUG] Checking parameter 'video_type_id': exists=True, value=äº§å“å¹¿å‘Š
INFO:app:âœ… VGPèŠ‚ç‚¹æ‰§è¡ŒæˆåŠŸ: video_type_identification
INFO:app:ğŸ” Node video_type_identification extracted outputs: ['video_type_id', 'structure_template_id']
INFO:app:ğŸ¯ Context keys after video_type_identification: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id']
INFO:app:ğŸ“‹ Task 3256dedc-aed9-46dd-8aa5-5b6b52802b3d - Node 1: completed - video_type_identificationæ‰§è¡Œå®Œæˆ
INFO:app:âœ… Node video_type_identification completed
INFO:sqlalchemy.engine.Engine:SELECT tasks.id AS tasks_id, tasks.task_id AS tasks_task_id, tasks.theme AS tasks_theme, tasks.keywords AS tasks_keywords, tasks.target_duration AS tasks_target_duration, tasks.user_description AS tasks_user_description, tasks.config AS tasks_config, tasks.priority AS tasks_priority, tasks.status AS tasks_status, tasks.progress AS tasks_progress, tasks.message AS tasks_message, tasks.result AS tasks_result, tasks.output_url AS tasks_output_url, tasks.error_message AS tasks_error_message, tasks.retry_count AS tasks_retry_count, tasks.created_at AS tasks_created_at, tasks.started_at AS tasks_started_at, tasks.completed_at AS tasks_completed_at, tasks.processing_time AS tasks_processing_time, tasks.project_id AS tasks_project_id
FROM tasks
WHERE tasks.task_id = ?
 LIMIT ? OFFSET ?
INFO:sqlalchemy.engine.Engine:[cached since 129.9s ago] ('3256dedc-aed9-46dd-8aa5-5b6b52802b3d', 1, 0)
INFO:sqlalchemy.engine.Engine:UPDATE tasks SET progress=?, message=? WHERE tasks.id = ?
INFO:sqlalchemy.engine.Engine:[cached since 25.07s ago] (6.25, 'æ­£åœ¨æ‰§è¡Œemotion_analysis', 103)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT tasks.id, tasks.task_id, tasks.theme, tasks.keywords, tasks.target_duration, tasks.user_description, tasks.config, tasks.priority, tasks.status, tasks.progress, tasks.message, tasks.result, tasks.output_url, tasks.error_message, tasks.retry_count, tasks.created_at, tasks.started_at, tasks.completed_at, tasks.processing_time, tasks.project_id
FROM tasks
WHERE tasks.id = ?
INFO:sqlalchemy.engine.Engine:[cached since 129.9s ago] (103,)
INFO:app:ğŸ“‹ Task 3256dedc-aed9-46dd-8aa5-5b6b52802b3d - Node 2: processing - æ­£åœ¨æ‰§è¡Œemotion_analysis
INFO:app:ğŸ¬ æ‰§è¡ŒVGPèŠ‚ç‚¹: emotion_analysis - æƒ…æ„ŸåŸºè°ƒåˆ†æ
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Unknown node type: multimodal_fusion
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Unknown node type: multimodal_fusion
INFO:video_generate_protocol.vgp_data_transformer:prepare_context_for_node: node_type=emotion_analysis, raw_context keys=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification']
INFO:video_generate_protocol.vgp_data_transformer:prepare_context_for_node: æœ€ç»ˆå‡†å¤‡çš„ input_data keys=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
INFO:llm.qwen:âœ… DashScope APIå¯†é’¥å·²è®¾ç½®: sk-a48a1d84e...
INFO:watchfiles.main:2 changes detected
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'primary_emotion' for emotion_analysis, using default
INFO:app:âœ… VGPèŠ‚ç‚¹æ‰§è¡ŒæˆåŠŸ: emotion_analysis
INFO:app:ğŸ” Node emotion_analysis extracted outputs: ['emotions_id']
INFO:app:ğŸ¯ Context keys after emotion_analysis: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id']
INFO:app:ğŸ“‹ Task 3256dedc-aed9-46dd-8aa5-5b6b52802b3d - Node 2: completed - emotion_analysisæ‰§è¡Œå®Œæˆ
INFO:app:âœ… Node emotion_analysis completed
INFO:sqlalchemy.engine.Engine:SELECT tasks.id AS tasks_id, tasks.task_id AS tasks_task_id, tasks.theme AS tasks_theme, tasks.keywords AS tasks_keywords, tasks.target_duration AS tasks_target_duration, tasks.user_description AS tasks_user_description, tasks.config AS tasks_config, tasks.priority AS tasks_priority, tasks.status AS tasks_status, tasks.progress AS tasks_progress, tasks.message AS tasks_message, tasks.result AS tasks_result, tasks.output_url AS tasks_output_url, tasks.error_message AS tasks_error_message, tasks.retry_count AS tasks_retry_count, tasks.created_at AS tasks_created_at, tasks.started_at AS tasks_started_at, tasks.completed_at AS tasks_completed_at, tasks.processing_time AS tasks_processing_time, tasks.project_id AS tasks_project_id
FROM tasks
WHERE tasks.task_id = ?
 LIMIT ? OFFSET ?
INFO:sqlalchemy.engine.Engine:[cached since 135.6s ago] ('3256dedc-aed9-46dd-8aa5-5b6b52802b3d', 1, 0)
INFO:sqlalchemy.engine.Engine:UPDATE tasks SET progress=?, message=? WHERE tasks.id = ?
INFO:sqlalchemy.engine.Engine:[cached since 30.8s ago] (12.5, 'æ­£åœ¨æ‰§è¡Œshot_block_generation', 103)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT tasks.id, tasks.task_id, tasks.theme, tasks.keywords, tasks.target_duration, tasks.user_description, tasks.config, tasks.priority, tasks.status, tasks.progress, tasks.message, tasks.result, tasks.output_url, tasks.error_message, tasks.retry_count, tasks.created_at, tasks.started_at, tasks.completed_at, tasks.processing_time, tasks.project_id
FROM tasks
WHERE tasks.id = ?
INFO:sqlalchemy.engine.Engine:[cached since 135.6s ago] (103,)
INFO:app:ğŸ“‹ Task 3256dedc-aed9-46dd-8aa5-5b6b52802b3d - Node 3: processing - æ­£åœ¨æ‰§è¡Œshot_block_generation
INFO:app:ğŸ¬ æ‰§è¡ŒVGPèŠ‚ç‚¹: shot_block_generation - åˆ†é•œå—ç”Ÿæˆ
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Unknown node type: multimodal_fusion
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Unknown node type: multimodal_fusion
INFO:video_generate_protocol.vgp_data_transformer:prepare_context_for_node: node_type=shot_block_generation, raw_context keys=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis']
INFO:video_generate_protocol.vgp_data_transformer:prepare_context_for_node: æœ€ç»ˆå‡†å¤‡çš„ input_data keys=['video_type_id', 'structure_template_id', 'emotions_id', 'theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
INFO:llm.qwen:âœ… DashScope APIå¯†é’¥å·²è®¾ç½®: sk-a48a1d84e...
INFO:llm.qwen:âœ… DashScope APIå¯†é’¥å·²è®¾ç½®: sk-a48a1d84e...
ğŸ” Node emotion_analysis extracted outputs: ['emotions_id']
ğŸ¯ Context keys after emotion_analysis: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id']
âœ… Node 2/16 completed: emotion_analysis
2025-10-09 17:07:36,552 INFO sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.task_id AS tasks_task_id, tasks.theme AS tasks_theme, tasks.keywords AS tasks_keywords, tasks.target_duration AS tasks_target_duration, tasks.user_description AS tasks_user_description, tasks.config AS tasks_config, tasks.priority AS tasks_priority, tasks.status AS tasks_status, tasks.progress AS tasks_progress, tasks.message AS tasks_message, tasks.result AS tasks_result, tasks.output_url AS tasks_output_url, tasks.error_message AS tasks_error_message, tasks.retry_count AS tasks_retry_count, tasks.created_at AS tasks_created_at, tasks.started_at AS tasks_started_at, tasks.completed_at AS tasks_completed_at, tasks.processing_time AS tasks_processing_time, tasks.project_id AS tasks_project_id
FROM tasks
WHERE tasks.task_id = ?
 LIMIT ? OFFSET ?
2025-10-09 17:07:36,552 INFO sqlalchemy.engine.Engine [cached since 135.6s ago] ('3256dedc-aed9-46dd-8aa5-5b6b52802b3d', 1, 0)
2025-10-09 17:07:36,553 INFO sqlalchemy.engine.Engine UPDATE tasks SET progress=?, message=? WHERE tasks.id = ?
2025-10-09 17:07:36,553 INFO sqlalchemy.engine.Engine [cached since 30.8s ago] (12.5, 'æ­£åœ¨æ‰§è¡Œshot_block_generation', 103)
2025-10-09 17:07:36,555 INFO sqlalchemy.engine.Engine COMMIT
2025-10-09 17:07:36,556 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-09 17:07:36,556 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.task_id, tasks.theme, tasks.keywords, tasks.target_duration, tasks.user_description, tasks.config, tasks.priority, tasks.status, tasks.progress, tasks.message, tasks.result, tasks.output_url, tasks.error_message, tasks.retry_count, tasks.created_at, tasks.started_at, tasks.completed_at, tasks.processing_time, tasks.project_id
FROM tasks
WHERE tasks.id = ?
2025-10-09 17:07:36,556 INFO sqlalchemy.engine.Engine [cached since 135.6s ago] (103,)
âš¡ æ‰§è¡Œ node 3/16: shot_block_generation

ğŸ¬ [execute_node] Starting node: shot_block_generation
ğŸ¬ [execute_node] Input context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis']
ğŸ¬ [execute_node] context[theme_id] = äº§å“å±•ç¤º
ğŸ¬ [execute_node] context[keywords_id] = ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
ğŸ¬ [execute_node] context[target_duration_id] = 20
ğŸ¬ [execute_node] context[user_description_id] = å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
ğŸ¬ [execute_node] Fixed context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis']

================================================================================
ğŸ” [prepare_context_for_node] node_type=shot_block_generation
ğŸ” [prepare_context_for_node] raw_context keys=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis']
ğŸ” [prepare_context_for_node] input_data (before)=['video_type_id', 'structure_template_id', 'emotions_id', 'theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ theme_id in raw_context: äº§å“å±•ç¤º
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ keywords_id in raw_context: ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ target_duration_id in raw_context: 20
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ user_description_id in raw_context: å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
ğŸ” [prepare_context_for_node] input_data (after)=['video_type_id', 'structure_template_id', 'emotions_id', 'theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
ğŸ” [prepare_context_for_node] Final values:
    theme_id: äº§å“å±•ç¤º
    keywords_id: ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
    target_duration_id: 20
    user_description_id: å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
================================================================================

ğŸ¬ [execute_node] Prepared input keys: ['video_type_id', 'structure_template_id', 'emotions_id', 'theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
ğŸ¬ [execute_node] Execution context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis']
ğŸ¬ [execute_node] execution_context[theme_id] = äº§å“å±•ç¤º
ğŸ¬ [execute_node] execution_context[keywords_id] = ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
ğŸ¬ [execute_node] execution_context[target_duration_id] = 20
ğŸ¬ [execute_node] execution_context[user_description_id] = å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
ğŸ¬ [execute_node] Calling node.generate()...

ğŸ” [DEBUG] Node åˆ†é•œå—ç”Ÿæˆ validation:
ğŸ” [DEBUG] Context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis']
ğŸ” [DEBUG] Required inputs: ['emotions_id', 'structure_template_id', 'video_type_id']
ğŸ” [DEBUG] Checking parameter 'emotions_id': exists=True, value={'å†·é™': 74, 'åŠ±å¿—': 14, 'æ¿€æ˜‚': 12}
ğŸ” [DEBUG] Checking parameter 'structure_template_id': exists=True, value={'intro': 'ä»¥ä¸€æ®µå¿«é€Ÿå‰ªè¾‘å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªæŠ•å°„å‡ºçš„ç»šä¸½ç”»é¢ï¼ŒèƒŒæ™¯éŸ³ä¹è½»å¿«å¼•äººå…¥èƒœã€‚', 'body': 'ä¾æ¬¡é€šè¿‡åŠ¨æ€æ¼”ç¤ºçš„æ–¹å¼ä»‹ç»è¯¥æŠ•å½±ä»ªçš„ä¸‰ä¸ªä¸»è¦ç‰¹è‰²ï¼šé¦–å…ˆæ˜¾ç¤ºâ€˜4Kè¶…æ¸…â€™æ–‡å­—å åŠ äºé«˜è´¨é‡å½±åƒä¸Šï¼›æ¥ç€åˆ‡æ¢åˆ°æºå¸¦åœºæ™¯ï¼Œå¼ºè°ƒå…¶ä¾¿æºæ€§ï¼›æœ€åå±•ç¤ºç”¨æˆ·é€šè¿‡ç®€å•å£ä»¤æ“ä½œè®¾å¤‡çš„ç”»é¢ï¼Œçªå‡ºè¯­éŸ³æ§åˆ¶åŠŸèƒ½ã€‚', 'conclusion': 'æœ€åå‡ºç°å“ç‰ŒlogoåŠäº§å“åç§°ï¼Œé…ä»¥å·å¬æ€§è¯­å¥å¦‚â€˜ç«‹å³ä½“éªŒæœªæ¥è§†ç•Œâ€™ç­‰é¼“åŠ±è¡ŒåŠ¨çš„è¯æœ¯ã€‚'}
ğŸ” [DEBUG] Checking parameter 'video_type_id': exists=True, value=äº§å“å¹¿å‘Š
[ç±»å‹æ˜ å°„] 'äº§å“å¹¿å‘Š' â†’ 'äº§å“å¹¿å‘Š'
INFO:watchfiles.main:2 changes detected
INFO:llm.qwen:âœ… DashScope APIå¯†é’¥å·²è®¾ç½®: sk-a48a1d84e...
INFO:llm.qwen:âœ… DashScope APIå¯†é’¥å·²è®¾ç½®: sk-a48a1d84e...
INFO:app:âœ… VGPèŠ‚ç‚¹æ‰§è¡ŒæˆåŠŸ: shot_block_generation
INFO:app:ğŸ” Node shot_block_generation extracted outputs: ['shot_blocks_id']
INFO:app:ğŸ¯ Context keys after shot_block_generation: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id']
INFO:app:ğŸ“‹ Task 3256dedc-aed9-46dd-8aa5-5b6b52802b3d - Node 3: completed - shot_block_generationæ‰§è¡Œå®Œæˆ
INFO:app:âœ… Node shot_block_generation completed
INFO:sqlalchemy.engine.Engine:SELECT tasks.id AS tasks_id, tasks.task_id AS tasks_task_id, tasks.theme AS tasks_theme, tasks.keywords AS tasks_keywords, tasks.target_duration AS tasks_target_duration, tasks.user_description AS tasks_user_description, tasks.config AS tasks_config, tasks.priority AS tasks_priority, tasks.status AS tasks_status, tasks.progress AS tasks_progress, tasks.message AS tasks_message, tasks.result AS tasks_result, tasks.output_url AS tasks_output_url, tasks.error_message AS tasks_error_message, tasks.retry_count AS tasks_retry_count, tasks.created_at AS tasks_created_at, tasks.started_at AS tasks_started_at, tasks.completed_at AS tasks_completed_at, tasks.processing_time AS tasks_processing_time, tasks.project_id AS tasks_project_id
FROM tasks
WHERE tasks.task_id = ?
 LIMIT ? OFFSET ?
INFO:sqlalchemy.engine.Engine:[cached since 196s ago] ('3256dedc-aed9-46dd-8aa5-5b6b52802b3d', 1, 0)
INFO:sqlalchemy.engine.Engine:UPDATE tasks SET progress=?, message=? WHERE tasks.id = ?
INFO:sqlalchemy.engine.Engine:[cached since 91.18s ago] (18.75, 'æ­£åœ¨æ‰§è¡Œbgm_anchor_planning', 103)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT tasks.id, tasks.task_id, tasks.theme, tasks.keywords, tasks.target_duration, tasks.user_description, tasks.config, tasks.priority, tasks.status, tasks.progress, tasks.message, tasks.result, tasks.output_url, tasks.error_message, tasks.retry_count, tasks.created_at, tasks.started_at, tasks.completed_at, tasks.processing_time, tasks.project_id
FROM tasks
WHERE tasks.id = ?
INFO:sqlalchemy.engine.Engine:[cached since 196s ago] (103,)
INFO:app:ğŸ“‹ Task 3256dedc-aed9-46dd-8aa5-5b6b52802b3d - Node 4: processing - æ­£åœ¨æ‰§è¡Œbgm_anchor_planning
INFO:app:ğŸ¬ æ‰§è¡ŒVGPèŠ‚ç‚¹: bgm_anchor_planning - BGMé”šç‚¹è§„åˆ’
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Unknown node type: multimodal_fusion
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Unknown node type: multimodal_fusion
INFO:video_generate_protocol.vgp_data_transformer:prepare_context_for_node: node_type=bgm_anchor_planning, raw_context keys=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation']
INFO:video_generate_protocol.vgp_data_transformer:prepare_context_for_node: æœ€ç»ˆå‡†å¤‡çš„ input_data keys=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
INFO:llm.qwen:âœ… DashScope APIå¯†é’¥å·²è®¾ç½®: sk-a48a1d84e...
ğŸ” Node shot_block_generation extracted outputs: ['shot_blocks_id']
ğŸ¯ Context keys after shot_block_generation: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id']
âœ… Node 3/16 completed: shot_block_generation
2025-10-09 17:08:36,927 INFO sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.task_id AS tasks_task_id, tasks.theme AS tasks_theme, tasks.keywords AS tasks_keywords, tasks.target_duration AS tasks_target_duration, tasks.user_description AS tasks_user_description, tasks.config AS tasks_config, tasks.priority AS tasks_priority, tasks.status AS tasks_status, tasks.progress AS tasks_progress, tasks.message AS tasks_message, tasks.result AS tasks_result, tasks.output_url AS tasks_output_url, tasks.error_message AS tasks_error_message, tasks.retry_count AS tasks_retry_count, tasks.created_at AS tasks_created_at, tasks.started_at AS tasks_started_at, tasks.completed_at AS tasks_completed_at, tasks.processing_time AS tasks_processing_time, tasks.project_id AS tasks_project_id
FROM tasks
WHERE tasks.task_id = ?
 LIMIT ? OFFSET ?
2025-10-09 17:08:36,927 INFO sqlalchemy.engine.Engine [cached since 196s ago] ('3256dedc-aed9-46dd-8aa5-5b6b52802b3d', 1, 0)
2025-10-09 17:08:36,928 INFO sqlalchemy.engine.Engine UPDATE tasks SET progress=?, message=? WHERE tasks.id = ?
2025-10-09 17:08:36,928 INFO sqlalchemy.engine.Engine [cached since 91.18s ago] (18.75, 'æ­£åœ¨æ‰§è¡Œbgm_anchor_planning', 103)
2025-10-09 17:08:36,928 INFO sqlalchemy.engine.Engine COMMIT
2025-10-09 17:08:36,929 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-09 17:08:36,929 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.task_id, tasks.theme, tasks.keywords, tasks.target_duration, tasks.user_description, tasks.config, tasks.priority, tasks.status, tasks.progress, tasks.message, tasks.result, tasks.output_url, tasks.error_message, tasks.retry_count, tasks.created_at, tasks.started_at, tasks.completed_at, tasks.processing_time, tasks.project_id
FROM tasks
WHERE tasks.id = ?
2025-10-09 17:08:36,929 INFO sqlalchemy.engine.Engine [cached since 196s ago] (103,)
âš¡ æ‰§è¡Œ node 4/16: bgm_anchor_planning

ğŸ¬ [execute_node] Starting node: bgm_anchor_planning
ğŸ¬ [execute_node] Input context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation']
ğŸ¬ [execute_node] context[theme_id] = äº§å“å±•ç¤º
ğŸ¬ [execute_node] context[keywords_id] = ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
ğŸ¬ [execute_node] context[target_duration_id] = 20
ğŸ¬ [execute_node] context[user_description_id] = å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
ğŸ¬ [execute_node] Fixed context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation']

================================================================================
ğŸ” [prepare_context_for_node] node_type=bgm_anchor_planning
ğŸ” [prepare_context_for_node] raw_context keys=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation']
ğŸ” [prepare_context_for_node] input_data (before)=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ theme_id in raw_context: äº§å“å±•ç¤º
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ keywords_id in raw_context: ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ target_duration_id in raw_context: 20
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ user_description_id in raw_context: å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
ğŸ” [prepare_context_for_node] input_data (after)=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
ğŸ” [prepare_context_for_node] Final values:
    theme_id: äº§å“å±•ç¤º
    keywords_id: ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
    target_duration_id: 20
    user_description_id: å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
================================================================================

ğŸ¬ [execute_node] Prepared input keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
ğŸ¬ [execute_node] Execution context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation']
ğŸ¬ [execute_node] execution_context[theme_id] = äº§å“å±•ç¤º
ğŸ¬ [execute_node] execution_context[keywords_id] = ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
ğŸ¬ [execute_node] execution_context[target_duration_id] = 20
ğŸ¬ [execute_node] execution_context[user_description_id] = å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
ğŸ¬ [execute_node] Calling node.generate()...

ğŸ” [DEBUG] Node BGMé”šç‚¹è§„åˆ’ validation:
ğŸ” [DEBUG] Context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation']
ğŸ” [DEBUG] Required inputs: ['shot_blocks_id']
ğŸ” [DEBUG] Checking parameter 'shot_blocks_id': exists=True, value=[{'shot_type': 'ç‰¹å†™', 'duration': 5.0, 'visual_description': 'æ™ºèƒ½æŠ•å½±ä»ªçš„é•œå¤´ç¼“ç¼“å¯¹å‡†ç™½è‰²å¢™é¢ï¼ŒæŠ•å°„å‡ºä¸€æŸå…‰å¼€å§‹é€æ¸æ”¾å¤§ï¼Œç›´è‡³å……æ»¡æ•´ä¸ªç”»é¢ã€‚', 'pacing': 'æ…¢é•œå¤´', 'caption': 'å…‰å½±å¯å¹•', 'start_time': 0.0, 'end_time': 5.0}, {'shot_type': 'ä¸­æ™¯', 'duration': 6.0, 'visual_description': 'å¢™é¢ä¸Šå‡ºç°æ¸…æ™°ã€è‰²å½©é²œè‰³çš„ç”»é¢ï¼Œå±•ç¤ºç€ä¸€å¹…åŠ¨æ€çš„åŸå¸‚å¤œæ™¯å›¾ï¼Œç¯å…‰æµåŠ¨ï¼Œç»†èŠ‚ä¸°å¯Œã€‚', 'pacing': 'å¸¸è§„', 'caption': 'ç»šä¸½è§†ç•Œ', 'start_time': 5.0, 'end_time': 11.0}, {'shot_type': 'ç‰¹å†™', 'duration': 4.0, 'visual_description': 'èšç„¦äºæŠ•å½±ä»ªçš„æ§åˆ¶é¢æ¿ï¼Œæ‰‹æŒ‡è½»è§¦å±å¹•ä¸Šçš„æ’­æ”¾æŒ‰é’®ï¼Œç•Œé¢æµç•…åˆ‡æ¢è‡³ä¸‹ä¸€åœºæ™¯ã€‚', 'pacing': 'å¿«å‰ª', 'caption': 'ä¸€é”®åˆ‡æ¢', 'start_time': 11.0, 'end_time': 15.0}, {'shot_type': 'è¿‘æ™¯', 'duration': 5.0, 'visual_description': 'ä»æŠ•å½±ä»ªçš„è§’åº¦çœ‹å‘æˆ¿é—´å†…ï¼Œå¢™ä¸Šå±•ç°ç€ä¸€éƒ¨ç”µå½±çš„å¼€åœºç‰‡æ®µï¼Œå›¾åƒæ¸…æ™°åº¦æé«˜ï¼Œç»™äººèº«ä¸´å…¶å¢ƒä¹‹æ„Ÿã€‚', 'pacing': 'æ…¢é•œå¤´', 'caption': 'æ²‰æµ¸ä½“éªŒ', 'start_time': 15.0, 'end_time': 20.0}, {'shot_type': 'ç‰¹å†™', 'duration': 5.0, 'visual_description': 'æŠ•å½±ä»ªæŠ•å°„å‡ºçš„4Kè¶…æ¸…å›¾åƒï¼Œç”»é¢ç»†èŠ‚ä¸°å¯Œã€è‰²å½©é²œè‰³', 'pacing': 'æ…¢é•œå¤´', 'caption': '4Kè¶…æ¸…', 'start_time': 20.0, 'end_time': 25.0}, {'shot_type': 'ä¸­æ™¯', 'duration': 6.0, 'visual_description': 'ä¸€åªæ‰‹è½»è½»æ‹¿èµ·å°å·§è½»ä¾¿çš„æŠ•å½±ä»ªï¼Œæ”¾å…¥èƒŒåŒ…ä¸­ï¼Œå±•ç¤ºå…¶ä¾¿æºæ€§', 'pacing': 'å¸¸è§„', 'caption': 'éšèº«æºå¸¦', 'start_time': 25.0, 'end_time': 31.0}, {'shot_type': 'ç‰¹å†™', 'duration': 3.0, 'visual_description': 'æŠ•å½±ä»ªé¡¶éƒ¨çš„éº¦å…‹é£å­”ç‰¹å†™ï¼Œéšååˆ‡æ¢è‡³è®¾å¤‡å“åº”è¯­éŸ³å‘½ä»¤ï¼Œè‡ªåŠ¨è°ƒæ•´æŠ•å½±å†…å®¹', 'pacing': 'å¿«å‰ª', 'caption': 'è¯­éŸ³æ§åˆ¶', 'start_time': 31.0, 'end_time': 34.0}, {'shot_type': 'ç‰¹å†™', 'duration': 6.0, 'visual_description': 'æœ€ç»ˆæŠ•å½±ç”»é¢ç¨³å®šæ˜¾ç¤ºï¼Œç”»è´¨æ¸…æ™°é”åˆ©ï¼Œå†æ¬¡å¼ºè°ƒ4Kåˆ†è¾¨ç‡å¸¦æ¥çš„è§†è§‰äº«å—', 'pacing': 'æ…¢é•œå¤´', 'caption': 'æè‡´è§†ç•Œ', 'start_time': 34.0, 'end_time': 40.0}, {'shot_type': 'ç‰¹å†™', 'duration': 5.0, 'visual_description': 'äº§å“logoåœ¨é»‘è‰²èƒŒæ™¯ä¸­ç¼“ç¼“æ˜¾ç°ï¼Œå…‰èŠ’ä»logoä¸­å¿ƒå‘å››å‘¨æ‰©æ•£ï¼Œç…§äº®æ•´ä¸ªç”»é¢ã€‚', 'pacing': 'æ…¢é•œå¤´', 'caption': 'å“è´¨å…¸èŒƒ', 'start_time': 40.0, 'end_time': 45.0}, {'shot_type': 'ä¸­æ™¯', 'duration': 5.0, 'visual_description': 'äº§å“é™ç½®äºç®€çº¦çš„å±•ç¤ºå°ä¸Šï¼Œå‘¨å›´ç¯å¢ƒæ˜æš—ï¼Œåªæœ‰äº§å“è¢«æŸ”å’Œçš„å…‰çº¿åŒ…å›´ï¼Œæ˜¾å¾—æ ¼å¤–çªå‡ºã€‚é•œå¤´è½»å¾®æ¨è¿›ï¼Œèšç„¦äºäº§å“ä¸Šã€‚', 'pacing': 'å¸¸è§„', 'caption': 'ç»†èŠ‚è§çœŸç« ', 'start_time': 45.0, 'end_time': 50.0}, {'shot_type': 'ç‰¹å†™', 'duration': 5.0, 'visual_description': 'äº§å“çš„æŸä¸ªå…³é”®åŠŸèƒ½åŒºåŸŸï¼ˆå¦‚å±å¹•æˆ–æŒ‰é’®ï¼‰è½»è½»äº®èµ·ï¼Œæ˜¾ç¤ºç€å“ç‰Œåç§°å’Œäº§å“å‹å·ï¼Œå­—ä½“ä¼˜é›…ä¸”æ¸…æ™°å¯è§ã€‚', 'pacing': 'æ…¢é•œå¤´', 'caption': 'ç«‹å³ä½“éªŒæœªæ¥è§†ç•Œ', 'start_time': 50.0, 'end_time': 55.0}, {'shot_type': 'å®šæ ¼', 'duration': 5.0, 'visual_description': 'æœ€ç»ˆå®šæ ¼åœ¨å®Œæ•´çš„äº§å“å½¢è±¡ä¸Šï¼Œå“ç‰Œlogoä¸äº§å“åç§°ä¸€åŒå‡ºç°åœ¨ç”»é¢ä¸‹æ–¹ï¼Œç®€æ´æœ‰åŠ›ã€‚', 'pacing': 'å®šæ ¼', 'caption': 'å¼€å¯æ‚¨çš„ä¸“å±æ—…ç¨‹', 'start_time': 55.0, 'end_time': 60.0}]
INFO:watchfiles.main:2 changes detected
INFO:llm.qwen:âœ… DashScope APIå¯†é’¥å·²è®¾ç½®: sk-a48a1d84e...
INFO:llm.qwen:âœ… DashScope APIå¯†é’¥å·²è®¾ç½®: sk-a48a1d84e...
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'bgm_anchors' for bgm_anchor_planning, using default
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'bgm_timeline' for bgm_anchor_planning, using default
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'bgm_segments' for bgm_anchor_planning, using default
INFO:app:âœ… VGPèŠ‚ç‚¹æ‰§è¡ŒæˆåŠŸ: bgm_anchor_planning
INFO:app:ğŸ” Node bgm_anchor_planning extracted outputs: ['bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id']
INFO:app:ğŸ¯ Context keys after bgm_anchor_planning: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id']
INFO:app:ğŸ“‹ Task 3256dedc-aed9-46dd-8aa5-5b6b52802b3d - Node 4: completed - bgm_anchor_planningæ‰§è¡Œå®Œæˆ
INFO:app:âœ… Node bgm_anchor_planning completed
INFO:sqlalchemy.engine.Engine:SELECT tasks.id AS tasks_id, tasks.task_id AS tasks_task_id, tasks.theme AS tasks_theme, tasks.keywords AS tasks_keywords, tasks.target_duration AS tasks_target_duration, tasks.user_description AS tasks_user_description, tasks.config AS tasks_config, tasks.priority AS tasks_priority, tasks.status AS tasks_status, tasks.progress AS tasks_progress, tasks.message AS tasks_message, tasks.result AS tasks_result, tasks.output_url AS tasks_output_url, tasks.error_message AS tasks_error_message, tasks.retry_count AS tasks_retry_count, tasks.created_at AS tasks_created_at, tasks.started_at AS tasks_started_at, tasks.completed_at AS tasks_completed_at, tasks.processing_time AS tasks_processing_time, tasks.project_id AS tasks_project_id
FROM tasks
WHERE tasks.task_id = ?
 LIMIT ? OFFSET ?
INFO:sqlalchemy.engine.Engine:[cached since 411.3s ago] ('3256dedc-aed9-46dd-8aa5-5b6b52802b3d', 1, 0)
INFO:sqlalchemy.engine.Engine:UPDATE tasks SET progress=?, message=? WHERE tasks.id = ?
INFO:sqlalchemy.engine.Engine:[cached since 306.5s ago] (25.0, 'æ­£åœ¨æ‰§è¡Œbgm_composition', 103)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT tasks.id, tasks.task_id, tasks.theme, tasks.keywords, tasks.target_duration, tasks.user_description, tasks.config, tasks.priority, tasks.status, tasks.progress, tasks.message, tasks.result, tasks.output_url, tasks.error_message, tasks.retry_count, tasks.created_at, tasks.started_at, tasks.completed_at, tasks.processing_time, tasks.project_id
FROM tasks
WHERE tasks.id = ?
INFO:sqlalchemy.engine.Engine:[cached since 411.3s ago] (103,)
INFO:app:ğŸ“‹ Task 3256dedc-aed9-46dd-8aa5-5b6b52802b3d - Node 5: processing - æ­£åœ¨æ‰§è¡Œbgm_composition
INFO:app:ğŸ¬ æ‰§è¡ŒVGPèŠ‚ç‚¹: bgm_composition - BGMåˆæˆæŸ¥æ‰¾
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Unknown node type: multimodal_fusion
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Unknown node type: multimodal_fusion
INFO:video_generate_protocol.vgp_data_transformer:prepare_context_for_node: node_type=bgm_composition, raw_context keys=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning']
INFO:video_generate_protocol.vgp_data_transformer:prepare_context_for_node: æœ€ç»ˆå‡†å¤‡çš„ input_data keys=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'bgm_composition_id' for bgm_composition, using default
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'bgm_file_path' for bgm_composition, using default
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'bgm_duration' for bgm_composition, using default
INFO:app:âœ… VGPèŠ‚ç‚¹æ‰§è¡ŒæˆåŠŸ: bgm_composition
INFO:app:ğŸ” Node bgm_composition extracted outputs: ['bgm_composition_id', 'track_id']
INFO:app:ğŸ¯ Context keys after bgm_composition: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id']
INFO:app:ğŸ“‹ Task 3256dedc-aed9-46dd-8aa5-5b6b52802b3d - Node 5: completed - bgm_compositionæ‰§è¡Œå®Œæˆ
INFO:app:âœ… Node bgm_composition completed
INFO:sqlalchemy.engine.Engine:SELECT tasks.id AS tasks_id, tasks.task_id AS tasks_task_id, tasks.theme AS tasks_theme, tasks.keywords AS tasks_keywords, tasks.target_duration AS tasks_target_duration, tasks.user_description AS tasks_user_description, tasks.config AS tasks_config, tasks.priority AS tasks_priority, tasks.status AS tasks_status, tasks.progress AS tasks_progress, tasks.message AS tasks_message, tasks.result AS tasks_result, tasks.output_url AS tasks_output_url, tasks.error_message AS tasks_error_message, tasks.retry_count AS tasks_retry_count, tasks.created_at AS tasks_created_at, tasks.started_at AS tasks_started_at, tasks.completed_at AS tasks_completed_at, tasks.processing_time AS tasks_processing_time, tasks.project_id AS tasks_project_id
FROM tasks
WHERE tasks.task_id = ?
 LIMIT ? OFFSET ?
INFO:sqlalchemy.engine.Engine:[cached since 411.3s ago] ('3256dedc-aed9-46dd-8aa5-5b6b52802b3d', 1, 0)
INFO:sqlalchemy.engine.Engine:UPDATE tasks SET progress=?, message=? WHERE tasks.id = ?
INFO:sqlalchemy.engine.Engine:[cached since 306.5s ago] (31.25, 'æ­£åœ¨æ‰§è¡Œasset_request', 103)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT tasks.id, tasks.task_id, tasks.theme, tasks.keywords, tasks.target_duration, tasks.user_description, tasks.config, tasks.priority, tasks.status, tasks.progress, tasks.message, tasks.result, tasks.output_url, tasks.error_message, tasks.retry_count, tasks.created_at, tasks.started_at, tasks.completed_at, tasks.processing_time, tasks.project_id
FROM tasks
WHERE tasks.id = ?
INFO:sqlalchemy.engine.Engine:[cached since 411.3s ago] (103,)
INFO:app:ğŸ“‹ Task 3256dedc-aed9-46dd-8aa5-5b6b52802b3d - Node 6: processing - æ­£åœ¨æ‰§è¡Œasset_request
INFO:app:ğŸ¬ æ‰§è¡ŒVGPèŠ‚ç‚¹: asset_request - ç´ æéœ€æ±‚è§£æ
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Unknown node type: multimodal_fusion
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Unknown node type: multimodal_fusion
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing dependency field 'shot_blocks' from shot_block_generation for asset_request
INFO:video_generate_protocol.vgp_data_transformer:prepare_context_for_node: node_type=asset_request, raw_context keys=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition']
INFO:video_generate_protocol.vgp_data_transformer:prepare_context_for_node: æœ€ç»ˆå‡†å¤‡çš„ input_data keys=['scheduled_shots', 'shot_blocks', 'theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'assets' for asset_request, using default
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'asset_timeline' for asset_request, using default
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'asset_count' for asset_request, using default
INFO:app:âœ… VGPèŠ‚ç‚¹æ‰§è¡ŒæˆåŠŸ: asset_request
INFO:app:ğŸ” Node asset_request extracted outputs: ['preliminary_sequence_id', 'total_main_duration_id']
INFO:app:ğŸ¯ Context keys after asset_request: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id']
INFO:app:ğŸ“‹ Task 3256dedc-aed9-46dd-8aa5-5b6b52802b3d - Node 6: completed - asset_requestæ‰§è¡Œå®Œæˆ
INFO:app:âœ… Node asset_request completed
INFO:sqlalchemy.engine.Engine:SELECT tasks.id AS tasks_id, tasks.task_id AS tasks_task_id, tasks.theme AS tasks_theme, tasks.keywords AS tasks_keywords, tasks.target_duration AS tasks_target_duration, tasks.user_description AS tasks_user_description, tasks.config AS tasks_config, tasks.priority AS tasks_priority, tasks.status AS tasks_status, tasks.progress AS tasks_progress, tasks.message AS tasks_message, tasks.result AS tasks_result, tasks.output_url AS tasks_output_url, tasks.error_message AS tasks_error_message, tasks.retry_count AS tasks_retry_count, tasks.created_at AS tasks_created_at, tasks.started_at AS tasks_started_at, tasks.completed_at AS tasks_completed_at, tasks.processing_time AS tasks_processing_time, tasks.project_id AS tasks_project_id
FROM tasks
WHERE tasks.task_id = ?
 LIMIT ? OFFSET ?
INFO:sqlalchemy.engine.Engine:[cached since 411.3s ago] ('3256dedc-aed9-46dd-8aa5-5b6b52802b3d', 1, 0)
INFO:sqlalchemy.engine.Engine:UPDATE tasks SET progress=?, message=? WHERE tasks.id = ?
INFO:sqlalchemy.engine.Engine:[cached since 306.5s ago] (37.5, 'æ­£åœ¨æ‰§è¡Œaudio_processing', 103)
INFO:sqlalchemy.engine.Engine:COMMIT
ğŸ” Node bgm_anchor_planning extracted outputs: ['bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id']
ğŸ¯ Context keys after bgm_anchor_planning: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id']
âœ… Node 4/16 completed: bgm_anchor_planning
2025-10-09 17:12:12,228 INFO sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.task_id AS tasks_task_id, tasks.theme AS tasks_theme, tasks.keywords AS tasks_keywords, tasks.target_duration AS tasks_target_duration, tasks.user_description AS tasks_user_description, tasks.config AS tasks_config, tasks.priority AS tasks_priority, tasks.status AS tasks_status, tasks.progress AS tasks_progress, tasks.message AS tasks_message, tasks.result AS tasks_result, tasks.output_url AS tasks_output_url, tasks.error_message AS tasks_error_message, tasks.retry_count AS tasks_retry_count, tasks.created_at AS tasks_created_at, tasks.started_at AS tasks_started_at, tasks.completed_at AS tasks_completed_at, tasks.processing_time AS tasks_processing_time, tasks.project_id AS tasks_project_id
FROM tasks
WHERE tasks.task_id = ?
 LIMIT ? OFFSET ?
2025-10-09 17:12:12,228 INFO sqlalchemy.engine.Engine [cached since 411.3s ago] ('3256dedc-aed9-46dd-8aa5-5b6b52802b3d', 1, 0)
2025-10-09 17:12:12,230 INFO sqlalchemy.engine.Engine UPDATE tasks SET progress=?, message=? WHERE tasks.id = ?
2025-10-09 17:12:12,230 INFO sqlalchemy.engine.Engine [cached since 306.5s ago] (25.0, 'æ­£åœ¨æ‰§è¡Œbgm_composition', 103)
2025-10-09 17:12:12,231 INFO sqlalchemy.engine.Engine COMMIT
2025-10-09 17:12:12,232 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-09 17:12:12,233 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.task_id, tasks.theme, tasks.keywords, tasks.target_duration, tasks.user_description, tasks.config, tasks.priority, tasks.status, tasks.progress, tasks.message, tasks.result, tasks.output_url, tasks.error_message, tasks.retry_count, tasks.created_at, tasks.started_at, tasks.completed_at, tasks.processing_time, tasks.project_id
FROM tasks
WHERE tasks.id = ?
2025-10-09 17:12:12,233 INFO sqlalchemy.engine.Engine [cached since 411.3s ago] (103,)
âš¡ æ‰§è¡Œ node 5/16: bgm_composition

ğŸ¬ [execute_node] Starting node: bgm_composition
ğŸ¬ [execute_node] Input context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning']
ğŸ¬ [execute_node] context[theme_id] = äº§å“å±•ç¤º
ğŸ¬ [execute_node] context[keywords_id] = ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
ğŸ¬ [execute_node] context[target_duration_id] = 20
ğŸ¬ [execute_node] context[user_description_id] = å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
ğŸ¬ [execute_node] Fixed context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning']

================================================================================
ğŸ” [prepare_context_for_node] node_type=bgm_composition
ğŸ” [prepare_context_for_node] raw_context keys=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning']
ğŸ” [prepare_context_for_node] input_data (before)=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ theme_id in raw_context: äº§å“å±•ç¤º
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ keywords_id in raw_context: ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ target_duration_id in raw_context: 20
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ user_description_id in raw_context: å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
ğŸ” [prepare_context_for_node] input_data (after)=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
ğŸ” [prepare_context_for_node] Final values:
    theme_id: äº§å“å±•ç¤º
    keywords_id: ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
    target_duration_id: 20
    user_description_id: å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
================================================================================

ğŸ¬ [execute_node] Prepared input keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
ğŸ¬ [execute_node] Execution context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning']
ğŸ¬ [execute_node] execution_context[theme_id] = äº§å“å±•ç¤º
ğŸ¬ [execute_node] execution_context[keywords_id] = ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
ğŸ¬ [execute_node] execution_context[target_duration_id] = 20
ğŸ¬ [execute_node] execution_context[user_description_id] = å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
ğŸ¬ [execute_node] Calling node.generate()...

ğŸ” [DEBUG] Node BGMåˆæˆæŸ¥æ‰¾ validation:
ğŸ” [DEBUG] Context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning']
ğŸ” [DEBUG] Required inputs: ['bgm_tracks_id', 'narrative_arc_id']
ğŸ” [DEBUG] Checking parameter 'bgm_tracks_id': exists=True, value=[{'start_time': 0.0, 'end_time': 5.0, 'mood': 'å†·é™', 'genre': 'æç®€ç”µå­ / Lo-fi', 'bpm': 85, 'instruments': ['åˆæˆè´æ–¯', 'èŠ‚æ‹å™¨', 'ç¯å¢ƒç™½å™ª'], 'transition': 'æ·¡å…¥', 'narrative_role': 'ä¸ºè§†é¢‘å¼€åœºåˆ›é€ ä¸€ç§ç¥ç§˜è€ŒæœŸå¾…çš„æ°›å›´', 'segment_index': 0, 'recommended_track': {'title': 'Weightless', 'artist': 'Marconi Union', 'reason': 'è¿™é¦–æ›²å­ä»¥å…¶æ”¾æ¾å’Œå¹³é™çš„æ•ˆæœé—»åï¼Œéå¸¸é€‚åˆè¥é€ ç¥ç§˜è€ŒæœŸå¾…çš„æ°›å›´ã€‚'}}, {'start_time': 5.0, 'end_time': 11.0, 'mood': 'æ¸©é¦¨', 'genre': 'è½»éŸ³ä¹ / é’¢ç´æ›²', 'bpm': 70, 'instruments': ['é’¢ç´', 'æœ¨å‰ä»–', 'å¼¦ä¹'], 'transition': 'æ¸å¼º', 'narrative_role': 'éšç€ç”»é¢é€æ¸æ¸…æ™°ï¼Œå¸¦æ¥æ¸©æš–èˆ’é€‚çš„æ„Ÿè§‰', 'segment_index': 1, 'recommended_track': {'title': 'River Flows in You', 'artist': 'Yiruma', 'reason': 'æ¸©æŸ”é’¢ç´å¥‘åˆæ¸©é¦¨æƒ…ç»ªï¼Œéå¸¸é€‚åˆç”¨æ¥è¡¨è¾¾æ¸©æš–å’Œèˆ’é€‚æ„Ÿã€‚'}}, {'start_time': 11.0, 'end_time': 15.0, 'mood': 'åŠ±å¿—', 'genre': 'åŠ±å¿—æµè¡Œ', 'bpm': 100, 'instruments': ['é¼“ç‚¹', 'ç”µå‰ä»–', 'äººå£°å’Œå£°'], 'transition': 'çªå˜', 'narrative_role': 'é€šè¿‡å¿«é€Ÿåˆ‡æ¢å¼ºè°ƒäº§å“çš„ä¾¿æ·æ€§ä¸ç§‘æŠ€æ„Ÿ', 'segment_index': 2, 'recommended_track': {'title': 'Rise Up', 'artist': 'Andra Day', 'reason': 'è¿™é¦–æ­Œå……æ»¡äº†åŠ›é‡å’Œé¼“èˆäººå¿ƒçš„ä¿¡æ¯ï¼Œé€‚åˆä¼ è¾¾åŠ±å¿—å’Œç§¯æå‘ä¸Šçš„æ„Ÿè§‰ã€‚'}}, {'start_time': 15.0, 'end_time': 20.0, 'mood': 'æ„ŸåŠ¨', 'genre': 'æŠ’æƒ…å¼¦ä¹', 'bpm': 80, 'instruments': ['å¤§æç´', 'å°æç´', 'é’¢ç´'], 'transition': 'äº¤å‰æ·¡åŒ–', 'narrative_role': 'åŠ æ·±è§‚ä¼—å¯¹æ²‰æµ¸å¼è§‚å½±ä½“éªŒçš„æƒ…æ„Ÿå…±é¸£', 'segment_index': 3, 'recommended_track': {'title': 'Adagio for Strings', 'artist': 'Samuel Barber', 'reason': 'è¿™æ˜¯ä¸€é¦–éå¸¸æ„Ÿäººä¸”å¯Œæœ‰è¡¨ç°åŠ›çš„ä½œå“ï¼Œèƒ½å¤Ÿæ·±åˆ»åœ°è§¦åŠ¨å¬ä¼—çš„å¿ƒçµã€‚'}}, {'start_time': 20.0, 'end_time': 25.0, 'mood': 'æ¿€æ˜‚', 'genre': 'å²è¯—äº¤å“ä¹', 'bpm': 140, 'instruments': ['é¼“ç»„', 'é“œç®¡', 'å¼¦ä¹ç¾¤'], 'transition': 'æ¸å¼º', 'narrative_role': 'çªå‡º4Kè¶…æ¸…ç”»è´¨å¸¦æ¥çš„éœ‡æ’¼æ•ˆæœ', 'segment_index': 4, 'recommended_track': {'title': 'Palladio', 'artist': 'Karl Jenkins', 'reason': 'è¿™éƒ¨ä½œå“å……æ»¡èƒ½é‡å’ŒåŠ¨æ€å˜åŒ–ï¼Œéå¸¸é€‚åˆç”¨æ¥å¼ºè°ƒè§†è§‰å†²å‡»åŠ›ã€‚'}}, {'start_time': 25.0, 'end_time': 31.0, 'mood': 'è½»æ¾', 'genre': 'æç®€ç”µå­ / Lo-fi', 'bpm': 85, 'instruments': ['åˆæˆè´æ–¯', 'èŠ‚æ‹å™¨', 'ç¯å¢ƒç™½å™ª'], 'transition': 'æ·¡å…¥', 'narrative_role': 'å±•ç¤ºäº§å“ä¾¿æºç‰¹æ€§æ—¶è¥é€ è½»æ¾æ„‰å¿«çš„å¿ƒæƒ…', 'segment_index': 5, 'recommended_track': {'title': 'Flim', 'artist': 'Aphex Twin', 'reason': 'è¿™é¦–æ›²å­å…·æœ‰è½»æ¾æ„‰æ‚¦çš„æ—‹å¾‹ï¼ŒåŒæ—¶ä¿æŒäº†Lo-fié£æ ¼çš„ç‰¹ç‚¹ï¼Œå¾ˆé€‚åˆè¿™ä¸ªåœºæ™¯ã€‚'}}, {'start_time': 31.0, 'end_time': 34.0, 'mood': 'å¹½é»˜', 'genre': 'è½»å¿«ç”µå­ / ææ€ªéŸ³æ•ˆ', 'bpm': 115, 'instruments': ['åˆæˆå™¨', 'å¡é€šéŸ³æ•ˆ', 'æ‰“å‡»ä¹'], 'transition': 'çªå˜', 'narrative_role': 'ä»¥æ´»æ³¼çš„æ–¹å¼ä»‹ç»è¯­éŸ³æ§åˆ¶åŠŸèƒ½', 'segment_index': 6, 'recommended_track': {'title': 'The Pink Panther Theme', 'artist': 'Henry Mancini', 'reason': 'è¿™æ®µç»å…¸çš„ä¸»é¢˜æ›²å¸¦æœ‰è½»æ¾å¹½é»˜çš„æ°”æ°›ï¼Œéå¸¸é€‚åˆç”¨æ¥å¢åŠ è¶£å‘³æ€§ã€‚'}}, {'start_time': 34.0, 'end_time': 40.0, 'mood': 'æ¿€æ˜‚', 'genre': 'å²è¯—äº¤å“ä¹', 'bpm': 140, 'instruments': ['é¼“ç»„', 'é“œç®¡', 'å¼¦ä¹ç¾¤'], 'transition': 'æ¸å¼º', 'narrative_role': 'å†æ¬¡å¼ºè°ƒæè‡´è§†ç•Œå¸¦æ¥çš„è§†è§‰äº«å—', 'segment_index': 7, 'recommended_track': {'title': 'O Fortuna (from Carmina Burana)', 'artist': 'Carl Orff', 'reason': 'è¿™é¦–æ›²å­ä»¥å…¶å¼ºçƒˆçš„èŠ‚å¥å’Œæˆå‰§æ€§çš„æ•ˆæœè‘—ç§°ï¼Œéå¸¸é€‚åˆç”¨æ¥å¼ºåŒ–è§†è§‰å†²å‡»åŠ›ã€‚'}}, {'start_time': 40.0, 'end_time': 45.0, 'mood': 'åº„ä¸¥', 'genre': 'æç®€ç”µå­ / Lo-fi', 'bpm': 85, 'instruments': ['åˆæˆè´æ–¯', 'èŠ‚æ‹å™¨', 'ç¯å¢ƒç™½å™ª'], 'transition': 'æ·¡å…¥', 'narrative_role': 'å¼ºåŒ–å“ç‰Œä½œä¸ºå“è´¨å…¸èŒƒçš„å½¢è±¡', 'segment_index': 8, 'recommended_track': {'title': 'Nude', 'artist': 'Radiohead', 'reason': 'è™½ç„¶åŸç‰ˆä¸æ˜¯Lo-fié£æ ¼ï¼Œä½†å…¶å®é™è€Œæ·±æ²‰çš„æ°›å›´å¯ä»¥å¾ˆå¥½åœ°é€‚åº”æ­¤åœºæ™¯ï¼Œå¹¶ä¼ è¾¾å‡ºä¸€ç§åº„é‡æ„Ÿã€‚'}}, {'start_time': 45.0, 'end_time': 50.0, 'mood': 'å†·é™', 'genre': 'æç®€ç”µå­ / Lo-fi', 'bpm': 85, 'instruments': ['åˆæˆè´æ–¯', 'èŠ‚æ‹å™¨', 'ç¯å¢ƒç™½å™ª'], 'transition': 'äº¤å‰æ·¡åŒ–', 'narrative_role': 'é€šè¿‡æŸ”å’Œå…‰çº¿åŒ…å›´çš„äº§å“å½¢è±¡ä¼ è¾¾ä¸“ä¸šä¸ç²¾è‡´', 'segment_index': 9, 'recommended_track': {'title': 'Clair de Lune', 'artist': 'Claude Debussy', 'reason': 'å°½ç®¡å®ƒæ›´åå‘äºå¤å…¸éŸ³ä¹ï¼Œä½†å®ƒçš„å¹³å’Œæ—‹å¾‹æœ‰åŠ©äºåˆ›å»ºä¸€ä¸ªå®‰é™ã€ä¸“ä¸šçš„æ°›å›´ã€‚'}}, {'start_time': 50.0, 'end_time': 55.0, 'mood': 'æ¿€åŠ±', 'genre': 'æç®€ç”µå­ / Lo-fi', 'bpm': 85, 'instruments': ['åˆæˆè´æ–¯', 'èŠ‚æ‹å™¨', 'ç¯å¢ƒç™½å™ª'], 'transition': 'æ¸å¼º', 'narrative_role': 'æ¿€å‘è§‚ä¼—å¯¹æœªæ¥è§†ç•Œçš„æ¢ç´¢æ¬²æœ›', 'segment_index': 10, 'recommended_track': {'title': 'Ambient 1: Music for Airports', 'artist': 'Brian Eno', 'reason': 'å°½ç®¡è¿™æ˜¯ä¸€é¦–éå¸¸å¹³é™çš„æ›²å­ï¼Œä½†å®ƒä¹Ÿæœ‰ä¸€ç§å‘å‰æ¨è¿›çš„æ„Ÿè§‰ï¼Œé€‚åˆç”¨äºæ¿€åŠ±äººä»¬å±•æœ›æœªæ¥ã€‚'}}, {'start_time': 55.0, 'end_time': 60.0, 'mood': 'å¹³é™', 'genre': 'æç®€ç”µå­ / Lo-fi', 'bpm': 85, 'instruments': ['åˆæˆè´æ–¯', 'èŠ‚æ‹å™¨', 'ç¯å¢ƒç™½å™ª'], 'transition': 'æ·¡å‡º', 'narrative_role': 'ä»¥ç®€æ´æœ‰åŠ›çš„æ–¹å¼ç»“æŸè§†é¢‘ï¼Œç•™ç»™è§‚ä¼—æ·±åˆ»å°è±¡', 'segment_index': 11, 'recommended_track': {'title': 'Meditation', 'artist': 'JÃ³hann JÃ³hannsson', 'reason': 'è¿™é¦–æ›²å­æä¾›äº†æ·±åˆ»çš„åæ€ç©ºé—´ï¼Œå…¶ç®€çº¦ä¹‹ç¾å¯ä»¥å¸®åŠ©è§†é¢‘ä»¥ä¼˜é›…çš„æ–¹å¼ç»“æŸã€‚'}}]
ğŸ” [DEBUG] Checking parameter 'narrative_arc_id': exists=True, value=æ ¹æ®æä¾›çš„å­—å¹•åºåˆ—æ¥çœ‹ï¼Œè¿™æ®µè§†é¢‘ä¼¼ä¹æ˜¯åœ¨ä»‹ç»ä¸€æ¬¾äº§å“ï¼ˆå¯èƒ½æ˜¯æŸç§ä¾¿æºå¼çš„é«˜æ¸…æ˜¾ç¤ºè®¾å¤‡æˆ–æ™ºèƒ½ç”µè§†ï¼‰ï¼Œé€šè¿‡å¼ºè°ƒå…¶ç‰¹ç‚¹å¦‚â€œ4Kè¶…æ¸…â€ã€â€œè¯­éŸ³æ§åˆ¶â€ç­‰æ¥å¸å¼•è§‚ä¼—ã€‚ä»å­—å¹•å†…å®¹åˆ†æï¼Œå®ƒå¹¶æ²¡æœ‰æ˜æ˜¾åœ°éµå¾ªâ€œèµ·æ‰¿è½¬åˆâ€ã€â€œé—®é¢˜-è§£å†³â€ã€â€œè‹±é›„ä¹‹æ—…â€çš„ç»“æ„æ¨¡å¼ï¼›ä¹Ÿæ²¡æœ‰è¡¨ç°å‡ºå…¸å‹çš„çº¿æ€§å™è¿°ç‰¹å¾ï¼Œæ¯”å¦‚æŒ‰ç…§æ—¶é—´é¡ºåºè®²è¿°ä¸€ä¸ªæ•…äº‹ã€‚ç›¸åï¼Œè¿™äº›å¥å­æ›´å¤šæ˜¯åœ¨é€æ­¥åŠ æ·±å¯¹äº§å“çš„æè¿°ï¼Œä»åŸºç¡€åŠŸèƒ½åˆ°ç”¨æˆ·ä½“éªŒå†åˆ°é‚€è¯·ç”¨æˆ·å°è¯•ï¼Œç»™äººä¸€ç§æƒ…ç»ªé€æ¸é«˜æ¶¨çš„æ„Ÿè§‰ã€‚

å› æ­¤ï¼Œè¿™æ®µè§†é¢‘çš„å™äº‹ç»“æ„æ›´ç¬¦åˆ**æƒ…æ„Ÿé€’è¿›**ç±»å‹ï¼Œå³é€šè¿‡ä¸€ç³»åˆ—æ­£é¢ç§¯æçš„ä¿¡æ¯ç‚¹å±‚å±‚æ¨è¿›ï¼Œæ—¨åœ¨æ¿€å‘è§‚çœ‹è€…å¯¹äºè¯¥äº§å“çš„å…´è¶£ä¸å¥½æ„Ÿï¼Œå¹¶æœ€ç»ˆä¿ƒä½¿ä»–ä»¬é‡‡å–è¡ŒåŠ¨â€”â€”ä½“éªŒè¿™æ¬¾äº§å“ã€‚
ğŸ” Node bgm_composition extracted outputs: ['bgm_composition_id', 'track_id']
ğŸ¯ Context keys after bgm_composition: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id']
âœ… Node 5/16 completed: bgm_composition
2025-10-09 17:12:12,235 INFO sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.task_id AS tasks_task_id, tasks.theme AS tasks_theme, tasks.keywords AS tasks_keywords, tasks.target_duration AS tasks_target_duration, tasks.user_description AS tasks_user_description, tasks.config AS tasks_config, tasks.priority AS tasks_priority, tasks.status AS tasks_status, tasks.progress AS tasks_progress, tasks.message AS tasks_message, tasks.result AS tasks_result, tasks.output_url AS tasks_output_url, tasks.error_message AS tasks_error_message, tasks.retry_count AS tasks_retry_count, tasks.created_at AS tasks_created_at, tasks.started_at AS tasks_started_at, tasks.completed_at AS tasks_completed_at, tasks.processing_time AS tasks_processing_time, tasks.project_id AS tasks_project_id
FROM tasks
WHERE tasks.task_id = ?
 LIMIT ? OFFSET ?
2025-10-09 17:12:12,235 INFO sqlalchemy.engine.Engine [cached since 411.3s ago] ('3256dedc-aed9-46dd-8aa5-5b6b52802b3d', 1, 0)
2025-10-09 17:12:12,236 INFO sqlalchemy.engine.Engine UPDATE tasks SET progress=?, message=? WHERE tasks.id = ?
2025-10-09 17:12:12,236 INFO sqlalchemy.engine.Engine [cached since 306.5s ago] (31.25, 'æ­£åœ¨æ‰§è¡Œasset_request', 103)
2025-10-09 17:12:12,236 INFO sqlalchemy.engine.Engine COMMIT
2025-10-09 17:12:12,237 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-09 17:12:12,237 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.task_id, tasks.theme, tasks.keywords, tasks.target_duration, tasks.user_description, tasks.config, tasks.priority, tasks.status, tasks.progress, tasks.message, tasks.result, tasks.output_url, tasks.error_message, tasks.retry_count, tasks.created_at, tasks.started_at, tasks.completed_at, tasks.processing_time, tasks.project_id
FROM tasks
WHERE tasks.id = ?
2025-10-09 17:12:12,237 INFO sqlalchemy.engine.Engine [cached since 411.3s ago] (103,)
âš¡ æ‰§è¡Œ node 6/16: asset_request

ğŸ¬ [execute_node] Starting node: asset_request
ğŸ¬ [execute_node] Input context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition']
ğŸ¬ [execute_node] context[theme_id] = äº§å“å±•ç¤º
ğŸ¬ [execute_node] context[keywords_id] = ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
ğŸ¬ [execute_node] context[target_duration_id] = 20
ğŸ¬ [execute_node] context[user_description_id] = å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
ğŸ¬ [execute_node] Fixed context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition']

================================================================================
ğŸ” [prepare_context_for_node] node_type=asset_request
ğŸ” [prepare_context_for_node] raw_context keys=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition']
ğŸ” [prepare_context_for_node] input_data (before)=['scheduled_shots', 'shot_blocks', 'theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ theme_id in raw_context: äº§å“å±•ç¤º
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ keywords_id in raw_context: ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ target_duration_id in raw_context: 20
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ user_description_id in raw_context: å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
ğŸ” [prepare_context_for_node] input_data (after)=['scheduled_shots', 'shot_blocks', 'theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
ğŸ” [prepare_context_for_node] Final values:
    theme_id: äº§å“å±•ç¤º
    keywords_id: ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
    target_duration_id: 20
    user_description_id: å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
================================================================================

ğŸ¬ [execute_node] Prepared input keys: ['scheduled_shots', 'shot_blocks', 'theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
ğŸ¬ [execute_node] Execution context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'scheduled_shots', 'shot_blocks']
ğŸ¬ [execute_node] execution_context[theme_id] = äº§å“å±•ç¤º
ğŸ¬ [execute_node] execution_context[keywords_id] = ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
ğŸ¬ [execute_node] execution_context[target_duration_id] = 20
ğŸ¬ [execute_node] execution_context[user_description_id] = å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
ğŸ¬ [execute_node] Calling node.generate()...

ğŸ” [DEBUG] Node ç´ æéœ€æ±‚è§£æ validation:
ğŸ” [DEBUG] Context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'scheduled_shots', 'shot_blocks']
ğŸ” [DEBUG] Required inputs: ['shot_blocks_id', 'user_description_id', 'tts_text_id', 'video_description_id']
ğŸ” [DEBUG] Checking parameter 'shot_blocks_id': exists=True, value=[{'shot_type': 'ç‰¹å†™', 'duration': 5.0, 'visual_description': 'æ™ºèƒ½æŠ•å½±ä»ªçš„é•œå¤´ç¼“ç¼“å¯¹å‡†ç™½è‰²å¢™é¢ï¼ŒæŠ•å°„å‡ºä¸€æŸå…‰å¼€å§‹é€æ¸æ”¾å¤§ï¼Œç›´è‡³å……æ»¡æ•´ä¸ªç”»é¢ã€‚', 'pacing': 'æ…¢é•œå¤´', 'caption': 'å…‰å½±å¯å¹•', 'start_time': 0.0, 'end_time': 5.0}, {'shot_type': 'ä¸­æ™¯', 'duration': 6.0, 'visual_description': 'å¢™é¢ä¸Šå‡ºç°æ¸…æ™°ã€è‰²å½©é²œè‰³çš„ç”»é¢ï¼Œå±•ç¤ºç€ä¸€å¹…åŠ¨æ€çš„åŸå¸‚å¤œæ™¯å›¾ï¼Œç¯å…‰æµåŠ¨ï¼Œç»†èŠ‚ä¸°å¯Œã€‚', 'pacing': 'å¸¸è§„', 'caption': 'ç»šä¸½è§†ç•Œ', 'start_time': 5.0, 'end_time': 11.0}, {'shot_type': 'ç‰¹å†™', 'duration': 4.0, 'visual_description': 'èšç„¦äºæŠ•å½±ä»ªçš„æ§åˆ¶é¢æ¿ï¼Œæ‰‹æŒ‡è½»è§¦å±å¹•ä¸Šçš„æ’­æ”¾æŒ‰é’®ï¼Œç•Œé¢æµç•…åˆ‡æ¢è‡³ä¸‹ä¸€åœºæ™¯ã€‚', 'pacing': 'å¿«å‰ª', 'caption': 'ä¸€é”®åˆ‡æ¢', 'start_time': 11.0, 'end_time': 15.0}, {'shot_type': 'è¿‘æ™¯', 'duration': 5.0, 'visual_description': 'ä»æŠ•å½±ä»ªçš„è§’åº¦çœ‹å‘æˆ¿é—´å†…ï¼Œå¢™ä¸Šå±•ç°ç€ä¸€éƒ¨ç”µå½±çš„å¼€åœºç‰‡æ®µï¼Œå›¾åƒæ¸…æ™°åº¦æé«˜ï¼Œç»™äººèº«ä¸´å…¶å¢ƒä¹‹æ„Ÿã€‚', 'pacing': 'æ…¢é•œå¤´', 'caption': 'æ²‰æµ¸ä½“éªŒ', 'start_time': 15.0, 'end_time': 20.0}, {'shot_type': 'ç‰¹å†™', 'duration': 5.0, 'visual_description': 'æŠ•å½±ä»ªæŠ•å°„å‡ºçš„4Kè¶…æ¸…å›¾åƒï¼Œç”»é¢ç»†èŠ‚ä¸°å¯Œã€è‰²å½©é²œè‰³', 'pacing': 'æ…¢é•œå¤´', 'caption': '4Kè¶…æ¸…', 'start_time': 20.0, 'end_time': 25.0}, {'shot_type': 'ä¸­æ™¯', 'duration': 6.0, 'visual_description': 'ä¸€åªæ‰‹è½»è½»æ‹¿èµ·å°å·§è½»ä¾¿çš„æŠ•å½±ä»ªï¼Œæ”¾å…¥èƒŒåŒ…ä¸­ï¼Œå±•ç¤ºå…¶ä¾¿æºæ€§', 'pacing': 'å¸¸è§„', 'caption': 'éšèº«æºå¸¦', 'start_time': 25.0, 'end_time': 31.0}, {'shot_type': 'ç‰¹å†™', 'duration': 3.0, 'visual_description': 'æŠ•å½±ä»ªé¡¶éƒ¨çš„éº¦å…‹é£å­”ç‰¹å†™ï¼Œéšååˆ‡æ¢è‡³è®¾å¤‡å“åº”è¯­éŸ³å‘½ä»¤ï¼Œè‡ªåŠ¨è°ƒæ•´æŠ•å½±å†…å®¹', 'pacing': 'å¿«å‰ª', 'caption': 'è¯­éŸ³æ§åˆ¶', 'start_time': 31.0, 'end_time': 34.0}, {'shot_type': 'ç‰¹å†™', 'duration': 6.0, 'visual_description': 'æœ€ç»ˆæŠ•å½±ç”»é¢ç¨³å®šæ˜¾ç¤ºï¼Œç”»è´¨æ¸…æ™°é”åˆ©ï¼Œå†æ¬¡å¼ºè°ƒ4Kåˆ†è¾¨ç‡å¸¦æ¥çš„è§†è§‰äº«å—', 'pacing': 'æ…¢é•œå¤´', 'caption': 'æè‡´è§†ç•Œ', 'start_time': 34.0, 'end_time': 40.0}, {'shot_type': 'ç‰¹å†™', 'duration': 5.0, 'visual_description': 'äº§å“logoåœ¨é»‘è‰²èƒŒæ™¯ä¸­ç¼“ç¼“æ˜¾ç°ï¼Œå…‰èŠ’ä»logoä¸­å¿ƒå‘å››å‘¨æ‰©æ•£ï¼Œç…§äº®æ•´ä¸ªç”»é¢ã€‚', 'pacing': 'æ…¢é•œå¤´', 'caption': 'å“è´¨å…¸èŒƒ', 'start_time': 40.0, 'end_time': 45.0}, {'shot_type': 'ä¸­æ™¯', 'duration': 5.0, 'visual_description': 'äº§å“é™ç½®äºç®€çº¦çš„å±•ç¤ºå°ä¸Šï¼Œå‘¨å›´ç¯å¢ƒæ˜æš—ï¼Œåªæœ‰äº§å“è¢«æŸ”å’Œçš„å…‰çº¿åŒ…å›´ï¼Œæ˜¾å¾—æ ¼å¤–çªå‡ºã€‚é•œå¤´è½»å¾®æ¨è¿›ï¼Œèšç„¦äºäº§å“ä¸Šã€‚', 'pacing': 'å¸¸è§„', 'caption': 'ç»†èŠ‚è§çœŸç« ', 'start_time': 45.0, 'end_time': 50.0}, {'shot_type': 'ç‰¹å†™', 'duration': 5.0, 'visual_description': 'äº§å“çš„æŸä¸ªå…³é”®åŠŸèƒ½åŒºåŸŸï¼ˆå¦‚å±å¹•æˆ–æŒ‰é’®ï¼‰è½»è½»äº®èµ·ï¼Œæ˜¾ç¤ºç€å“ç‰Œåç§°å’Œäº§å“å‹å·ï¼Œå­—ä½“ä¼˜é›…ä¸”æ¸…æ™°å¯è§ã€‚', 'pacing': 'æ…¢é•œå¤´', 'caption': 'ç«‹å³ä½“éªŒæœªæ¥è§†ç•Œ', 'start_time': 50.0, 'end_time': 55.0}, {'shot_type': 'å®šæ ¼', 'duration': 5.0, 'visual_description': 'æœ€ç»ˆå®šæ ¼åœ¨å®Œæ•´çš„äº§å“å½¢è±¡ä¸Šï¼Œå“ç‰Œlogoä¸äº§å“åç§°ä¸€åŒå‡ºç°åœ¨ç”»é¢ä¸‹æ–¹ï¼Œç®€æ´æœ‰åŠ›ã€‚', 'pacing': 'å®šæ ¼', 'caption': 'å¼€å¯æ‚¨çš„ä¸“å±æ—…ç¨‹', 'start_time': 55.0, 'end_time': 60.0}]
ğŸ” [DEBUG] Checking parameter 'user_description_id': exists=True, value=å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
ğŸ” [DEBUG] Checking parameter 'tts_text_id': exists=False, value=NOT_FOUND
ğŸ” [DEBUG] Checking parameter 'video_description_id': exists=False, value=NOT_FOUND
âŒ è°ƒç”¨ match_intelligent_video å¤±è´¥: ç¼ºå°‘è¾“å…¥ï¼šscheduled_shots ä¸èƒ½ä¸ºç©º
âš ï¸ æ™ºèƒ½ç´ æåŒ¹é…å¤±è´¥ï¼Œä½¿ç”¨å ä½ç¬¦åºåˆ—
ğŸ” Node asset_request extracted outputs: ['preliminary_sequence_id', 'total_main_duration_id']
ğŸ¯ Context keys after asset_request: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id']
âœ… Node 6/16 completed: asset_request
2025-10-09 17:12:12,238 INFO sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.task_id AS tasks_task_id, tasks.theme AS tasks_theme, tasks.keywords AS tasks_keywords, tasks.target_duration AS tasks_target_duration, tasks.user_description AS tasks_user_description, tasks.config AS tasks_config, tasks.priority AS tasks_priority, tasks.status AS tasks_status, tasks.progress AS tasks_progress, tasks.message AS tasks_message, tasks.result AS tasks_result, tasks.output_url AS tasks_output_url, tasks.error_message AS tasks_error_message, tasks.retry_count AS tasks_retry_count, tasks.created_at AS tasks_created_at, tasks.started_at AS tasks_started_at, tasks.completed_at AS tasks_completed_at, tasks.processing_time AS tasks_processing_time, tasks.project_id AS tasks_project_id
FROM tasks
WHERE tasks.task_id = ?
 LIMIT ? OFFSET ?
2025-10-09 17:12:12,238 INFO sqlalchemy.engine.Engine [cached since 411.3s ago] ('3256dedc-aed9-46dd-8aa5-5b6b52802b3d', 1, 0)
2025-10-09 17:12:12,239 INFO sqlalchemy.engine.Engine UPDATE tasks SET progress=?, message=? WHERE tasks.id = ?
2025-10-09 17:12:12,239 INFO sqlalchemy.engine.Engine [cached since 306.5s ago] (37.5, 'æ­£åœ¨æ‰§è¡Œaudio_processing', 103)
2025-10-09 17:12:12,239 INFO sqlalchemy.engine.Engine COMMIT
2025-10-09 17:12:12,240 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-09 17:12:12,240 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.task_id, tasks.theme, tasks.keywords, tasks.target_duration, tasks.user_description, tasks.config, tasks.priority, tasks.status, tasks.progress, tasks.message, tasks.result, tasks.output_url, tasks.error_message, tasks.retry_count, tasks.created_at, tasks.started_at, tasks.completed_at, tasks.processing_time, tasks.project_id
FROM tasks
WHERE tasks.id = ?
2025-10-09 17:12:12,240 INFO sqlalchemy.engine.Engine [cached since 411.3s ago] (103,)
âš¡ æ‰§è¡Œ node 7/16: audio_processing

ğŸ¬ [execute_node] Starting node: audio_processing
ğŸ¬ [execute_node] Input context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request']
ğŸ¬ [execute_node] context[theme_id] = äº§å“å±•ç¤º
ğŸ¬ [execute_node] context[keywords_id] = ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
ğŸ¬ [execute_node] context[target_duration_id] = 20
ğŸ¬ [execute_node] context[user_description_id] = å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
ğŸ¬ [execute_node] Fixed context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request']

================================================================================
ğŸ” [prepare_context_for_node] node_type=audio_processing
ğŸ” [prepare_context_for_node] raw_context keys=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request']
ğŸ” [prepare_context_for_node] input_data (before)=['bgm_composition_id', 'bgm_file_path', 'theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ theme_id in raw_context: äº§å“å±•ç¤º
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ keywords_id in raw_context: ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ target_duration_id in raw_context: 20
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ user_description_id in raw_context: å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
ğŸ” [prepare_context_for_node] input_data (after)=['bgm_composition_id', 'bgm_file_path', 'theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
ğŸ” [prepare_context_for_node] Final values:
    theme_id: äº§å“å±•ç¤º
    keywords_id: ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
    target_duration_id: 20
    user_description_id: å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
================================================================================

ğŸ¬ [execute_node] Prepared input keys: ['bgm_composition_id', 'bgm_file_path', 'theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
ğŸ¬ [execute_node] Execution context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'bgm_file_path']
ğŸ¬ [execute_node] execution_context[theme_id] = äº§å“å±•ç¤º
ğŸ¬ [execute_node] execution_context[keywords_id] = ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
ğŸ¬ [execute_node] execution_context[target_duration_id] = 20
ğŸ¬ [execute_node] execution_context[user_description_id] = å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
ğŸ¬ [execute_node] Calling node.generate()...

ğŸ” [DEBUG] Node éŸ³é¢‘å¤„ç† validation:
ğŸ” [DEBUG] Context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'bgm_file_path']
ğŸ” [DEBUG] Required inputs: ['bgm_composition_id', 'sfx_track_id', 'tts_track_id']
ğŸ” [DEBUG] Checking parameter 'bgm_composition_id': exists=True, value=default_bgm_001
ğŸ” Node audio_processing extracted outputs: ['node_id']
ğŸ¯ Context keys after audio_processing: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id']
âœ… Node 7/16 completed: audio_processing
2025-10-09 17:12:12,241 INFO sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.task_id AS tasks_task_id, tasks.theme AS tasks_theme, tasks.keywords AS tasks_keywords, tasks.target_duration AS tasks_target_duration, tasks.user_description AS tasks_user_description, tasks.config AS tasks_config, tasks.priority AS tasks_priority, tasks.status AS tasks_status, tasks.progress AS tasks_progress, tasks.message AS tasks_message, tasks.result AS tasks_result, tasks.output_url AS tasks_output_url, tasks.error_message AS tasks_error_message, tasks.retry_count AS tasks_retry_count, tasks.created_at AS tasks_created_at, tasks.started_at AS tasks_started_at, tasks.completed_at AS tasks_completed_at, tasks.processing_time AS tasks_processing_time, tasks.project_id AS tasks_project_id
FROM tasks
WHERE tasks.task_id = ?
 LIMIT ? OFFSET ?
2025-10-09 17:12:12,241 INFO sqlalchemy.engine.Engine [cached since 411.3s ago] ('3256dedc-aed9-46dd-8aa5-5b6b52802b3d', 1, 0)
2025-10-09 17:12:12,241 INFO sqlalchemy.engine.Engine UPDATE tasks SET progress=?, message=? WHERE tasks.id = ?
2025-10-09 17:12:12,241 INFO sqlalchemy.engine.Engine [cached since 306.5s ago] (43.75, 'æ­£åœ¨æ‰§è¡Œsfx_integration', 103)
2025-10-09 17:12:12,241 INFO sqlalchemy.engine.Engine COMMIT
2025-10-09 17:12:12,242 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-09 17:12:12,242 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.task_id, tasks.theme, tasks.keywords, tasks.target_duration, tasks.user_description, tasks.config, tasks.priority, tasks.status, tasks.progress, tasks.message, tasks.result, tasks.output_url, tasks.error_message, tasks.retry_count, tasks.created_at, tasks.started_at, tasks.completed_at, tasks.processing_time, tasks.project_id
FROM tasks
WHERE tasks.id = ?
2025-10-09 17:12:12,242 INFO sqlalchemy.engine.Engine [cached since 411.3s ago] (103,)
âš¡ æ‰§è¡Œ node 8/16: sfx_integration

ğŸ¬ [execute_node] Starting node: sfx_integration
ğŸ¬ [execute_node] Input context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing']
ğŸ¬ [execute_node] context[theme_id] = äº§å“å±•ç¤º
ğŸ¬ [execute_node] context[keywords_id] = ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
ğŸ¬ [execute_node] context[target_duration_id] = 20
ğŸ¬ [execute_node] context[user_description_id] = å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
ğŸ¬ [execute_node] Fixed context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing']

================================================================================
ğŸ” [prepare_context_for_node] node_type=sfx_integration
ğŸ” [prepare_context_for_node] raw_context keys=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing']
ğŸ” [prepare_context_for_node] input_data (before)=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ theme_id in raw_context: äº§å“å±•ç¤º
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ keywords_id in raw_context: ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ target_duration_id in raw_context: 20
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ user_description_id in raw_context: å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
ğŸ” [prepare_context_for_node] input_data (after)=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
ğŸ” [prepare_context_for_node] Final values:
    theme_id: äº§å“å±•ç¤º
    keywords_id: ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
    target_duration_id: 20
    user_description_id: å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
================================================================================

ğŸ¬ [execute_node] Prepared input keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
ğŸ¬ [execute_node] Execution context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing']
ğŸ¬ [execute_node] execution_context[theme_id] = äº§å“å±•ç¤º
ğŸ¬ [execute_node] execution_context[keywords_id] = ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
ğŸ¬ [execute_node] execution_context[target_duration_id] = 20
ğŸ¬ [execute_node] execution_context[user_description_id] = å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
ğŸ¬ [execute_node] Calling node.generate()...

ğŸ” [DEBUG] Node éŸ³æ•ˆæ·»åŠ  validation:
ğŸ” [DEBUG] Context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing']
ğŸ” [DEBUG] Required inputs: ['shot_blocks_id', 'voice_track_id', 'existing_sfx', 'system_parameters']
ğŸ” [DEBUG] Checking parameter 'shot_blocks_id': exists=True, value=[{'shot_type': 'ç‰¹å†™', 'duration': 5.0, 'visual_description': 'æ™ºèƒ½æŠ•å½±ä»ªçš„é•œå¤´ç¼“ç¼“å¯¹å‡†ç™½è‰²å¢™é¢ï¼ŒæŠ•å°„å‡ºä¸€æŸå…‰å¼€å§‹é€æ¸æ”¾å¤§ï¼Œç›´è‡³å……æ»¡æ•´ä¸ªç”»é¢ã€‚', 'pacing': 'æ…¢é•œå¤´', 'caption': 'å…‰å½±å¯å¹•', 'start_time': 0.0, 'end_time': 5.0}, {'shot_type': 'ä¸­æ™¯', 'duration': 6.0, 'visual_description': 'å¢™é¢ä¸Šå‡ºç°æ¸…æ™°ã€è‰²å½©é²œè‰³çš„ç”»é¢ï¼Œå±•ç¤ºç€ä¸€å¹…åŠ¨æ€çš„åŸå¸‚å¤œæ™¯å›¾ï¼Œç¯å…‰æµåŠ¨ï¼Œç»†èŠ‚ä¸°å¯Œã€‚', 'pacing': 'å¸¸è§„', 'caption': 'ç»šä¸½è§†ç•Œ', 'start_time': 5.0, 'end_time': 11.0}, {'shot_type': 'ç‰¹å†™', 'duration': 4.0, 'visual_description': 'èšç„¦äºæŠ•å½±ä»ªçš„æ§åˆ¶é¢æ¿ï¼Œæ‰‹æŒ‡è½»è§¦å±å¹•ä¸Šçš„æ’­æ”¾æŒ‰é’®ï¼Œç•Œé¢æµç•…åˆ‡æ¢è‡³ä¸‹ä¸€åœºæ™¯ã€‚', 'pacing': 'å¿«å‰ª', 'caption': 'ä¸€é”®åˆ‡æ¢', 'start_time': 11.0, 'end_time': 15.0}, {'shot_type': 'è¿‘æ™¯', 'duration': 5.0, 'visual_description': 'ä»æŠ•å½±ä»ªçš„è§’åº¦çœ‹å‘æˆ¿é—´å†…ï¼Œå¢™ä¸Šå±•ç°ç€ä¸€éƒ¨ç”µå½±çš„å¼€åœºç‰‡æ®µï¼Œå›¾åƒæ¸…æ™°åº¦æé«˜ï¼Œç»™äººèº«ä¸´å…¶å¢ƒä¹‹æ„Ÿã€‚', 'pacing': 'æ…¢é•œå¤´', 'caption': 'æ²‰æµ¸ä½“éªŒ', 'start_time': 15.0, 'end_time': 20.0}, {'shot_type': 'ç‰¹å†™', 'duration': 5.0, 'visual_description': 'æŠ•å½±ä»ªæŠ•å°„å‡ºçš„4Kè¶…æ¸…å›¾åƒï¼Œç”»é¢ç»†èŠ‚ä¸°å¯Œã€è‰²å½©é²œè‰³', 'pacing': 'æ…¢é•œå¤´', 'caption': '4Kè¶…æ¸…', 'start_time': 20.0, 'end_time': 25.0}, {'shot_type': 'ä¸­æ™¯', 'duration': 6.0, 'visual_description': 'ä¸€åªæ‰‹è½»è½»æ‹¿èµ·å°å·§è½»ä¾¿çš„æŠ•å½±ä»ªï¼Œæ”¾å…¥èƒŒåŒ…ä¸­ï¼Œå±•ç¤ºå…¶ä¾¿æºæ€§', 'pacing': 'å¸¸è§„', 'caption': 'éšèº«æºå¸¦', 'start_time': 25.0, 'end_time': 31.0}, {'shot_type': 'ç‰¹å†™', 'duration': 3.0, 'visual_description': 'æŠ•å½±ä»ªé¡¶éƒ¨çš„éº¦å…‹é£å­”ç‰¹å†™ï¼Œéšååˆ‡æ¢è‡³è®¾å¤‡å“åº”è¯­éŸ³å‘½ä»¤ï¼Œè‡ªåŠ¨è°ƒæ•´æŠ•å½±å†…å®¹', 'pacing': 'å¿«å‰ª', 'caption': 'è¯­éŸ³æ§åˆ¶', 'start_time': 31.0, 'end_time': 34.0}, {'shot_type': 'ç‰¹å†™', 'duration': 6.0, 'visual_description': 'æœ€ç»ˆæŠ•å½±ç”»é¢ç¨³å®šæ˜¾ç¤ºï¼Œç”»è´¨æ¸…æ™°é”åˆ©ï¼Œå†æ¬¡å¼ºè°ƒ4Kåˆ†è¾¨ç‡å¸¦æ¥çš„è§†è§‰äº«å—', 'pacing': 'æ…¢é•œå¤´', 'caption': 'æè‡´è§†ç•Œ', 'start_time': 34.0, 'end_time': 40.0}, {'shot_type': 'ç‰¹å†™', 'duration': 5.0, 'visual_description': 'äº§å“logoåœ¨é»‘è‰²èƒŒæ™¯ä¸­ç¼“ç¼“æ˜¾ç°ï¼Œå…‰èŠ’ä»logoä¸­å¿ƒå‘å››å‘¨æ‰©æ•£ï¼Œç…§äº®æ•´ä¸ªç”»é¢ã€‚', 'pacing': 'æ…¢é•œå¤´', 'caption': 'å“è´¨å…¸èŒƒ', 'start_time': 40.0, 'end_time': 45.0}, {'shot_type': 'ä¸­æ™¯', 'duration': 5.0, 'visual_description': 'äº§å“é™ç½®äºç®€çº¦çš„å±•ç¤ºå°ä¸Šï¼Œå‘¨å›´ç¯å¢ƒæ˜æš—ï¼Œåªæœ‰äº§å“è¢«æŸ”å’Œçš„å…‰çº¿åŒ…å›´ï¼Œæ˜¾å¾—æ ¼å¤–çªå‡ºã€‚é•œå¤´è½»å¾®æ¨è¿›ï¼Œèšç„¦äºäº§å“ä¸Šã€‚', 'pacing': 'å¸¸è§„', 'caption': 'ç»†èŠ‚è§çœŸç« ', 'start_time': 45.0, 'end_time': 50.0}, {'shot_type': 'ç‰¹å†™', 'duration': 5.0, 'visual_description': 'äº§å“çš„æŸä¸ªå…³é”®åŠŸèƒ½åŒºåŸŸï¼ˆå¦‚å±å¹•æˆ–æŒ‰é’®ï¼‰è½»è½»äº®èµ·ï¼Œæ˜¾ç¤ºç€å“ç‰Œåç§°å’Œäº§å“å‹å·ï¼Œå­—ä½“ä¼˜é›…ä¸”æ¸…æ™°å¯è§ã€‚', 'pacing': 'æ…¢é•œå¤´', 'caption': 'ç«‹å³ä½“éªŒæœªæ¥è§†ç•Œ', 'start_time': 50.0, 'end_time': 55.0}, {'shot_type': 'å®šæ ¼', 'duration': 5.0, 'visual_description': 'æœ€ç»ˆå®šæ ¼åœ¨å®Œæ•´çš„äº§å“å½¢è±¡ä¸Šï¼Œå“ç‰Œlogoä¸äº§å“åç§°ä¸€åŒå‡ºç°åœ¨ç”»é¢ä¸‹æ–¹ï¼Œç®€æ´æœ‰åŠ›ã€‚', 'pacing': 'å®šæ ¼', 'caption': 'å¼€å¯æ‚¨çš„ä¸“å±æ—…ç¨‹', 'start_time': 55.0, 'end_time': 60.0}]
ğŸ” [DEBUG] Checking parameter 'voice_track_id': exists=False, value=NOT_FOUND
ğŸ” [DEBUG] Checking parameter 'existing_sfx': exists=False, value=NOT_FOUND
ğŸ” [DEBUG] Checking parameter 'system_parameters': exists=False, value=NOT_FOUND
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT tasks.id, tasks.task_id, tasks.theme, tasks.keywords, tasks.target_duration, tasks.user_description, tasks.config, tasks.priority, tasks.status, tasks.progress, tasks.message, tasks.result, tasks.output_url, tasks.error_message, tasks.retry_count, tasks.created_at, tasks.started_at, tasks.completed_at, tasks.processing_time, tasks.project_id
FROM tasks
WHERE tasks.id = ?
INFO:sqlalchemy.engine.Engine:[cached since 411.3s ago] (103,)
INFO:app:ğŸ“‹ Task 3256dedc-aed9-46dd-8aa5-5b6b52802b3d - Node 7: processing - æ­£åœ¨æ‰§è¡Œaudio_processing
INFO:app:ğŸ¬ æ‰§è¡ŒVGPèŠ‚ç‚¹: audio_processing - éŸ³é¢‘å¤„ç†
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Unknown node type: multimodal_fusion
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Unknown node type: multimodal_fusion
INFO:video_generate_protocol.vgp_data_transformer:prepare_context_for_node: node_type=audio_processing, raw_context keys=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request']
INFO:video_generate_protocol.vgp_data_transformer:prepare_context_for_node: æœ€ç»ˆå‡†å¤‡çš„ input_data keys=['bgm_composition_id', 'bgm_file_path', 'theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
ERROR:app:VGPèŠ‚ç‚¹æ‰§è¡Œå¤±è´¥ audio_processing: cannot access local variable 'parsed' where it is not associated with a value
INFO:app:ğŸ” Node audio_processing extracted outputs: ['node_id']
INFO:app:ğŸ¯ Context keys after audio_processing: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id']
INFO:app:ğŸ“‹ Task 3256dedc-aed9-46dd-8aa5-5b6b52802b3d - Node 7: completed - audio_processingæ‰§è¡Œå®Œæˆ
INFO:app:âœ… Node audio_processing completed
INFO:sqlalchemy.engine.Engine:SELECT tasks.id AS tasks_id, tasks.task_id AS tasks_task_id, tasks.theme AS tasks_theme, tasks.keywords AS tasks_keywords, tasks.target_duration AS tasks_target_duration, tasks.user_description AS tasks_user_description, tasks.config AS tasks_config, tasks.priority AS tasks_priority, tasks.status AS tasks_status, tasks.progress AS tasks_progress, tasks.message AS tasks_message, tasks.result AS tasks_result, tasks.output_url AS tasks_output_url, tasks.error_message AS tasks_error_message, tasks.retry_count AS tasks_retry_count, tasks.created_at AS tasks_created_at, tasks.started_at AS tasks_started_at, tasks.completed_at AS tasks_completed_at, tasks.processing_time AS tasks_processing_time, tasks.project_id AS tasks_project_id
FROM tasks
WHERE tasks.task_id = ?
 LIMIT ? OFFSET ?
INFO:sqlalchemy.engine.Engine:[cached since 411.3s ago] ('3256dedc-aed9-46dd-8aa5-5b6b52802b3d', 1, 0)
INFO:sqlalchemy.engine.Engine:UPDATE tasks SET progress=?, message=? WHERE tasks.id = ?
INFO:sqlalchemy.engine.Engine:[cached since 306.5s ago] (43.75, 'æ­£åœ¨æ‰§è¡Œsfx_integration', 103)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT tasks.id, tasks.task_id, tasks.theme, tasks.keywords, tasks.target_duration, tasks.user_description, tasks.config, tasks.priority, tasks.status, tasks.progress, tasks.message, tasks.result, tasks.output_url, tasks.error_message, tasks.retry_count, tasks.created_at, tasks.started_at, tasks.completed_at, tasks.processing_time, tasks.project_id
FROM tasks
WHERE tasks.id = ?
INFO:sqlalchemy.engine.Engine:[cached since 411.3s ago] (103,)
INFO:app:ğŸ“‹ Task 3256dedc-aed9-46dd-8aa5-5b6b52802b3d - Node 8: processing - æ­£åœ¨æ‰§è¡Œsfx_integration
INFO:app:ğŸ¬ æ‰§è¡ŒVGPèŠ‚ç‚¹: sfx_integration - éŸ³æ•ˆæ·»åŠ 
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Unknown node type: multimodal_fusion
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'audio_track_id' for audio_processing, using default
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'audio_file_path' for audio_processing, using default
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'audio_duration' for audio_processing, using default
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Unknown node type: multimodal_fusion
INFO:video_generate_protocol.vgp_data_transformer:prepare_context_for_node: node_type=sfx_integration, raw_context keys=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing']
INFO:video_generate_protocol.vgp_data_transformer:prepare_context_for_node: æœ€ç»ˆå‡†å¤‡çš„ input_data keys=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
INFO:watchfiles.main:2 changes detected
âš ï¸ æƒ…ç»ªæ›²çº¿åˆ†æå¤±è´¥ï¼šæ ¼å¼é”™è¯¯ï¼Œä½¿ç”¨é»˜è®¤
ğŸ“Š æƒ…ç»ªæ›²çº¿: ['å¹³é™ / æ€»ç»“', 'å¹³é™ / æ€»ç»“', 'å¹³é™ / æ€»ç»“', 'å¹³é™ / æ€»ç»“', 'æœŸå¾… / å¯åŠ¨', 'æœŸå¾… / å¯åŠ¨', 'æœŸå¾… / å¯åŠ¨', 'æœŸå¾… / å¯åŠ¨', 'æŠ•å…¥ / é«˜æ½®', 'æŠ•å…¥ / é«˜æ½®', 'æ¿€åŠ± / è¡ŒåŠ¨', 'æ¿€åŠ± / è¡ŒåŠ¨']
âœ… æ·»åŠ éŸ³æ•ˆ: æ¿€å…‰ @ 12.6s | æ¿€å…‰å£°éŸ³
âœ… æ·»åŠ éŸ³æ•ˆ: æ¿€å…‰ @ 22.1s | æ¿€å…‰å£°éŸ³
âœ… æ·»åŠ éŸ³æ•ˆ: æ¿€å…‰ @ 27.6s | æ¿€å…‰å£°éŸ³
âœ… æ·»åŠ éŸ³æ•ˆ: æ¿€å…‰ @ 32.1s | æ¿€å…‰å£°éŸ³
âœ… æ·»åŠ éŸ³æ•ˆ: æ¿€å…‰ @ 36.6s | æ¿€å…‰å£°éŸ³
âœ… æ·»åŠ éŸ³æ•ˆ: æ¿€å…‰ @ 42.1s | æ¿€å…‰å£°éŸ³
âœ… æ·»åŠ éŸ³æ•ˆ: æ¿€å…‰ @ 47.1s | æ¿€å…‰å£°éŸ³
âœ… æ·»åŠ éŸ³æ•ˆ: æ¿€å…‰ @ 52.1s | æ¿€å…‰å£°éŸ³
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'sfx_track_id' for sfx_integration, using default
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'sfx_timeline' for sfx_integration, using default
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'sfx_effects' for sfx_integration, using default
INFO:app:âœ… VGPèŠ‚ç‚¹æ‰§è¡ŒæˆåŠŸ: sfx_integration
INFO:app:ğŸ” Node sfx_integration extracted outputs: ['sfx_track_id']
INFO:app:ğŸ¯ Context keys after sfx_integration: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id']
INFO:app:ğŸ“‹ Task 3256dedc-aed9-46dd-8aa5-5b6b52802b3d - Node 8: completed - sfx_integrationæ‰§è¡Œå®Œæˆ
INFO:app:âœ… Node sfx_integration completed
INFO:sqlalchemy.engine.Engine:SELECT tasks.id AS tasks_id, tasks.task_id AS tasks_task_id, tasks.theme AS tasks_theme, tasks.keywords AS tasks_keywords, tasks.target_duration AS tasks_target_duration, tasks.user_description AS tasks_user_description, tasks.config AS tasks_config, tasks.priority AS tasks_priority, tasks.status AS tasks_status, tasks.progress AS tasks_progress, tasks.message AS tasks_message, tasks.result AS tasks_result, tasks.output_url AS tasks_output_url, tasks.error_message AS tasks_error_message, tasks.retry_count AS tasks_retry_count, tasks.created_at AS tasks_created_at, tasks.started_at AS tasks_started_at, tasks.completed_at AS tasks_completed_at, tasks.processing_time AS tasks_processing_time, tasks.project_id AS tasks_project_id
FROM tasks
WHERE tasks.task_id = ?
 LIMIT ? OFFSET ?
INFO:sqlalchemy.engine.Engine:[cached since 572.3s ago] ('3256dedc-aed9-46dd-8aa5-5b6b52802b3d', 1, 0)
INFO:sqlalchemy.engine.Engine:UPDATE tasks SET progress=?, message=? WHERE tasks.id = ?
INFO:sqlalchemy.engine.Engine:[cached since 467.5s ago] (50.0, 'æ­£åœ¨æ‰§è¡Œtransition_selection', 103)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT tasks.id, tasks.task_id, tasks.theme, tasks.keywords, tasks.target_duration, tasks.user_description, tasks.config, tasks.priority, tasks.status, tasks.progress, tasks.message, tasks.result, tasks.output_url, tasks.error_message, tasks.retry_count, tasks.created_at, tasks.started_at, tasks.completed_at, tasks.processing_time, tasks.project_id
FROM tasks
WHERE tasks.id = ?
INFO:sqlalchemy.engine.Engine:[cached since 572.3s ago] (103,)
INFO:app:ğŸ“‹ Task 3256dedc-aed9-46dd-8aa5-5b6b52802b3d - Node 9: processing - æ­£åœ¨æ‰§è¡Œtransition_selection
INFO:app:ğŸ¬ æ‰§è¡ŒVGPèŠ‚ç‚¹: transition_selection - è½¬åœºé€‰æ‹©
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Unknown node type: multimodal_fusion
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'audio_track_id' for audio_processing, using default
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'audio_file_path' for audio_processing, using default
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'audio_duration' for audio_processing, using default
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Unknown node type: multimodal_fusion
INFO:video_generate_protocol.vgp_data_transformer:prepare_context_for_node: node_type=transition_selection, raw_context keys=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration']
INFO:video_generate_protocol.vgp_data_transformer:prepare_context_for_node: æœ€ç»ˆå‡†å¤‡çš„ input_data keys=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'transitions' for transition_selection, using default
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'transition_timeline' for transition_selection, using default
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'transition_types' for transition_selection, using default
INFO:app:âœ… VGPèŠ‚ç‚¹æ‰§è¡ŒæˆåŠŸ: transition_selection
INFO:app:ğŸ” Node transition_selection extracted outputs: ['transitions', 'transition_sequence_id']
INFO:app:ğŸ¯ Context keys after transition_selection: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id']
INFO:app:ğŸ“‹ Task 3256dedc-aed9-46dd-8aa5-5b6b52802b3d - Node 9: completed - transition_selectionæ‰§è¡Œå®Œæˆ
INFO:app:âœ… Node transition_selection completed
INFO:sqlalchemy.engine.Engine:SELECT tasks.id AS tasks_id, tasks.task_id AS tasks_task_id, tasks.theme AS tasks_theme, tasks.keywords AS tasks_keywords, tasks.target_duration AS tasks_target_duration, tasks.user_description AS tasks_user_description, tasks.config AS tasks_config, tasks.priority AS tasks_priority, tasks.status AS tasks_status, tasks.progress AS tasks_progress, tasks.message AS tasks_message, tasks.result AS tasks_result, tasks.output_url AS tasks_output_url, tasks.error_message AS tasks_error_message, tasks.retry_count AS tasks_retry_count, tasks.created_at AS tasks_created_at, tasks.started_at AS tasks_started_at, tasks.completed_at AS tasks_completed_at, tasks.processing_time AS tasks_processing_time, tasks.project_id AS tasks_project_id
FROM tasks
WHERE tasks.task_id = ?
 LIMIT ? OFFSET ?
INFO:sqlalchemy.engine.Engine:[cached since 572.3s ago] ('3256dedc-aed9-46dd-8aa5-5b6b52802b3d', 1, 0)
INFO:sqlalchemy.engine.Engine:UPDATE tasks SET progress=?, message=? WHERE tasks.id = ?
INFO:sqlalchemy.engine.Engine:[cached since 467.5s ago] (56.25, 'æ­£åœ¨æ‰§è¡Œfilter_application', 103)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT tasks.id, tasks.task_id, tasks.theme, tasks.keywords, tasks.target_duration, tasks.user_description, tasks.config, tasks.priority, tasks.status, tasks.progress, tasks.message, tasks.result, tasks.output_url, tasks.error_message, tasks.retry_count, tasks.created_at, tasks.started_at, tasks.completed_at, tasks.processing_time, tasks.project_id
FROM tasks
WHERE tasks.id = ?
INFO:sqlalchemy.engine.Engine:[cached since 572.3s ago] (103,)
INFO:app:ğŸ“‹ Task 3256dedc-aed9-46dd-8aa5-5b6b52802b3d - Node 10: processing - æ­£åœ¨æ‰§è¡Œfilter_application
INFO:app:ğŸ¬ æ‰§è¡ŒVGPèŠ‚ç‚¹: filter_application - æ»¤é•œåº”ç”¨
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Unknown node type: multimodal_fusion
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'audio_track_id' for audio_processing, using default
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'audio_file_path' for audio_processing, using default
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'audio_duration' for audio_processing, using default
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Unknown node type: multimodal_fusion
INFO:video_generate_protocol.vgp_data_transformer:prepare_context_for_node: node_type=filter_application, raw_context keys=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection']
INFO:video_generate_protocol.vgp_data_transformer:prepare_context_for_node: æœ€ç»ˆå‡†å¤‡çš„ input_data keys=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
INFO:llm.qwen:âœ… DashScope APIå¯†é’¥å·²è®¾ç½®: sk-a48a1d84e...
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'filters' for filter_application, using default
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'filter_timeline' for filter_application, using default
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'filter_parameters' for filter_application, using default
INFO:app:âœ… VGPèŠ‚ç‚¹æ‰§è¡ŒæˆåŠŸ: filter_application
INFO:app:ğŸ” Node filter_application extracted outputs: ['filters', 'filter_sequence_id']
INFO:app:ğŸ¯ Context keys after filter_application: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection', 'filters', 'filter_sequence_id']
INFO:app:ğŸ“‹ Task 3256dedc-aed9-46dd-8aa5-5b6b52802b3d - Node 10: completed - filter_applicationæ‰§è¡Œå®Œæˆ
INFO:app:âœ… Node filter_application completed
INFO:sqlalchemy.engine.Engine:SELECT tasks.id AS tasks_id, tasks.task_id AS tasks_task_id, tasks.theme AS tasks_theme, tasks.keywords AS tasks_keywords, tasks.target_duration AS tasks_target_duration, tasks.user_description AS tasks_user_description, tasks.config AS tasks_config, tasks.priority AS tasks_priority, tasks.status AS tasks_status, tasks.progress AS tasks_progress, tasks.message AS tasks_message, tasks.result AS tasks_result, tasks.output_url AS tasks_output_url, tasks.error_message AS tasks_error_message, tasks.retry_count AS tasks_retry_count, tasks.created_at AS tasks_created_at, tasks.started_at AS tasks_started_at, tasks.completed_at AS tasks_completed_at, tasks.processing_time AS tasks_processing_time, tasks.project_id AS tasks_project_id
FROM tasks
WHERE tasks.task_id = ?
 LIMIT ? OFFSET ?
INFO:sqlalchemy.engine.Engine:[cached since 572.3s ago] ('3256dedc-aed9-46dd-8aa5-5b6b52802b3d', 1, 0)
INFO:sqlalchemy.engine.Engine:UPDATE tasks SET progress=?, message=? WHERE tasks.id = ?
INFO:sqlalchemy.engine.Engine:[cached since 467.5s ago] (62.5, 'æ­£åœ¨æ‰§è¡Œdynamic_effects', 103)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT tasks.id, tasks.task_id, tasks.theme, tasks.keywords, tasks.target_duration, tasks.user_description, tasks.config, tasks.priority, tasks.status, tasks.progress, tasks.message, tasks.result, tasks.output_url, tasks.error_message, tasks.retry_count, tasks.created_at, tasks.started_at, tasks.completed_at, tasks.processing_time, tasks.project_id
FROM tasks
WHERE tasks.id = ?
INFO:sqlalchemy.engine.Engine:[cached since 572.3s ago] (103,)
INFO:app:ğŸ“‹ Task 3256dedc-aed9-46dd-8aa5-5b6b52802b3d - Node 11: processing - æ­£åœ¨æ‰§è¡Œdynamic_effects
INFO:app:ğŸ¬ æ‰§è¡ŒVGPèŠ‚ç‚¹: dynamic_effects - åŠ¨æ€ç‰¹æ•ˆæ·»åŠ 
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Unknown node type: multimodal_fusion
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'audio_track_id' for audio_processing, using default
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'audio_file_path' for audio_processing, using default
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'audio_duration' for audio_processing, using default
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Unknown node type: multimodal_fusion
INFO:video_generate_protocol.vgp_data_transformer:prepare_context_for_node: node_type=dynamic_effects, raw_context keys=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection', 'filters', 'filter_sequence_id', 'filter_application']
INFO:video_generate_protocol.vgp_data_transformer:prepare_context_for_node: æœ€ç»ˆå‡†å¤‡çš„ input_data keys=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'effects' for dynamic_effects, using default
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'effect_timeline' for dynamic_effects, using default
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'effect_parameters' for dynamic_effects, using default
INFO:app:âœ… VGPèŠ‚ç‚¹æ‰§è¡ŒæˆåŠŸ: dynamic_effects
INFO:app:ğŸ” Node dynamic_effects extracted outputs: ['effects', 'effects_sequence_id']
INFO:app:ğŸ¯ Context keys after dynamic_effects: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection', 'filters', 'filter_sequence_id', 'filter_application', 'effects', 'effects_sequence_id']
INFO:app:ğŸ“‹ Task 3256dedc-aed9-46dd-8aa5-5b6b52802b3d - Node 11: completed - dynamic_effectsæ‰§è¡Œå®Œæˆ
INFO:app:âœ… Node dynamic_effects completed
INFO:sqlalchemy.engine.Engine:SELECT tasks.id AS tasks_id, tasks.task_id AS tasks_task_id, tasks.theme AS tasks_theme, tasks.keywords AS tasks_keywords, tasks.target_duration AS tasks_target_duration, tasks.user_description AS tasks_user_description, tasks.config AS tasks_config, tasks.priority AS tasks_priority, tasks.status AS tasks_status, tasks.progress AS tasks_progress, tasks.message AS tasks_message, tasks.result AS tasks_result, tasks.output_url AS tasks_output_url, tasks.error_message AS tasks_error_message, tasks.retry_count AS tasks_retry_count, tasks.created_at AS tasks_created_at, tasks.started_at AS tasks_started_at, tasks.completed_at AS tasks_completed_at, tasks.processing_time AS tasks_processing_time, tasks.project_id AS tasks_project_id
FROM tasks
WHERE tasks.task_id = ?
 LIMIT ? OFFSET ?
INFO:sqlalchemy.engine.Engine:[cached since 572.3s ago] ('3256dedc-aed9-46dd-8aa5-5b6b52802b3d', 1, 0)
INFO:sqlalchemy.engine.Engine:UPDATE tasks SET progress=?, message=? WHERE tasks.id = ?
INFO:sqlalchemy.engine.Engine:[cached since 467.5s ago] (68.75, 'æ­£åœ¨æ‰§è¡Œaux_media_insertion', 103)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT tasks.id, tasks.task_id, tasks.theme, tasks.keywords, tasks.target_duration, tasks.user_description, tasks.config, tasks.priority, tasks.status, tasks.progress, tasks.message, tasks.result, tasks.output_url, tasks.error_message, tasks.retry_count, tasks.created_at, tasks.started_at, tasks.completed_at, tasks.processing_time, tasks.project_id
FROM tasks
WHERE tasks.id = ?
INFO:sqlalchemy.engine.Engine:[cached since 572.3s ago] (103,)
INFO:app:ğŸ“‹ Task 3256dedc-aed9-46dd-8aa5-5b6b52802b3d - Node 12: processing - æ­£åœ¨æ‰§è¡Œaux_media_insertion
INFO:app:ğŸ¬ æ‰§è¡ŒVGPèŠ‚ç‚¹: aux_media_insertion - é¢å¤–åª’ä½“æ’å…¥
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Unknown node type: multimodal_fusion
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'audio_track_id' for audio_processing, using default
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'audio_file_path' for audio_processing, using default
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'audio_duration' for audio_processing, using default
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Unknown node type: multimodal_fusion
INFO:video_generate_protocol.vgp_data_transformer:prepare_context_for_node: node_type=aux_media_insertion, raw_context keys=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection', 'filters', 'filter_sequence_id', 'filter_application', 'effects', 'effects_sequence_id', 'dynamic_effects']
INFO:video_generate_protocol.vgp_data_transformer:prepare_context_for_node: æœ€ç»ˆå‡†å¤‡çš„ input_data keys=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
âœ… æ·»åŠ éŸ³æ•ˆ: æ¿€å…‰ @ 57.1s | æ¿€å…‰å£°éŸ³
ğŸ” Node sfx_integration extracted outputs: ['sfx_track_id']
ğŸ¯ Context keys after sfx_integration: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id']
âœ… Node 8/16 completed: sfx_integration
2025-10-09 17:14:53,283 INFO sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.task_id AS tasks_task_id, tasks.theme AS tasks_theme, tasks.keywords AS tasks_keywords, tasks.target_duration AS tasks_target_duration, tasks.user_description AS tasks_user_description, tasks.config AS tasks_config, tasks.priority AS tasks_priority, tasks.status AS tasks_status, tasks.progress AS tasks_progress, tasks.message AS tasks_message, tasks.result AS tasks_result, tasks.output_url AS tasks_output_url, tasks.error_message AS tasks_error_message, tasks.retry_count AS tasks_retry_count, tasks.created_at AS tasks_created_at, tasks.started_at AS tasks_started_at, tasks.completed_at AS tasks_completed_at, tasks.processing_time AS tasks_processing_time, tasks.project_id AS tasks_project_id
FROM tasks
WHERE tasks.task_id = ?
 LIMIT ? OFFSET ?
2025-10-09 17:14:53,283 INFO sqlalchemy.engine.Engine [cached since 572.3s ago] ('3256dedc-aed9-46dd-8aa5-5b6b52802b3d', 1, 0)
2025-10-09 17:14:53,284 INFO sqlalchemy.engine.Engine UPDATE tasks SET progress=?, message=? WHERE tasks.id = ?
2025-10-09 17:14:53,284 INFO sqlalchemy.engine.Engine [cached since 467.5s ago] (50.0, 'æ­£åœ¨æ‰§è¡Œtransition_selection', 103)
2025-10-09 17:14:53,284 INFO sqlalchemy.engine.Engine COMMIT
2025-10-09 17:14:53,285 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-09 17:14:53,285 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.task_id, tasks.theme, tasks.keywords, tasks.target_duration, tasks.user_description, tasks.config, tasks.priority, tasks.status, tasks.progress, tasks.message, tasks.result, tasks.output_url, tasks.error_message, tasks.retry_count, tasks.created_at, tasks.started_at, tasks.completed_at, tasks.processing_time, tasks.project_id
FROM tasks
WHERE tasks.id = ?
2025-10-09 17:14:53,285 INFO sqlalchemy.engine.Engine [cached since 572.3s ago] (103,)
âš¡ æ‰§è¡Œ node 9/16: transition_selection

ğŸ¬ [execute_node] Starting node: transition_selection
ğŸ¬ [execute_node] Input context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration']
ğŸ¬ [execute_node] context[theme_id] = äº§å“å±•ç¤º
ğŸ¬ [execute_node] context[keywords_id] = ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
ğŸ¬ [execute_node] context[target_duration_id] = 20
ğŸ¬ [execute_node] context[user_description_id] = å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
ğŸ¬ [execute_node] Fixed context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration']

================================================================================
ğŸ” [prepare_context_for_node] node_type=transition_selection
ğŸ” [prepare_context_for_node] raw_context keys=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration']
ğŸ” [prepare_context_for_node] input_data (before)=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ theme_id in raw_context: äº§å“å±•ç¤º
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ keywords_id in raw_context: ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ target_duration_id in raw_context: 20
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ user_description_id in raw_context: å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
ğŸ” [prepare_context_for_node] input_data (after)=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
ğŸ” [prepare_context_for_node] Final values:
    theme_id: äº§å“å±•ç¤º
    keywords_id: ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
    target_duration_id: 20
    user_description_id: å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
================================================================================

ğŸ¬ [execute_node] Prepared input keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
ğŸ¬ [execute_node] Execution context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration']
ğŸ¬ [execute_node] execution_context[theme_id] = äº§å“å±•ç¤º
ğŸ¬ [execute_node] execution_context[keywords_id] = ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
ğŸ¬ [execute_node] execution_context[target_duration_id] = 20
ğŸ¬ [execute_node] execution_context[user_description_id] = å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
ğŸ¬ [execute_node] Calling node.generate()...

ğŸ” [DEBUG] Node è½¬åœºé€‰æ‹© validation:
ğŸ” [DEBUG] Context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration']
ğŸ” [DEBUG] Required inputs: ['preliminary_sequence_id']
ğŸ” [DEBUG] Checking parameter 'preliminary_sequence_id': exists=True, value=[]
ğŸ” Node transition_selection extracted outputs: ['transitions', 'transition_sequence_id']
ğŸ¯ Context keys after transition_selection: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id']
âœ… Node 9/16 completed: transition_selection
2025-10-09 17:14:53,285 INFO sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.task_id AS tasks_task_id, tasks.theme AS tasks_theme, tasks.keywords AS tasks_keywords, tasks.target_duration AS tasks_target_duration, tasks.user_description AS tasks_user_description, tasks.config AS tasks_config, tasks.priority AS tasks_priority, tasks.status AS tasks_status, tasks.progress AS tasks_progress, tasks.message AS tasks_message, tasks.result AS tasks_result, tasks.output_url AS tasks_output_url, tasks.error_message AS tasks_error_message, tasks.retry_count AS tasks_retry_count, tasks.created_at AS tasks_created_at, tasks.started_at AS tasks_started_at, tasks.completed_at AS tasks_completed_at, tasks.processing_time AS tasks_processing_time, tasks.project_id AS tasks_project_id
FROM tasks
WHERE tasks.task_id = ?
 LIMIT ? OFFSET ?
2025-10-09 17:14:53,285 INFO sqlalchemy.engine.Engine [cached since 572.3s ago] ('3256dedc-aed9-46dd-8aa5-5b6b52802b3d', 1, 0)
2025-10-09 17:14:53,286 INFO sqlalchemy.engine.Engine UPDATE tasks SET progress=?, message=? WHERE tasks.id = ?
2025-10-09 17:14:53,286 INFO sqlalchemy.engine.Engine [cached since 467.5s ago] (56.25, 'æ­£åœ¨æ‰§è¡Œfilter_application', 103)
2025-10-09 17:14:53,286 INFO sqlalchemy.engine.Engine COMMIT
2025-10-09 17:14:53,286 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-09 17:14:53,287 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.task_id, tasks.theme, tasks.keywords, tasks.target_duration, tasks.user_description, tasks.config, tasks.priority, tasks.status, tasks.progress, tasks.message, tasks.result, tasks.output_url, tasks.error_message, tasks.retry_count, tasks.created_at, tasks.started_at, tasks.completed_at, tasks.processing_time, tasks.project_id
FROM tasks
WHERE tasks.id = ?
2025-10-09 17:14:53,287 INFO sqlalchemy.engine.Engine [cached since 572.3s ago] (103,)
âš¡ æ‰§è¡Œ node 10/16: filter_application

ğŸ¬ [execute_node] Starting node: filter_application
ğŸ¬ [execute_node] Input context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection']
ğŸ¬ [execute_node] context[theme_id] = äº§å“å±•ç¤º
ğŸ¬ [execute_node] context[keywords_id] = ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
ğŸ¬ [execute_node] context[target_duration_id] = 20
ğŸ¬ [execute_node] context[user_description_id] = å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
ğŸ¬ [execute_node] Fixed context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection']

================================================================================
ğŸ” [prepare_context_for_node] node_type=filter_application
ğŸ” [prepare_context_for_node] raw_context keys=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection']
ğŸ” [prepare_context_for_node] input_data (before)=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ theme_id in raw_context: äº§å“å±•ç¤º
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ keywords_id in raw_context: ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ target_duration_id in raw_context: 20
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ user_description_id in raw_context: å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
ğŸ” [prepare_context_for_node] input_data (after)=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
ğŸ” [prepare_context_for_node] Final values:
    theme_id: äº§å“å±•ç¤º
    keywords_id: ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
    target_duration_id: 20
    user_description_id: å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
================================================================================

ğŸ¬ [execute_node] Prepared input keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
ğŸ¬ [execute_node] Execution context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection']
ğŸ¬ [execute_node] execution_context[theme_id] = äº§å“å±•ç¤º
ğŸ¬ [execute_node] execution_context[keywords_id] = ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
ğŸ¬ [execute_node] execution_context[target_duration_id] = 20
ğŸ¬ [execute_node] execution_context[user_description_id] = å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
ğŸ¬ [execute_node] Calling node.generate()...

ğŸ” [DEBUG] Node æ»¤é•œåº”ç”¨ validation:
ğŸ” [DEBUG] Context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection']
ğŸ” [DEBUG] Required inputs: ['transition_sequence_id', 'style_config_id']
ğŸ” [DEBUG] Checking parameter 'transition_sequence_id': exists=True, value=[]
ğŸ” [DEBUG] Checking parameter 'style_config_id': exists=False, value=NOT_FOUND
ğŸ” Node filter_application extracted outputs: ['filters', 'filter_sequence_id']
ğŸ¯ Context keys after filter_application: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection', 'filters', 'filter_sequence_id']
âœ… Node 10/16 completed: filter_application
2025-10-09 17:14:53,287 INFO sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.task_id AS tasks_task_id, tasks.theme AS tasks_theme, tasks.keywords AS tasks_keywords, tasks.target_duration AS tasks_target_duration, tasks.user_description AS tasks_user_description, tasks.config AS tasks_config, tasks.priority AS tasks_priority, tasks.status AS tasks_status, tasks.progress AS tasks_progress, tasks.message AS tasks_message, tasks.result AS tasks_result, tasks.output_url AS tasks_output_url, tasks.error_message AS tasks_error_message, tasks.retry_count AS tasks_retry_count, tasks.created_at AS tasks_created_at, tasks.started_at AS tasks_started_at, tasks.completed_at AS tasks_completed_at, tasks.processing_time AS tasks_processing_time, tasks.project_id AS tasks_project_id
FROM tasks
WHERE tasks.task_id = ?
 LIMIT ? OFFSET ?
2025-10-09 17:14:53,287 INFO sqlalchemy.engine.Engine [cached since 572.3s ago] ('3256dedc-aed9-46dd-8aa5-5b6b52802b3d', 1, 0)
2025-10-09 17:14:53,287 INFO sqlalchemy.engine.Engine UPDATE tasks SET progress=?, message=? WHERE tasks.id = ?
2025-10-09 17:14:53,287 INFO sqlalchemy.engine.Engine [cached since 467.5s ago] (62.5, 'æ­£åœ¨æ‰§è¡Œdynamic_effects', 103)
2025-10-09 17:14:53,288 INFO sqlalchemy.engine.Engine COMMIT
2025-10-09 17:14:53,288 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-09 17:14:53,288 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.task_id, tasks.theme, tasks.keywords, tasks.target_duration, tasks.user_description, tasks.config, tasks.priority, tasks.status, tasks.progress, tasks.message, tasks.result, tasks.output_url, tasks.error_message, tasks.retry_count, tasks.created_at, tasks.started_at, tasks.completed_at, tasks.processing_time, tasks.project_id
FROM tasks
WHERE tasks.id = ?
2025-10-09 17:14:53,288 INFO sqlalchemy.engine.Engine [cached since 572.3s ago] (103,)
âš¡ æ‰§è¡Œ node 11/16: dynamic_effects

ğŸ¬ [execute_node] Starting node: dynamic_effects
ğŸ¬ [execute_node] Input context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection', 'filters', 'filter_sequence_id', 'filter_application']
ğŸ¬ [execute_node] context[theme_id] = äº§å“å±•ç¤º
ğŸ¬ [execute_node] context[keywords_id] = ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
ğŸ¬ [execute_node] context[target_duration_id] = 20
ğŸ¬ [execute_node] context[user_description_id] = å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
ğŸ¬ [execute_node] Fixed context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection', 'filters', 'filter_sequence_id', 'filter_application']

================================================================================
ğŸ” [prepare_context_for_node] node_type=dynamic_effects
ğŸ” [prepare_context_for_node] raw_context keys=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection', 'filters', 'filter_sequence_id', 'filter_application']
ğŸ” [prepare_context_for_node] input_data (before)=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ theme_id in raw_context: äº§å“å±•ç¤º
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ keywords_id in raw_context: ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ target_duration_id in raw_context: 20
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ user_description_id in raw_context: å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
ğŸ” [prepare_context_for_node] input_data (after)=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
ğŸ” [prepare_context_for_node] Final values:
    theme_id: äº§å“å±•ç¤º
    keywords_id: ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
    target_duration_id: 20
    user_description_id: å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
================================================================================

ğŸ¬ [execute_node] Prepared input keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
ğŸ¬ [execute_node] Execution context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection', 'filters', 'filter_sequence_id', 'filter_application']
ğŸ¬ [execute_node] execution_context[theme_id] = äº§å“å±•ç¤º
ğŸ¬ [execute_node] execution_context[keywords_id] = ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
ğŸ¬ [execute_node] execution_context[target_duration_id] = 20
ğŸ¬ [execute_node] execution_context[user_description_id] = å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
ğŸ¬ [execute_node] Calling node.generate()...

ğŸ” [DEBUG] Node åŠ¨æ€ç‰¹æ•ˆæ·»åŠ  validation:
ğŸ” [DEBUG] Context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection', 'filters', 'filter_sequence_id', 'filter_application']
ğŸ” [DEBUG] Required inputs: ['filter_sequence_id', 'emotions_id', 'resolution']
ğŸ” [DEBUG] Checking parameter 'filter_sequence_id': exists=True, value=[]
ğŸ” [DEBUG] Checking parameter 'emotions_id': exists=True, value={'å†·é™': 74, 'åŠ±å¿—': 14, 'æ¿€æ˜‚': 12}
ğŸ” [DEBUG] Checking parameter 'resolution': exists=False, value=NOT_FOUND
ğŸ” Node dynamic_effects extracted outputs: ['effects', 'effects_sequence_id']
ğŸ¯ Context keys after dynamic_effects: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection', 'filters', 'filter_sequence_id', 'filter_application', 'effects', 'effects_sequence_id']
âœ… Node 11/16 completed: dynamic_effects
2025-10-09 17:14:53,289 INFO sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.task_id AS tasks_task_id, tasks.theme AS tasks_theme, tasks.keywords AS tasks_keywords, tasks.target_duration AS tasks_target_duration, tasks.user_description AS tasks_user_description, tasks.config AS tasks_config, tasks.priority AS tasks_priority, tasks.status AS tasks_status, tasks.progress AS tasks_progress, tasks.message AS tasks_message, tasks.result AS tasks_result, tasks.output_url AS tasks_output_url, tasks.error_message AS tasks_error_message, tasks.retry_count AS tasks_retry_count, tasks.created_at AS tasks_created_at, tasks.started_at AS tasks_started_at, tasks.completed_at AS tasks_completed_at, tasks.processing_time AS tasks_processing_time, tasks.project_id AS tasks_project_id
FROM tasks
WHERE tasks.task_id = ?
 LIMIT ? OFFSET ?
2025-10-09 17:14:53,289 INFO sqlalchemy.engine.Engine [cached since 572.3s ago] ('3256dedc-aed9-46dd-8aa5-5b6b52802b3d', 1, 0)
2025-10-09 17:14:53,289 INFO sqlalchemy.engine.Engine UPDATE tasks SET progress=?, message=? WHERE tasks.id = ?
2025-10-09 17:14:53,289 INFO sqlalchemy.engine.Engine [cached since 467.5s ago] (68.75, 'æ­£åœ¨æ‰§è¡Œaux_media_insertion', 103)
2025-10-09 17:14:53,289 INFO sqlalchemy.engine.Engine COMMIT
2025-10-09 17:14:53,289 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-09 17:14:53,289 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.task_id, tasks.theme, tasks.keywords, tasks.target_duration, tasks.user_description, tasks.config, tasks.priority, tasks.status, tasks.progress, tasks.message, tasks.result, tasks.output_url, tasks.error_message, tasks.retry_count, tasks.created_at, tasks.started_at, tasks.completed_at, tasks.processing_time, tasks.project_id
FROM tasks
WHERE tasks.id = ?
2025-10-09 17:14:53,289 INFO sqlalchemy.engine.Engine [cached since 572.3s ago] (103,)
âš¡ æ‰§è¡Œ node 12/16: aux_media_insertion

ğŸ¬ [execute_node] Starting node: aux_media_insertion
ğŸ¬ [execute_node] Input context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection', 'filters', 'filter_sequence_id', 'filter_application', 'effects', 'effects_sequence_id', 'dynamic_effects']
ğŸ¬ [execute_node] context[theme_id] = äº§å“å±•ç¤º
ğŸ¬ [execute_node] context[keywords_id] = ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
ğŸ¬ [execute_node] context[target_duration_id] = 20
ğŸ¬ [execute_node] context[user_description_id] = å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
ğŸ¬ [execute_node] Fixed context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection', 'filters', 'filter_sequence_id', 'filter_application', 'effects', 'effects_sequence_id', 'dynamic_effects']

================================================================================
ğŸ” [prepare_context_for_node] node_type=aux_media_insertion
ğŸ” [prepare_context_for_node] raw_context keys=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection', 'filters', 'filter_sequence_id', 'filter_application', 'effects', 'effects_sequence_id', 'dynamic_effects']
ğŸ” [prepare_context_for_node] input_data (before)=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ theme_id in raw_context: äº§å“å±•ç¤º
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ keywords_id in raw_context: ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ target_duration_id in raw_context: 20
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ user_description_id in raw_context: å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
ğŸ” [prepare_context_for_node] input_data (after)=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
ğŸ” [prepare_context_for_node] Final values:
    theme_id: äº§å“å±•ç¤º
    keywords_id: ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
    target_duration_id: 20
    user_description_id: å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
================================================================================

ğŸ¬ [execute_node] Prepared input keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
ğŸ¬ [execute_node] Execution context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection', 'filters', 'filter_sequence_id', 'filter_application', 'effects', 'effects_sequence_id', 'dynamic_effects']
ğŸ¬ [execute_node] execution_context[theme_id] = äº§å“å±•ç¤º
ğŸ¬ [execute_node] execution_context[keywords_id] = ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
ğŸ¬ [execute_node] execution_context[target_duration_id] = 20
ğŸ¬ [execute_node] execution_context[user_description_id] = å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
ğŸ¬ [execute_node] Calling node.generate()...

ğŸ” [DEBUG] Node é¢å¤–åª’ä½“æ’å…¥ validation:
ğŸ” [DEBUG] Context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection', 'filters', 'filter_sequence_id', 'filter_application', 'effects', 'effects_sequence_id', 'dynamic_effects']
ğŸ” [DEBUG] Required inputs: ['shot_blocks_id', 'video_genre', 'outline']
ğŸ” [DEBUG] Checking parameter 'shot_blocks_id': exists=True, value=[{'shot_type': 'ç‰¹å†™', 'duration': 5.0, 'visual_description': 'æ™ºèƒ½æŠ•å½±ä»ªçš„é•œå¤´ç¼“ç¼“å¯¹å‡†ç™½è‰²å¢™é¢ï¼ŒæŠ•å°„å‡ºä¸€æŸå…‰å¼€å§‹é€æ¸æ”¾å¤§ï¼Œç›´è‡³å……æ»¡æ•´ä¸ªç”»é¢ã€‚', 'pacing': 'æ…¢é•œå¤´', 'caption': 'å…‰å½±å¯å¹•', 'start_time': 0.0, 'end_time': 5.0}, {'shot_type': 'ä¸­æ™¯', 'duration': 6.0, 'visual_description': 'å¢™é¢ä¸Šå‡ºç°æ¸…æ™°ã€è‰²å½©é²œè‰³çš„ç”»é¢ï¼Œå±•ç¤ºç€ä¸€å¹…åŠ¨æ€çš„åŸå¸‚å¤œæ™¯å›¾ï¼Œç¯å…‰æµåŠ¨ï¼Œç»†èŠ‚ä¸°å¯Œã€‚', 'pacing': 'å¸¸è§„', 'caption': 'ç»šä¸½è§†ç•Œ', 'start_time': 5.0, 'end_time': 11.0}, {'shot_type': 'ç‰¹å†™', 'duration': 4.0, 'visual_description': 'èšç„¦äºæŠ•å½±ä»ªçš„æ§åˆ¶é¢æ¿ï¼Œæ‰‹æŒ‡è½»è§¦å±å¹•ä¸Šçš„æ’­æ”¾æŒ‰é’®ï¼Œç•Œé¢æµç•…åˆ‡æ¢è‡³ä¸‹ä¸€åœºæ™¯ã€‚', 'pacing': 'å¿«å‰ª', 'caption': 'ä¸€é”®åˆ‡æ¢', 'start_time': 11.0, 'end_time': 15.0}, {'shot_type': 'è¿‘æ™¯', 'duration': 5.0, 'visual_description': 'ä»æŠ•å½±ä»ªçš„è§’åº¦çœ‹å‘æˆ¿é—´å†…ï¼Œå¢™ä¸Šå±•ç°ç€ä¸€éƒ¨ç”µå½±çš„å¼€åœºç‰‡æ®µï¼Œå›¾åƒæ¸…æ™°åº¦æé«˜ï¼Œç»™äººèº«ä¸´å…¶å¢ƒä¹‹æ„Ÿã€‚', 'pacing': 'æ…¢é•œå¤´', 'caption': 'æ²‰æµ¸ä½“éªŒ', 'start_time': 15.0, 'end_time': 20.0}, {'shot_type': 'ç‰¹å†™', 'duration': 5.0, 'visual_description': 'æŠ•å½±ä»ªæŠ•å°„å‡ºçš„4Kè¶…æ¸…å›¾åƒï¼Œç”»é¢ç»†èŠ‚ä¸°å¯Œã€è‰²å½©é²œè‰³', 'pacing': 'æ…¢é•œå¤´', 'caption': '4Kè¶…æ¸…', 'start_time': 20.0, 'end_time': 25.0}, {'shot_type': 'ä¸­æ™¯', 'duration': 6.0, 'visual_description': 'ä¸€åªæ‰‹è½»è½»æ‹¿èµ·å°å·§è½»ä¾¿çš„æŠ•å½±ä»ªï¼Œæ”¾å…¥èƒŒåŒ…ä¸­ï¼Œå±•ç¤ºå…¶ä¾¿æºæ€§', 'pacing': 'å¸¸è§„', 'caption': 'éšèº«æºå¸¦', 'start_time': 25.0, 'end_time': 31.0}, {'shot_type': 'ç‰¹å†™', 'duration': 3.0, 'visual_description': 'æŠ•å½±ä»ªé¡¶éƒ¨çš„éº¦å…‹é£å­”ç‰¹å†™ï¼Œéšååˆ‡æ¢è‡³è®¾å¤‡å“åº”è¯­éŸ³å‘½ä»¤ï¼Œè‡ªåŠ¨è°ƒæ•´æŠ•å½±å†…å®¹', 'pacing': 'å¿«å‰ª', 'caption': 'è¯­éŸ³æ§åˆ¶', 'start_time': 31.0, 'end_time': 34.0}, {'shot_type': 'ç‰¹å†™', 'duration': 6.0, 'visual_description': 'æœ€ç»ˆæŠ•å½±ç”»é¢ç¨³å®šæ˜¾ç¤ºï¼Œç”»è´¨æ¸…æ™°é”åˆ©ï¼Œå†æ¬¡å¼ºè°ƒ4Kåˆ†è¾¨ç‡å¸¦æ¥çš„è§†è§‰äº«å—', 'pacing': 'æ…¢é•œå¤´', 'caption': 'æè‡´è§†ç•Œ', 'start_time': 34.0, 'end_time': 40.0}, {'shot_type': 'ç‰¹å†™', 'duration': 5.0, 'visual_description': 'äº§å“logoåœ¨é»‘è‰²èƒŒæ™¯ä¸­ç¼“ç¼“æ˜¾ç°ï¼Œå…‰èŠ’ä»logoä¸­å¿ƒå‘å››å‘¨æ‰©æ•£ï¼Œç…§äº®æ•´ä¸ªç”»é¢ã€‚', 'pacing': 'æ…¢é•œå¤´', 'caption': 'å“è´¨å…¸èŒƒ', 'start_time': 40.0, 'end_time': 45.0}, {'shot_type': 'ä¸­æ™¯', 'duration': 5.0, 'visual_description': 'äº§å“é™ç½®äºç®€çº¦çš„å±•ç¤ºå°ä¸Šï¼Œå‘¨å›´ç¯å¢ƒæ˜æš—ï¼Œåªæœ‰äº§å“è¢«æŸ”å’Œçš„å…‰çº¿åŒ…å›´ï¼Œæ˜¾å¾—æ ¼å¤–çªå‡ºã€‚é•œå¤´è½»å¾®æ¨è¿›ï¼Œèšç„¦äºäº§å“ä¸Šã€‚', 'pacing': 'å¸¸è§„', 'caption': 'ç»†èŠ‚è§çœŸç« ', 'start_time': 45.0, 'end_time': 50.0}, {'shot_type': 'ç‰¹å†™', 'duration': 5.0, 'visual_description': 'äº§å“çš„æŸä¸ªå…³é”®åŠŸèƒ½åŒºåŸŸï¼ˆå¦‚å±å¹•æˆ–æŒ‰é’®ï¼‰è½»è½»äº®èµ·ï¼Œæ˜¾ç¤ºç€å“ç‰Œåç§°å’Œäº§å“å‹å·ï¼Œå­—ä½“ä¼˜é›…ä¸”æ¸…æ™°å¯è§ã€‚', 'pacing': 'æ…¢é•œå¤´', 'caption': 'ç«‹å³ä½“éªŒæœªæ¥è§†ç•Œ', 'start_time': 50.0, 'end_time': 55.0}, {'shot_type': 'å®šæ ¼', 'duration': 5.0, 'visual_description': 'æœ€ç»ˆå®šæ ¼åœ¨å®Œæ•´çš„äº§å“å½¢è±¡ä¸Šï¼Œå“ç‰Œlogoä¸äº§å“åç§°ä¸€åŒå‡ºç°åœ¨ç”»é¢ä¸‹æ–¹ï¼Œç®€æ´æœ‰åŠ›ã€‚', 'pacing': 'å®šæ ¼', 'caption': 'å¼€å¯æ‚¨çš„ä¸“å±æ—…ç¨‹', 'start_time': 55.0, 'end_time': 60.0}]
ğŸ” [DEBUG] Checking parameter 'video_genre': exists=False, value=NOT_FOUND
ğŸ” [DEBUG] Checking parameter 'outline': exists=False, value=NOT_FOUND
INFO:watchfiles.main:2 changes detected
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'aux_media' for aux_media_insertion, using default
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'aux_media_timeline' for aux_media_insertion, using default
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'aux_media_types' for aux_media_insertion, using default
INFO:app:âœ… VGPèŠ‚ç‚¹æ‰§è¡ŒæˆåŠŸ: aux_media_insertion
INFO:app:ğŸ” Node aux_media_insertion extracted outputs: ['auxiliary_track_id']
INFO:app:ğŸ¯ Context keys after aux_media_insertion: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection', 'filters', 'filter_sequence_id', 'filter_application', 'effects', 'effects_sequence_id', 'dynamic_effects', 'auxiliary_track_id']
INFO:app:ğŸ“‹ Task 3256dedc-aed9-46dd-8aa5-5b6b52802b3d - Node 12: completed - aux_media_insertionæ‰§è¡Œå®Œæˆ
INFO:app:âœ… Node aux_media_insertion completed
INFO:sqlalchemy.engine.Engine:SELECT tasks.id AS tasks_id, tasks.task_id AS tasks_task_id, tasks.theme AS tasks_theme, tasks.keywords AS tasks_keywords, tasks.target_duration AS tasks_target_duration, tasks.user_description AS tasks_user_description, tasks.config AS tasks_config, tasks.priority AS tasks_priority, tasks.status AS tasks_status, tasks.progress AS tasks_progress, tasks.message AS tasks_message, tasks.result AS tasks_result, tasks.output_url AS tasks_output_url, tasks.error_message AS tasks_error_message, tasks.retry_count AS tasks_retry_count, tasks.created_at AS tasks_created_at, tasks.started_at AS tasks_started_at, tasks.completed_at AS tasks_completed_at, tasks.processing_time AS tasks_processing_time, tasks.project_id AS tasks_project_id
FROM tasks
WHERE tasks.task_id = ?
 LIMIT ? OFFSET ?
INFO:sqlalchemy.engine.Engine:[cached since 582.4s ago] ('3256dedc-aed9-46dd-8aa5-5b6b52802b3d', 1, 0)
INFO:sqlalchemy.engine.Engine:UPDATE tasks SET progress=?, message=? WHERE tasks.id = ?
INFO:sqlalchemy.engine.Engine:[cached since 477.6s ago] (75.0, 'æ­£åœ¨æ‰§è¡Œaux_text_insertion', 103)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT tasks.id, tasks.task_id, tasks.theme, tasks.keywords, tasks.target_duration, tasks.user_description, tasks.config, tasks.priority, tasks.status, tasks.progress, tasks.message, tasks.result, tasks.output_url, tasks.error_message, tasks.retry_count, tasks.created_at, tasks.started_at, tasks.completed_at, tasks.processing_time, tasks.project_id
FROM tasks
WHERE tasks.id = ?
INFO:sqlalchemy.engine.Engine:[cached since 582.4s ago] (103,)
INFO:app:ğŸ“‹ Task 3256dedc-aed9-46dd-8aa5-5b6b52802b3d - Node 13: processing - æ­£åœ¨æ‰§è¡Œaux_text_insertion
INFO:app:ğŸ¬ æ‰§è¡ŒVGPèŠ‚ç‚¹: aux_text_insertion - è£…é¥°æ–‡å­—æ’å…¥
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Unknown node type: multimodal_fusion
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'audio_track_id' for audio_processing, using default
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'audio_file_path' for audio_processing, using default
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'audio_duration' for audio_processing, using default
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Unknown node type: multimodal_fusion
INFO:video_generate_protocol.vgp_data_transformer:prepare_context_for_node: node_type=aux_text_insertion, raw_context keys=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection', 'filters', 'filter_sequence_id', 'filter_application', 'effects', 'effects_sequence_id', 'dynamic_effects', 'auxiliary_track_id', 'aux_media_insertion']
INFO:video_generate_protocol.vgp_data_transformer:prepare_context_for_node: æœ€ç»ˆå‡†å¤‡çš„ input_data keys=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
ğŸ” Node aux_media_insertion extracted outputs: ['auxiliary_track_id']
ğŸ¯ Context keys after aux_media_insertion: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection', 'filters', 'filter_sequence_id', 'filter_application', 'effects', 'effects_sequence_id', 'dynamic_effects', 'auxiliary_track_id']
âœ… Node 12/16 completed: aux_media_insertion
2025-10-09 17:15:03,330 INFO sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.task_id AS tasks_task_id, tasks.theme AS tasks_theme, tasks.keywords AS tasks_keywords, tasks.target_duration AS tasks_target_duration, tasks.user_description AS tasks_user_description, tasks.config AS tasks_config, tasks.priority AS tasks_priority, tasks.status AS tasks_status, tasks.progress AS tasks_progress, tasks.message AS tasks_message, tasks.result AS tasks_result, tasks.output_url AS tasks_output_url, tasks.error_message AS tasks_error_message, tasks.retry_count AS tasks_retry_count, tasks.created_at AS tasks_created_at, tasks.started_at AS tasks_started_at, tasks.completed_at AS tasks_completed_at, tasks.processing_time AS tasks_processing_time, tasks.project_id AS tasks_project_id
FROM tasks
WHERE tasks.task_id = ?
 LIMIT ? OFFSET ?
2025-10-09 17:15:03,330 INFO sqlalchemy.engine.Engine [cached since 582.4s ago] ('3256dedc-aed9-46dd-8aa5-5b6b52802b3d', 1, 0)
2025-10-09 17:15:03,331 INFO sqlalchemy.engine.Engine UPDATE tasks SET progress=?, message=? WHERE tasks.id = ?
2025-10-09 17:15:03,331 INFO sqlalchemy.engine.Engine [cached since 477.6s ago] (75.0, 'æ­£åœ¨æ‰§è¡Œaux_text_insertion', 103)
2025-10-09 17:15:03,332 INFO sqlalchemy.engine.Engine COMMIT
2025-10-09 17:15:03,334 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-09 17:15:03,334 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.task_id, tasks.theme, tasks.keywords, tasks.target_duration, tasks.user_description, tasks.config, tasks.priority, tasks.status, tasks.progress, tasks.message, tasks.result, tasks.output_url, tasks.error_message, tasks.retry_count, tasks.created_at, tasks.started_at, tasks.completed_at, tasks.processing_time, tasks.project_id
FROM tasks
WHERE tasks.id = ?
2025-10-09 17:15:03,334 INFO sqlalchemy.engine.Engine [cached since 582.4s ago] (103,)
âš¡ æ‰§è¡Œ node 13/16: aux_text_insertion

ğŸ¬ [execute_node] Starting node: aux_text_insertion
ğŸ¬ [execute_node] Input context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection', 'filters', 'filter_sequence_id', 'filter_application', 'effects', 'effects_sequence_id', 'dynamic_effects', 'auxiliary_track_id', 'aux_media_insertion']
ğŸ¬ [execute_node] context[theme_id] = äº§å“å±•ç¤º
ğŸ¬ [execute_node] context[keywords_id] = ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
ğŸ¬ [execute_node] context[target_duration_id] = 20
ğŸ¬ [execute_node] context[user_description_id] = å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
ğŸ¬ [execute_node] Fixed context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection', 'filters', 'filter_sequence_id', 'filter_application', 'effects', 'effects_sequence_id', 'dynamic_effects', 'auxiliary_track_id', 'aux_media_insertion']

================================================================================
ğŸ” [prepare_context_for_node] node_type=aux_text_insertion
ğŸ” [prepare_context_for_node] raw_context keys=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection', 'filters', 'filter_sequence_id', 'filter_application', 'effects', 'effects_sequence_id', 'dynamic_effects', 'auxiliary_track_id', 'aux_media_insertion']
ğŸ” [prepare_context_for_node] input_data (before)=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ theme_id in raw_context: äº§å“å±•ç¤º
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ keywords_id in raw_context: ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ target_duration_id in raw_context: 20
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ user_description_id in raw_context: å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
ğŸ” [prepare_context_for_node] input_data (after)=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
ğŸ” [prepare_context_for_node] Final values:
    theme_id: äº§å“å±•ç¤º
    keywords_id: ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
    target_duration_id: 20
    user_description_id: å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
================================================================================

ğŸ¬ [execute_node] Prepared input keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
ğŸ¬ [execute_node] Execution context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection', 'filters', 'filter_sequence_id', 'filter_application', 'effects', 'effects_sequence_id', 'dynamic_effects', 'auxiliary_track_id', 'aux_media_insertion']
ğŸ¬ [execute_node] execution_context[theme_id] = äº§å“å±•ç¤º
ğŸ¬ [execute_node] execution_context[keywords_id] = ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
ğŸ¬ [execute_node] execution_context[target_duration_id] = 20
ğŸ¬ [execute_node] execution_context[user_description_id] = å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
ğŸ¬ [execute_node] Calling node.generate()...

ğŸ” [DEBUG] Node è£…é¥°æ–‡å­—æ’å…¥ validation:
ğŸ” [DEBUG] Context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection', 'filters', 'filter_sequence_id', 'filter_application', 'effects', 'effects_sequence_id', 'dynamic_effects', 'auxiliary_track_id', 'aux_media_insertion']
ğŸ” [DEBUG] Required inputs: ['shot_blocks_id']
ğŸ” [DEBUG] Checking parameter 'shot_blocks_id': exists=True, value=[{'shot_type': 'ç‰¹å†™', 'duration': 5.0, 'visual_description': 'æ™ºèƒ½æŠ•å½±ä»ªçš„é•œå¤´ç¼“ç¼“å¯¹å‡†ç™½è‰²å¢™é¢ï¼ŒæŠ•å°„å‡ºä¸€æŸå…‰å¼€å§‹é€æ¸æ”¾å¤§ï¼Œç›´è‡³å……æ»¡æ•´ä¸ªç”»é¢ã€‚', 'pacing': 'æ…¢é•œå¤´', 'caption': 'å…‰å½±å¯å¹•', 'start_time': 0.0, 'end_time': 5.0}, {'shot_type': 'ä¸­æ™¯', 'duration': 6.0, 'visual_description': 'å¢™é¢ä¸Šå‡ºç°æ¸…æ™°ã€è‰²å½©é²œè‰³çš„ç”»é¢ï¼Œå±•ç¤ºç€ä¸€å¹…åŠ¨æ€çš„åŸå¸‚å¤œæ™¯å›¾ï¼Œç¯å…‰æµåŠ¨ï¼Œç»†èŠ‚ä¸°å¯Œã€‚', 'pacing': 'å¸¸è§„', 'caption': 'ç»šä¸½è§†ç•Œ', 'start_time': 5.0, 'end_time': 11.0}, {'shot_type': 'ç‰¹å†™', 'duration': 4.0, 'visual_description': 'èšç„¦äºæŠ•å½±ä»ªçš„æ§åˆ¶é¢æ¿ï¼Œæ‰‹æŒ‡è½»è§¦å±å¹•ä¸Šçš„æ’­æ”¾æŒ‰é’®ï¼Œç•Œé¢æµç•…åˆ‡æ¢è‡³ä¸‹ä¸€åœºæ™¯ã€‚', 'pacing': 'å¿«å‰ª', 'caption': 'ä¸€é”®åˆ‡æ¢', 'start_time': 11.0, 'end_time': 15.0}, {'shot_type': 'è¿‘æ™¯', 'duration': 5.0, 'visual_description': 'ä»æŠ•å½±ä»ªçš„è§’åº¦çœ‹å‘æˆ¿é—´å†…ï¼Œå¢™ä¸Šå±•ç°ç€ä¸€éƒ¨ç”µå½±çš„å¼€åœºç‰‡æ®µï¼Œå›¾åƒæ¸…æ™°åº¦æé«˜ï¼Œç»™äººèº«ä¸´å…¶å¢ƒä¹‹æ„Ÿã€‚', 'pacing': 'æ…¢é•œå¤´', 'caption': 'æ²‰æµ¸ä½“éªŒ', 'start_time': 15.0, 'end_time': 20.0}, {'shot_type': 'ç‰¹å†™', 'duration': 5.0, 'visual_description': 'æŠ•å½±ä»ªæŠ•å°„å‡ºçš„4Kè¶…æ¸…å›¾åƒï¼Œç”»é¢ç»†èŠ‚ä¸°å¯Œã€è‰²å½©é²œè‰³', 'pacing': 'æ…¢é•œå¤´', 'caption': '4Kè¶…æ¸…', 'start_time': 20.0, 'end_time': 25.0}, {'shot_type': 'ä¸­æ™¯', 'duration': 6.0, 'visual_description': 'ä¸€åªæ‰‹è½»è½»æ‹¿èµ·å°å·§è½»ä¾¿çš„æŠ•å½±ä»ªï¼Œæ”¾å…¥èƒŒåŒ…ä¸­ï¼Œå±•ç¤ºå…¶ä¾¿æºæ€§', 'pacing': 'å¸¸è§„', 'caption': 'éšèº«æºå¸¦', 'start_time': 25.0, 'end_time': 31.0}, {'shot_type': 'ç‰¹å†™', 'duration': 3.0, 'visual_description': 'æŠ•å½±ä»ªé¡¶éƒ¨çš„éº¦å…‹é£å­”ç‰¹å†™ï¼Œéšååˆ‡æ¢è‡³è®¾å¤‡å“åº”è¯­éŸ³å‘½ä»¤ï¼Œè‡ªåŠ¨è°ƒæ•´æŠ•å½±å†…å®¹', 'pacing': 'å¿«å‰ª', 'caption': 'è¯­éŸ³æ§åˆ¶', 'start_time': 31.0, 'end_time': 34.0}, {'shot_type': 'ç‰¹å†™', 'duration': 6.0, 'visual_description': 'æœ€ç»ˆæŠ•å½±ç”»é¢ç¨³å®šæ˜¾ç¤ºï¼Œç”»è´¨æ¸…æ™°é”åˆ©ï¼Œå†æ¬¡å¼ºè°ƒ4Kåˆ†è¾¨ç‡å¸¦æ¥çš„è§†è§‰äº«å—', 'pacing': 'æ…¢é•œå¤´', 'caption': 'æè‡´è§†ç•Œ', 'start_time': 34.0, 'end_time': 40.0}, {'shot_type': 'ç‰¹å†™', 'duration': 5.0, 'visual_description': 'äº§å“logoåœ¨é»‘è‰²èƒŒæ™¯ä¸­ç¼“ç¼“æ˜¾ç°ï¼Œå…‰èŠ’ä»logoä¸­å¿ƒå‘å››å‘¨æ‰©æ•£ï¼Œç…§äº®æ•´ä¸ªç”»é¢ã€‚', 'pacing': 'æ…¢é•œå¤´', 'caption': 'å“è´¨å…¸èŒƒ', 'start_time': 40.0, 'end_time': 45.0}, {'shot_type': 'ä¸­æ™¯', 'duration': 5.0, 'visual_description': 'äº§å“é™ç½®äºç®€çº¦çš„å±•ç¤ºå°ä¸Šï¼Œå‘¨å›´ç¯å¢ƒæ˜æš—ï¼Œåªæœ‰äº§å“è¢«æŸ”å’Œçš„å…‰çº¿åŒ…å›´ï¼Œæ˜¾å¾—æ ¼å¤–çªå‡ºã€‚é•œå¤´è½»å¾®æ¨è¿›ï¼Œèšç„¦äºäº§å“ä¸Šã€‚', 'pacing': 'å¸¸è§„', 'caption': 'ç»†èŠ‚è§çœŸç« ', 'start_time': 45.0, 'end_time': 50.0}, {'shot_type': 'ç‰¹å†™', 'duration': 5.0, 'visual_description': 'äº§å“çš„æŸä¸ªå…³é”®åŠŸèƒ½åŒºåŸŸï¼ˆå¦‚å±å¹•æˆ–æŒ‰é’®ï¼‰è½»è½»äº®èµ·ï¼Œæ˜¾ç¤ºç€å“ç‰Œåç§°å’Œäº§å“å‹å·ï¼Œå­—ä½“ä¼˜é›…ä¸”æ¸…æ™°å¯è§ã€‚', 'pacing': 'æ…¢é•œå¤´', 'caption': 'ç«‹å³ä½“éªŒæœªæ¥è§†ç•Œ', 'start_time': 50.0, 'end_time': 55.0}, {'shot_type': 'å®šæ ¼', 'duration': 5.0, 'visual_description': 'æœ€ç»ˆå®šæ ¼åœ¨å®Œæ•´çš„äº§å“å½¢è±¡ä¸Šï¼Œå“ç‰Œlogoä¸äº§å“åç§°ä¸€åŒå‡ºç°åœ¨ç”»é¢ä¸‹æ–¹ï¼Œç®€æ´æœ‰åŠ›ã€‚', 'pacing': 'å®šæ ¼', 'caption': 'å¼€å¯æ‚¨çš„ä¸“å±æ—…ç¨‹', 'start_time': 55.0, 'end_time': 60.0}]
INFO:watchfiles.main:2 changes detected
[âœ… æ–‡æœ¬åˆ†ææˆåŠŸ] ç”Ÿæˆæ–‡å­—: 'å…‰å½±æµè½¬' @ top-center
[âœ… æ–‡æœ¬åˆ†ææˆåŠŸ] ç”Ÿæˆæ–‡å­—: 'æè‡´ç”»è´¨' @ bottom-center
[âœ… æ–‡æœ¬åˆ†ææˆåŠŸ] ç”Ÿæˆæ–‡å­—: 'æ¸…æ™°æ— ç•Œ' @ bottom-right
ğŸ” Node aux_text_insertion extracted outputs: ['text_overlay_track_id']
ğŸ¯ Context keys after aux_text_insertion: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection', 'filters', 'filter_sequence_id', 'filter_application', 'effects', 'effects_sequence_id', 'dynamic_effects', 'auxiliary_track_id', 'aux_media_insertion', 'text_overlay_track_id']
âœ… Node 13/16 completed: aux_text_insertion
2025-10-09 17:16:31,297 INFO sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.task_id AS tasks_task_id, tasks.theme AS tasks_theme, tasks.keywords AS tasks_keywords, tasks.target_duration AS tasks_target_duration, tasks.user_description AS tasks_user_description, tasks.config AS tasks_config, tasks.priority AS tasks_priority, tasks.status AS tasks_status, tasks.progress AS tasks_progress, tasks.message AS tasks_message, tasks.result AS tasks_result, tasks.output_url AS tasks_output_url, tasks.error_message AS tasks_error_message, tasks.retry_count AS tasks_retry_count, tasks.created_at AS tasks_created_at, tasks.started_at AS tasks_started_at, tasks.completed_at AS tasks_completed_at, tasks.processing_time AS tasks_processing_time, tasks.project_id AS tasks_project_id
FROM tasks
WHERE tasks.task_id = ?
 LIMIT ? OFFSET ?
2025-10-09 17:16:31,297 INFO sqlalchemy.engine.Engine [cached since 670.3s ago] ('3256dedc-aed9-46dd-8aa5-5b6b52802b3d', 1, 0)
2025-10-09 17:16:31,298 INFO sqlalchemy.engine.Engine UPDATE tasks SET progress=?, message=? WHERE tasks.id = ?
2025-10-09 17:16:31,298 INFO sqlalchemy.engine.Engine [cached since 565.5s ago] (81.25, 'æ­£åœ¨æ‰§è¡Œsubtitle_generation', 103)
2025-10-09 17:16:31,299 INFO sqlalchemy.engine.Engine COMMIT
2025-10-09 17:16:31,300 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-09 17:16:31,300 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.task_id, tasks.theme, tasks.keywords, tasks.target_duration, tasks.user_description, tasks.config, tasks.priority, tasks.status, tasks.progress, tasks.message, tasks.result, tasks.output_url, tasks.error_message, tasks.retry_count, tasks.created_at, tasks.started_at, tasks.completed_at, tasks.processing_time, tasks.project_id
FROM tasks
WHERE tasks.id = ?
2025-10-09 17:16:31,300 INFO sqlalchemy.engine.Engine [cached since 670.3s ago] (103,)
âš¡ æ‰§è¡Œ node 14/16: subtitle_generation

ğŸ¬ [execute_node] Starting node: subtitle_generation
ğŸ¬ [execute_node] Input context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection', 'filters', 'filter_sequence_id', 'filter_application', 'effects', 'effects_sequence_id', 'dynamic_effects', 'auxiliary_track_id', 'aux_media_insertion', 'text_overlay_track_id', 'aux_text_insertion']
ğŸ¬ [execute_node] context[theme_id] = äº§å“å±•ç¤º
ğŸ¬ [execute_node] context[keywords_id] = ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
ğŸ¬ [execute_node] context[target_duration_id] = 20
ğŸ¬ [execute_node] context[user_description_id] = å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
ğŸ¬ [execute_node] Fixed context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection', 'filters', 'filter_sequence_id', 'filter_application', 'effects', 'effects_sequence_id', 'dynamic_effects', 'auxiliary_track_id', 'aux_media_insertion', 'text_overlay_track_id', 'aux_text_insertion']

================================================================================
ğŸ” [prepare_context_for_node] node_type=subtitle_generation
ğŸ” [prepare_context_for_node] raw_context keys=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection', 'filters', 'filter_sequence_id', 'filter_application', 'effects', 'effects_sequence_id', 'dynamic_effects', 'auxiliary_track_id', 'aux_media_insertion', 'text_overlay_track_id', 'aux_text_insertion']
ğŸ” [prepare_context_for_node] input_data (before)=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ theme_id in raw_context: äº§å“å±•ç¤º
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ keywords_id in raw_context: ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ target_duration_id in raw_context: 20
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ user_description_id in raw_context: å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
ğŸ” [prepare_context_for_node] input_data (after)=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
ğŸ” [prepare_context_for_node] Final values:
    theme_id: äº§å“å±•ç¤º
    keywords_id: ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
    target_duration_id: 20
    user_description_id: å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
================================================================================

ğŸ¬ [execute_node] Prepared input keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
ğŸ¬ [execute_node] Execution context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection', 'filters', 'filter_sequence_id', 'filter_application', 'effects', 'effects_sequence_id', 'dynamic_effects', 'auxiliary_track_id', 'aux_media_insertion', 'text_overlay_track_id', 'aux_text_insertion']
ğŸ¬ [execute_node] execution_context[theme_id] = äº§å“å±•ç¤º
ğŸ¬ [execute_node] execution_context[keywords_id] = ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
ğŸ¬ [execute_node] execution_context[target_duration_id] = 20
ğŸ¬ [execute_node] execution_context[user_description_id] = å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
ğŸ¬ [execute_node] Calling node.generate()...

ğŸ” [DEBUG] Node å­—å¹•ç”Ÿæˆ validation:
ğŸ” [DEBUG] Context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection', 'filters', 'filter_sequence_id', 'filter_application', 'effects', 'effects_sequence_id', 'dynamic_effects', 'auxiliary_track_id', 'aux_media_insertion', 'text_overlay_track_id', 'aux_text_insertion']
ğŸ” [DEBUG] Required inputs: ['shot_blocks_id', 'video_width', 'video_height']
ğŸ” [DEBUG] Checking parameter 'shot_blocks_id': exists=True, value=[{'shot_type': 'ç‰¹å†™', 'duration': 5.0, 'visual_description': 'æ™ºèƒ½æŠ•å½±ä»ªçš„é•œå¤´ç¼“ç¼“å¯¹å‡†ç™½è‰²å¢™é¢ï¼ŒæŠ•å°„å‡ºä¸€æŸå…‰å¼€å§‹é€æ¸æ”¾å¤§ï¼Œç›´è‡³å……æ»¡æ•´ä¸ªç”»é¢ã€‚', 'pacing': 'æ…¢é•œå¤´', 'caption': 'å…‰å½±å¯å¹•', 'start_time': 0.0, 'end_time': 5.0}, {'shot_type': 'ä¸­æ™¯', 'duration': 6.0, 'visual_description': 'å¢™é¢ä¸Šå‡ºç°æ¸…æ™°ã€è‰²å½©é²œè‰³çš„ç”»é¢ï¼Œå±•ç¤ºç€ä¸€å¹…åŠ¨æ€çš„åŸå¸‚å¤œæ™¯å›¾ï¼Œç¯å…‰æµåŠ¨ï¼Œç»†èŠ‚ä¸°å¯Œã€‚', 'pacing': 'å¸¸è§„', 'caption': 'ç»šä¸½è§†ç•Œ', 'start_time': 5.0, 'end_time': 11.0}, {'shot_type': 'ç‰¹å†™', 'duration': 4.0, 'visual_description': 'èšç„¦äºæŠ•å½±ä»ªçš„æ§åˆ¶é¢æ¿ï¼Œæ‰‹æŒ‡è½»è§¦å±å¹•ä¸Šçš„æ’­æ”¾æŒ‰é’®ï¼Œç•Œé¢æµç•…åˆ‡æ¢è‡³ä¸‹ä¸€åœºæ™¯ã€‚', 'pacing': 'å¿«å‰ª', 'caption': 'ä¸€é”®åˆ‡æ¢', 'start_time': 11.0, 'end_time': 15.0}, {'shot_type': 'è¿‘æ™¯', 'duration': 5.0, 'visual_description': 'ä»æŠ•å½±ä»ªçš„è§’åº¦çœ‹å‘æˆ¿é—´å†…ï¼Œå¢™ä¸Šå±•ç°ç€ä¸€éƒ¨ç”µå½±çš„å¼€åœºç‰‡æ®µï¼Œå›¾åƒæ¸…æ™°åº¦æé«˜ï¼Œç»™äººèº«ä¸´å…¶å¢ƒä¹‹æ„Ÿã€‚', 'pacing': 'æ…¢é•œå¤´', 'caption': 'æ²‰æµ¸ä½“éªŒ', 'start_time': 15.0, 'end_time': 20.0}, {'shot_type': 'ç‰¹å†™', 'duration': 5.0, 'visual_description': 'æŠ•å½±ä»ªæŠ•å°„å‡ºçš„4Kè¶…æ¸…å›¾åƒï¼Œç”»é¢ç»†èŠ‚ä¸°å¯Œã€è‰²å½©é²œè‰³', 'pacing': 'æ…¢é•œå¤´', 'caption': '4Kè¶…æ¸…', 'start_time': 20.0, 'end_time': 25.0}, {'shot_type': 'ä¸­æ™¯', 'duration': 6.0, 'visual_description': 'ä¸€åªæ‰‹è½»è½»æ‹¿èµ·å°å·§è½»ä¾¿çš„æŠ•å½±ä»ªï¼Œæ”¾å…¥èƒŒåŒ…ä¸­ï¼Œå±•ç¤ºå…¶ä¾¿æºæ€§', 'pacing': 'å¸¸è§„', 'caption': 'éšèº«æºå¸¦', 'start_time': 25.0, 'end_time': 31.0}, {'shot_type': 'ç‰¹å†™', 'duration': 3.0, 'visual_description': 'æŠ•å½±ä»ªé¡¶éƒ¨çš„éº¦å…‹é£å­”ç‰¹å†™ï¼Œéšååˆ‡æ¢è‡³è®¾å¤‡å“åº”è¯­éŸ³å‘½ä»¤ï¼Œè‡ªåŠ¨è°ƒæ•´æŠ•å½±å†…å®¹', 'pacing': 'å¿«å‰ª', 'caption': 'è¯­éŸ³æ§åˆ¶', 'start_time': 31.0, 'end_time': 34.0}, {'shot_type': 'ç‰¹å†™', 'duration': 6.0, 'visual_description': 'æœ€ç»ˆæŠ•å½±ç”»é¢ç¨³å®šæ˜¾ç¤ºï¼Œç”»è´¨æ¸…æ™°é”åˆ©ï¼Œå†æ¬¡å¼ºè°ƒ4Kåˆ†è¾¨ç‡å¸¦æ¥çš„è§†è§‰äº«å—', 'pacing': 'æ…¢é•œå¤´', 'caption': 'æè‡´è§†ç•Œ', 'start_time': 34.0, 'end_time': 40.0}, {'shot_type': 'ç‰¹å†™', 'duration': 5.0, 'visual_description': 'äº§å“logoåœ¨é»‘è‰²èƒŒæ™¯ä¸­ç¼“ç¼“æ˜¾ç°ï¼Œå…‰èŠ’ä»logoä¸­å¿ƒå‘å››å‘¨æ‰©æ•£ï¼Œç…§äº®æ•´ä¸ªç”»é¢ã€‚', 'pacing': 'æ…¢é•œå¤´', 'caption': 'å“è´¨å…¸èŒƒ', 'start_time': 40.0, 'end_time': 45.0}, {'shot_type': 'ä¸­æ™¯', 'duration': 5.0, 'visual_description': 'äº§å“é™ç½®äºç®€çº¦çš„å±•ç¤ºå°ä¸Šï¼Œå‘¨å›´ç¯å¢ƒæ˜æš—ï¼Œåªæœ‰äº§å“è¢«æŸ”å’Œçš„å…‰çº¿åŒ…å›´ï¼Œæ˜¾å¾—æ ¼å¤–çªå‡ºã€‚é•œå¤´è½»å¾®æ¨è¿›ï¼Œèšç„¦äºäº§å“ä¸Šã€‚', 'pacing': 'å¸¸è§„', 'caption': 'ç»†èŠ‚è§çœŸç« ', 'start_time': 45.0, 'end_time': 50.0}, {'shot_type': 'ç‰¹å†™', 'duration': 5.0, 'visual_description': 'äº§å“çš„æŸä¸ªå…³é”®åŠŸèƒ½åŒºåŸŸï¼ˆå¦‚å±å¹•æˆ–æŒ‰é’®ï¼‰è½»è½»äº®èµ·ï¼Œæ˜¾ç¤ºç€å“ç‰Œåç§°å’Œäº§å“å‹å·ï¼Œå­—ä½“ä¼˜é›…ä¸”æ¸…æ™°å¯è§ã€‚', 'pacing': 'æ…¢é•œå¤´', 'caption': 'ç«‹å³ä½“éªŒæœªæ¥è§†ç•Œ', 'start_time': 50.0, 'end_time': 55.0}, {'shot_type': 'å®šæ ¼', 'duration': 5.0, 'visual_description': 'æœ€ç»ˆå®šæ ¼åœ¨å®Œæ•´çš„äº§å“å½¢è±¡ä¸Šï¼Œå“ç‰Œlogoä¸äº§å“åç§°ä¸€åŒå‡ºç°åœ¨ç”»é¢ä¸‹æ–¹ï¼Œç®€æ´æœ‰åŠ›ã€‚', 'pacing': 'å®šæ ¼', 'caption': 'å¼€å¯æ‚¨çš„ä¸“å±æ—…ç¨‹', 'start_time': 55.0, 'end_time': 60.0}]
ğŸ” [DEBUG] Checking parameter 'video_width': exists=False, value=NOT_FOUND
ğŸ” [DEBUG] Checking parameter 'video_height': exists=False, value=NOT_FOUND
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'text_overlays' for aux_text_insertion, using default
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'text_timeline' for aux_text_insertion, using default
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'text_styles' for aux_text_insertion, using default
INFO:app:âœ… VGPèŠ‚ç‚¹æ‰§è¡ŒæˆåŠŸ: aux_text_insertion
INFO:app:ğŸ” Node aux_text_insertion extracted outputs: ['text_overlay_track_id']
INFO:app:ğŸ¯ Context keys after aux_text_insertion: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection', 'filters', 'filter_sequence_id', 'filter_application', 'effects', 'effects_sequence_id', 'dynamic_effects', 'auxiliary_track_id', 'aux_media_insertion', 'text_overlay_track_id']
INFO:app:ğŸ“‹ Task 3256dedc-aed9-46dd-8aa5-5b6b52802b3d - Node 13: completed - aux_text_insertionæ‰§è¡Œå®Œæˆ
INFO:app:âœ… Node aux_text_insertion completed
INFO:sqlalchemy.engine.Engine:SELECT tasks.id AS tasks_id, tasks.task_id AS tasks_task_id, tasks.theme AS tasks_theme, tasks.keywords AS tasks_keywords, tasks.target_duration AS tasks_target_duration, tasks.user_description AS tasks_user_description, tasks.config AS tasks_config, tasks.priority AS tasks_priority, tasks.status AS tasks_status, tasks.progress AS tasks_progress, tasks.message AS tasks_message, tasks.result AS tasks_result, tasks.output_url AS tasks_output_url, tasks.error_message AS tasks_error_message, tasks.retry_count AS tasks_retry_count, tasks.created_at AS tasks_created_at, tasks.started_at AS tasks_started_at, tasks.completed_at AS tasks_completed_at, tasks.processing_time AS tasks_processing_time, tasks.project_id AS tasks_project_id
FROM tasks
WHERE tasks.task_id = ?
 LIMIT ? OFFSET ?
INFO:sqlalchemy.engine.Engine:[cached since 670.3s ago] ('3256dedc-aed9-46dd-8aa5-5b6b52802b3d', 1, 0)
INFO:sqlalchemy.engine.Engine:UPDATE tasks SET progress=?, message=? WHERE tasks.id = ?
INFO:sqlalchemy.engine.Engine:[cached since 565.5s ago] (81.25, 'æ­£åœ¨æ‰§è¡Œsubtitle_generation', 103)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT tasks.id, tasks.task_id, tasks.theme, tasks.keywords, tasks.target_duration, tasks.user_description, tasks.config, tasks.priority, tasks.status, tasks.progress, tasks.message, tasks.result, tasks.output_url, tasks.error_message, tasks.retry_count, tasks.created_at, tasks.started_at, tasks.completed_at, tasks.processing_time, tasks.project_id
FROM tasks
WHERE tasks.id = ?
INFO:sqlalchemy.engine.Engine:[cached since 670.3s ago] (103,)
INFO:app:ğŸ“‹ Task 3256dedc-aed9-46dd-8aa5-5b6b52802b3d - Node 14: processing - æ­£åœ¨æ‰§è¡Œsubtitle_generation
INFO:app:ğŸ¬ æ‰§è¡ŒVGPèŠ‚ç‚¹: subtitle_generation - å­—å¹•ç”Ÿæˆ
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Unknown node type: multimodal_fusion
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'audio_track_id' for audio_processing, using default
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'audio_file_path' for audio_processing, using default
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'audio_duration' for audio_processing, using default
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Unknown node type: multimodal_fusion
INFO:video_generate_protocol.vgp_data_transformer:prepare_context_for_node: node_type=subtitle_generation, raw_context keys=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection', 'filters', 'filter_sequence_id', 'filter_application', 'effects', 'effects_sequence_id', 'dynamic_effects', 'auxiliary_track_id', 'aux_media_insertion', 'text_overlay_track_id', 'aux_text_insertion']
INFO:video_generate_protocol.vgp_data_transformer:prepare_context_for_node: æœ€ç»ˆå‡†å¤‡çš„ input_data keys=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
INFO:watchfiles.main:2 changes detected
WARNING:llm.qwen:JSON validation failed: Missing required fields: ['type', 'properties', 'required']
WARNING:llm.qwen:QwenLLMç”Ÿæˆå¤±è´¥: Missing required fields: ['type', 'properties', 'required']
[é¢œè‰²å†³ç­–] ä½¿ç”¨é»˜è®¤é¢œè‰²
ğŸ” Node subtitle_generation extracted outputs: ['subtitle_sequence_id', 'tts_track_id']
ğŸ¯ Context keys after subtitle_generation: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection', 'filters', 'filter_sequence_id', 'filter_application', 'effects', 'effects_sequence_id', 'dynamic_effects', 'auxiliary_track_id', 'aux_media_insertion', 'text_overlay_track_id', 'aux_text_insertion', 'subtitle_sequence_id', 'tts_track_id']
âœ… Node 14/16 completed: subtitle_generation
2025-10-09 17:17:18,368 INFO sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.task_id AS tasks_task_id, tasks.theme AS tasks_theme, tasks.keywords AS tasks_keywords, tasks.target_duration AS tasks_target_duration, tasks.user_description AS tasks_user_description, tasks.config AS tasks_config, tasks.priority AS tasks_priority, tasks.status AS tasks_status, tasks.progress AS tasks_progress, tasks.message AS tasks_message, tasks.result AS tasks_result, tasks.output_url AS tasks_output_url, tasks.error_message AS tasks_error_message, tasks.retry_count AS tasks_retry_count, tasks.created_at AS tasks_created_at, tasks.started_at AS tasks_started_at, tasks.completed_at AS tasks_completed_at, tasks.processing_time AS tasks_processing_time, tasks.project_id AS tasks_project_id
FROM tasks
WHERE tasks.task_id = ?
 LIMIT ? OFFSET ?
2025-10-09 17:17:18,368 INFO sqlalchemy.engine.Engine [cached since 717.4s ago] ('3256dedc-aed9-46dd-8aa5-5b6b52802b3d', 1, 0)
2025-10-09 17:17:18,370 INFO sqlalchemy.engine.Engine UPDATE tasks SET progress=?, message=? WHERE tasks.id = ?
2025-10-09 17:17:18,370 INFO sqlalchemy.engine.Engine [cached since 612.6s ago] (87.5, 'æ­£åœ¨æ‰§è¡Œintro_outro', 103)
2025-10-09 17:17:18,371 INFO sqlalchemy.engine.Engine COMMIT
2025-10-09 17:17:18,372 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-09 17:17:18,373 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.task_id, tasks.theme, tasks.keywords, tasks.target_duration, tasks.user_description, tasks.config, tasks.priority, tasks.status, tasks.progress, tasks.message, tasks.result, tasks.output_url, tasks.error_message, tasks.retry_count, tasks.created_at, tasks.started_at, tasks.completed_at, tasks.processing_time, tasks.project_id
FROM tasks
WHERE tasks.id = ?
2025-10-09 17:17:18,373 INFO sqlalchemy.engine.Engine [cached since 717.4s ago] (103,)
âš¡ æ‰§è¡Œ node 15/16: intro_outro

ğŸ¬ [execute_node] Starting node: intro_outro
ğŸ¬ [execute_node] Input context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection', 'filters', 'filter_sequence_id', 'filter_application', 'effects', 'effects_sequence_id', 'dynamic_effects', 'auxiliary_track_id', 'aux_media_insertion', 'text_overlay_track_id', 'aux_text_insertion', 'subtitle_sequence_id', 'tts_track_id', 'subtitle_generation']
ğŸ¬ [execute_node] context[theme_id] = äº§å“å±•ç¤º
ğŸ¬ [execute_node] context[keywords_id] = ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
ğŸ¬ [execute_node] context[target_duration_id] = 20
ğŸ¬ [execute_node] context[user_description_id] = å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
ğŸ¬ [execute_node] Fixed context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection', 'filters', 'filter_sequence_id', 'filter_application', 'effects', 'effects_sequence_id', 'dynamic_effects', 'auxiliary_track_id', 'aux_media_insertion', 'text_overlay_track_id', 'aux_text_insertion', 'subtitle_sequence_id', 'tts_track_id', 'subtitle_generation']

================================================================================
ğŸ” [prepare_context_for_node] node_type=intro_outro
ğŸ” [prepare_context_for_node] raw_context keys=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection', 'filters', 'filter_sequence_id', 'filter_application', 'effects', 'effects_sequence_id', 'dynamic_effects', 'auxiliary_track_id', 'aux_media_insertion', 'text_overlay_track_id', 'aux_text_insertion', 'subtitle_sequence_id', 'tts_track_id', 'subtitle_generation']
ğŸ” [prepare_context_for_node] input_data (before)=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ theme_id in raw_context: äº§å“å±•ç¤º
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ keywords_id in raw_context: ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ target_duration_id in raw_context: 20
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ user_description_id in raw_context: å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
ğŸ” [prepare_context_for_node] input_data (after)=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
ğŸ” [prepare_context_for_node] Final values:
    theme_id: äº§å“å±•ç¤º
    keywords_id: ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
    target_duration_id: 20
    user_description_id: å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
================================================================================

ğŸ¬ [execute_node] Prepared input keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
ğŸ¬ [execute_node] Execution context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection', 'filters', 'filter_sequence_id', 'filter_application', 'effects', 'effects_sequence_id', 'dynamic_effects', 'auxiliary_track_id', 'aux_media_insertion', 'text_overlay_track_id', 'aux_text_insertion', 'subtitle_sequence_id', 'tts_track_id', 'subtitle_generation']
ğŸ¬ [execute_node] execution_context[theme_id] = äº§å“å±•ç¤º
ğŸ¬ [execute_node] execution_context[keywords_id] = ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
ğŸ¬ [execute_node] execution_context[target_duration_id] = 20
ğŸ¬ [execute_node] execution_context[user_description_id] = å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
ğŸ¬ [execute_node] Calling node.generate()...

ğŸ” [DEBUG] Node ç‰‡å¤´ç‰‡å°¾ç”Ÿæˆ validation:
ğŸ” [DEBUG] Context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection', 'filters', 'filter_sequence_id', 'filter_application', 'effects', 'effects_sequence_id', 'dynamic_effects', 'auxiliary_track_id', 'aux_media_insertion', 'text_overlay_track_id', 'aux_text_insertion', 'subtitle_sequence_id', 'tts_track_id', 'subtitle_generation']
ğŸ” [DEBUG] Required inputs: ['shot_blocks_id', 'video_topic', 'force_intro', 'force_outro']
ğŸ” [DEBUG] Checking parameter 'shot_blocks_id': exists=True, value=[{'shot_type': 'ç‰¹å†™', 'duration': 5.0, 'visual_description': 'æ™ºèƒ½æŠ•å½±ä»ªçš„é•œå¤´ç¼“ç¼“å¯¹å‡†ç™½è‰²å¢™é¢ï¼ŒæŠ•å°„å‡ºä¸€æŸå…‰å¼€å§‹é€æ¸æ”¾å¤§ï¼Œç›´è‡³å……æ»¡æ•´ä¸ªç”»é¢ã€‚', 'pacing': 'æ…¢é•œå¤´', 'caption': 'å…‰å½±å¯å¹•', 'start_time': 0.0, 'end_time': 5.0}, {'shot_type': 'ä¸­æ™¯', 'duration': 6.0, 'visual_description': 'å¢™é¢ä¸Šå‡ºç°æ¸…æ™°ã€è‰²å½©é²œè‰³çš„ç”»é¢ï¼Œå±•ç¤ºç€ä¸€å¹…åŠ¨æ€çš„åŸå¸‚å¤œæ™¯å›¾ï¼Œç¯å…‰æµåŠ¨ï¼Œç»†èŠ‚ä¸°å¯Œã€‚', 'pacing': 'å¸¸è§„', 'caption': 'ç»šä¸½è§†ç•Œ', 'start_time': 5.0, 'end_time': 11.0}, {'shot_type': 'ç‰¹å†™', 'duration': 4.0, 'visual_description': 'èšç„¦äºæŠ•å½±ä»ªçš„æ§åˆ¶é¢æ¿ï¼Œæ‰‹æŒ‡è½»è§¦å±å¹•ä¸Šçš„æ’­æ”¾æŒ‰é’®ï¼Œç•Œé¢æµç•…åˆ‡æ¢è‡³ä¸‹ä¸€åœºæ™¯ã€‚', 'pacing': 'å¿«å‰ª', 'caption': 'ä¸€é”®åˆ‡æ¢', 'start_time': 11.0, 'end_time': 15.0}, {'shot_type': 'è¿‘æ™¯', 'duration': 5.0, 'visual_description': 'ä»æŠ•å½±ä»ªçš„è§’åº¦çœ‹å‘æˆ¿é—´å†…ï¼Œå¢™ä¸Šå±•ç°ç€ä¸€éƒ¨ç”µå½±çš„å¼€åœºç‰‡æ®µï¼Œå›¾åƒæ¸…æ™°åº¦æé«˜ï¼Œç»™äººèº«ä¸´å…¶å¢ƒä¹‹æ„Ÿã€‚', 'pacing': 'æ…¢é•œå¤´', 'caption': 'æ²‰æµ¸ä½“éªŒ', 'start_time': 15.0, 'end_time': 20.0}, {'shot_type': 'ç‰¹å†™', 'duration': 5.0, 'visual_description': 'æŠ•å½±ä»ªæŠ•å°„å‡ºçš„4Kè¶…æ¸…å›¾åƒï¼Œç”»é¢ç»†èŠ‚ä¸°å¯Œã€è‰²å½©é²œè‰³', 'pacing': 'æ…¢é•œå¤´', 'caption': '4Kè¶…æ¸…', 'start_time': 20.0, 'end_time': 25.0}, {'shot_type': 'ä¸­æ™¯', 'duration': 6.0, 'visual_description': 'ä¸€åªæ‰‹è½»è½»æ‹¿èµ·å°å·§è½»ä¾¿çš„æŠ•å½±ä»ªï¼Œæ”¾å…¥èƒŒåŒ…ä¸­ï¼Œå±•ç¤ºå…¶ä¾¿æºæ€§', 'pacing': 'å¸¸è§„', 'caption': 'éšèº«æºå¸¦', 'start_time': 25.0, 'end_time': 31.0}, {'shot_type': 'ç‰¹å†™', 'duration': 3.0, 'visual_description': 'æŠ•å½±ä»ªé¡¶éƒ¨çš„éº¦å…‹é£å­”ç‰¹å†™ï¼Œéšååˆ‡æ¢è‡³è®¾å¤‡å“åº”è¯­éŸ³å‘½ä»¤ï¼Œè‡ªåŠ¨è°ƒæ•´æŠ•å½±å†…å®¹', 'pacing': 'å¿«å‰ª', 'caption': 'è¯­éŸ³æ§åˆ¶', 'start_time': 31.0, 'end_time': 34.0}, {'shot_type': 'ç‰¹å†™', 'duration': 6.0, 'visual_description': 'æœ€ç»ˆæŠ•å½±ç”»é¢ç¨³å®šæ˜¾ç¤ºï¼Œç”»è´¨æ¸…æ™°é”åˆ©ï¼Œå†æ¬¡å¼ºè°ƒ4Kåˆ†è¾¨ç‡å¸¦æ¥çš„è§†è§‰äº«å—', 'pacing': 'æ…¢é•œå¤´', 'caption': 'æè‡´è§†ç•Œ', 'start_time': 34.0, 'end_time': 40.0}, {'shot_type': 'ç‰¹å†™', 'duration': 5.0, 'visual_description': 'äº§å“logoåœ¨é»‘è‰²èƒŒæ™¯ä¸­ç¼“ç¼“æ˜¾ç°ï¼Œå…‰èŠ’ä»logoä¸­å¿ƒå‘å››å‘¨æ‰©æ•£ï¼Œç…§äº®æ•´ä¸ªç”»é¢ã€‚', 'pacing': 'æ…¢é•œå¤´', 'caption': 'å“è´¨å…¸èŒƒ', 'start_time': 40.0, 'end_time': 45.0}, {'shot_type': 'ä¸­æ™¯', 'duration': 5.0, 'visual_description': 'äº§å“é™ç½®äºç®€çº¦çš„å±•ç¤ºå°ä¸Šï¼Œå‘¨å›´ç¯å¢ƒæ˜æš—ï¼Œåªæœ‰äº§å“è¢«æŸ”å’Œçš„å…‰çº¿åŒ…å›´ï¼Œæ˜¾å¾—æ ¼å¤–çªå‡ºã€‚é•œå¤´è½»å¾®æ¨è¿›ï¼Œèšç„¦äºäº§å“ä¸Šã€‚', 'pacing': 'å¸¸è§„', 'caption': 'ç»†èŠ‚è§çœŸç« ', 'start_time': 45.0, 'end_time': 50.0}, {'shot_type': 'ç‰¹å†™', 'duration': 5.0, 'visual_description': 'äº§å“çš„æŸä¸ªå…³é”®åŠŸèƒ½åŒºåŸŸï¼ˆå¦‚å±å¹•æˆ–æŒ‰é’®ï¼‰è½»è½»äº®èµ·ï¼Œæ˜¾ç¤ºç€å“ç‰Œåç§°å’Œäº§å“å‹å·ï¼Œå­—ä½“ä¼˜é›…ä¸”æ¸…æ™°å¯è§ã€‚', 'pacing': 'æ…¢é•œå¤´', 'caption': 'ç«‹å³ä½“éªŒæœªæ¥è§†ç•Œ', 'start_time': 50.0, 'end_time': 55.0}, {'shot_type': 'å®šæ ¼', 'duration': 5.0, 'visual_description': 'æœ€ç»ˆå®šæ ¼åœ¨å®Œæ•´çš„äº§å“å½¢è±¡ä¸Šï¼Œå“ç‰Œlogoä¸äº§å“åç§°ä¸€åŒå‡ºç°åœ¨ç”»é¢ä¸‹æ–¹ï¼Œç®€æ´æœ‰åŠ›ã€‚', 'pacing': 'å®šæ ¼', 'caption': 'å¼€å¯æ‚¨çš„ä¸“å±æ—…ç¨‹', 'start_time': 55.0, 'end_time': 60.0}]
ğŸ” [DEBUG] Checking parameter 'video_topic': exists=False, value=NOT_FOUND
ğŸ” [DEBUG] Checking parameter 'force_intro': exists=False, value=NOT_FOUND
ğŸ” [DEBUG] Checking parameter 'force_outro': exists=False, value=NOT_FOUND
WARNING:llm.qwen:JSON validation failed: Missing required fields: ['type', 'properties', 'required']
WARNING:llm.qwen:QwenLLMç”Ÿæˆå¤±è´¥: Missing required fields: ['type', 'properties', 'required']
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'subtitles' for subtitle_generation, using default
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'subtitle_timeline' for subtitle_generation, using default
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'subtitle_text' for subtitle_generation, using default
INFO:app:âœ… VGPèŠ‚ç‚¹æ‰§è¡ŒæˆåŠŸ: subtitle_generation
INFO:app:ğŸ” Node subtitle_generation extracted outputs: ['subtitle_sequence_id', 'tts_track_id']
INFO:app:ğŸ¯ Context keys after subtitle_generation: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection', 'filters', 'filter_sequence_id', 'filter_application', 'effects', 'effects_sequence_id', 'dynamic_effects', 'auxiliary_track_id', 'aux_media_insertion', 'text_overlay_track_id', 'aux_text_insertion', 'subtitle_sequence_id', 'tts_track_id']
INFO:app:ğŸ“‹ Task 3256dedc-aed9-46dd-8aa5-5b6b52802b3d - Node 14: completed - subtitle_generationæ‰§è¡Œå®Œæˆ
INFO:app:âœ… Node subtitle_generation completed
INFO:sqlalchemy.engine.Engine:SELECT tasks.id AS tasks_id, tasks.task_id AS tasks_task_id, tasks.theme AS tasks_theme, tasks.keywords AS tasks_keywords, tasks.target_duration AS tasks_target_duration, tasks.user_description AS tasks_user_description, tasks.config AS tasks_config, tasks.priority AS tasks_priority, tasks.status AS tasks_status, tasks.progress AS tasks_progress, tasks.message AS tasks_message, tasks.result AS tasks_result, tasks.output_url AS tasks_output_url, tasks.error_message AS tasks_error_message, tasks.retry_count AS tasks_retry_count, tasks.created_at AS tasks_created_at, tasks.started_at AS tasks_started_at, tasks.completed_at AS tasks_completed_at, tasks.processing_time AS tasks_processing_time, tasks.project_id AS tasks_project_id
FROM tasks
WHERE tasks.task_id = ?
 LIMIT ? OFFSET ?
INFO:sqlalchemy.engine.Engine:[cached since 717.4s ago] ('3256dedc-aed9-46dd-8aa5-5b6b52802b3d', 1, 0)
INFO:sqlalchemy.engine.Engine:UPDATE tasks SET progress=?, message=? WHERE tasks.id = ?
INFO:sqlalchemy.engine.Engine:[cached since 612.6s ago] (87.5, 'æ­£åœ¨æ‰§è¡Œintro_outro', 103)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT tasks.id, tasks.task_id, tasks.theme, tasks.keywords, tasks.target_duration, tasks.user_description, tasks.config, tasks.priority, tasks.status, tasks.progress, tasks.message, tasks.result, tasks.output_url, tasks.error_message, tasks.retry_count, tasks.created_at, tasks.started_at, tasks.completed_at, tasks.processing_time, tasks.project_id
FROM tasks
WHERE tasks.id = ?
INFO:sqlalchemy.engine.Engine:[cached since 717.4s ago] (103,)
INFO:app:ğŸ“‹ Task 3256dedc-aed9-46dd-8aa5-5b6b52802b3d - Node 15: processing - æ­£åœ¨æ‰§è¡Œintro_outro
INFO:app:ğŸ¬ æ‰§è¡ŒVGPèŠ‚ç‚¹: intro_outro - ç‰‡å¤´ç‰‡å°¾ç”Ÿæˆ
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Unknown node type: multimodal_fusion
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'audio_track_id' for audio_processing, using default
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'audio_file_path' for audio_processing, using default
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'audio_duration' for audio_processing, using default
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Unknown node type: multimodal_fusion
INFO:video_generate_protocol.vgp_data_transformer:prepare_context_for_node: node_type=intro_outro, raw_context keys=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection', 'filters', 'filter_sequence_id', 'filter_application', 'effects', 'effects_sequence_id', 'dynamic_effects', 'auxiliary_track_id', 'aux_media_insertion', 'text_overlay_track_id', 'aux_text_insertion', 'subtitle_sequence_id', 'tts_track_id', 'subtitle_generation']
INFO:video_generate_protocol.vgp_data_transformer:prepare_context_for_node: æœ€ç»ˆå‡†å¤‡çš„ input_data keys=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
INFO:watchfiles.main:2 changes detected
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'intro_data' for intro_outro, using default
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'outro_data' for intro_outro, using default
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'intro_outro_duration' for intro_outro, using default
INFO:app:âœ… VGPèŠ‚ç‚¹æ‰§è¡ŒæˆåŠŸ: intro_outro
INFO:app:ğŸ” Node intro_outro extracted outputs: []
INFO:app:ğŸ¯ Context keys after intro_outro: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection', 'filters', 'filter_sequence_id', 'filter_application', 'effects', 'effects_sequence_id', 'dynamic_effects', 'auxiliary_track_id', 'aux_media_insertion', 'text_overlay_track_id', 'aux_text_insertion', 'subtitle_sequence_id', 'tts_track_id', 'subtitle_generation']
INFO:app:ğŸ“‹ Task 3256dedc-aed9-46dd-8aa5-5b6b52802b3d - Node 15: completed - intro_outroæ‰§è¡Œå®Œæˆ
INFO:app:âœ… Node intro_outro completed
INFO:sqlalchemy.engine.Engine:SELECT tasks.id AS tasks_id, tasks.task_id AS tasks_task_id, tasks.theme AS tasks_theme, tasks.keywords AS tasks_keywords, tasks.target_duration AS tasks_target_duration, tasks.user_description AS tasks_user_description, tasks.config AS tasks_config, tasks.priority AS tasks_priority, tasks.status AS tasks_status, tasks.progress AS tasks_progress, tasks.message AS tasks_message, tasks.result AS tasks_result, tasks.output_url AS tasks_output_url, tasks.error_message AS tasks_error_message, tasks.retry_count AS tasks_retry_count, tasks.created_at AS tasks_created_at, tasks.started_at AS tasks_started_at, tasks.completed_at AS tasks_completed_at, tasks.processing_time AS tasks_processing_time, tasks.project_id AS tasks_project_id
FROM tasks
WHERE tasks.task_id = ?
 LIMIT ? OFFSET ?
INFO:sqlalchemy.engine.Engine:[cached since 730.5s ago] ('3256dedc-aed9-46dd-8aa5-5b6b52802b3d', 1, 0)
INFO:sqlalchemy.engine.Engine:UPDATE tasks SET progress=?, message=? WHERE tasks.id = ?
INFO:sqlalchemy.engine.Engine:[cached since 625.7s ago] (93.75, 'æ­£åœ¨æ‰§è¡Œtimeline_integration', 103)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT tasks.id, tasks.task_id, tasks.theme, tasks.keywords, tasks.target_duration, tasks.user_description, tasks.config, tasks.priority, tasks.status, tasks.progress, tasks.message, tasks.result, tasks.output_url, tasks.error_message, tasks.retry_count, tasks.created_at, tasks.started_at, tasks.completed_at, tasks.processing_time, tasks.project_id
FROM tasks
WHERE tasks.id = ?
INFO:sqlalchemy.engine.Engine:[cached since 730.5s ago] (103,)
INFO:app:ğŸ“‹ Task 3256dedc-aed9-46dd-8aa5-5b6b52802b3d - Node 16: processing - æ­£åœ¨æ‰§è¡Œtimeline_integration
INFO:app:ğŸ¬ æ‰§è¡ŒVGPèŠ‚ç‚¹: timeline_integration - æœ€ç»ˆæ—¶é—´çº¿æ•´åˆ
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Unknown node type: multimodal_fusion
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'audio_track_id' for audio_processing, using default
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'audio_file_path' for audio_processing, using default
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Missing required field 'audio_duration' for audio_processing, using default
WARNING:video_generate_protocol.vgp_data_transformer.VGPDataMapper:Unknown node type: multimodal_fusion
INFO:video_generate_protocol.vgp_data_transformer:prepare_context_for_node: node_type=timeline_integration, raw_context keys=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection', 'filters', 'filter_sequence_id', 'filter_application', 'effects', 'effects_sequence_id', 'dynamic_effects', 'auxiliary_track_id', 'aux_media_insertion', 'text_overlay_track_id', 'aux_text_insertion', 'subtitle_sequence_id', 'tts_track_id', 'subtitle_generation', 'intro_outro']
INFO:video_generate_protocol.vgp_data_transformer:prepare_context_for_node: æœ€ç»ˆå‡†å¤‡çš„ input_data keys=['assets', 'asset_timeline', 'transitions', 'transition_timeline', 'filters', 'filter_timeline', 'subtitles', 'subtitle_timeline', 'theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
ERROR:app:VGPèŠ‚ç‚¹æ‰§è¡Œå¤±è´¥ timeline_integration: [Node: æœ€ç»ˆæ—¶é—´çº¿æ•´åˆ] ç¼ºå°‘å¿…éœ€å‚æ•°: video_clips, audio_tracks
INFO:app:ğŸ” Node timeline_integration extracted outputs: ['node_id']
INFO:app:ğŸ¯ Context keys after timeline_integration: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection', 'filters', 'filter_sequence_id', 'filter_application', 'effects', 'effects_sequence_id', 'dynamic_effects', 'auxiliary_track_id', 'aux_media_insertion', 'text_overlay_track_id', 'aux_text_insertion', 'subtitle_sequence_id', 'tts_track_id', 'subtitle_generation', 'intro_outro']
INFO:app:ğŸ“‹ Task 3256dedc-aed9-46dd-8aa5-5b6b52802b3d - Node 16: completed - timeline_integrationæ‰§è¡Œå®Œæˆ
INFO:app:âœ… Node timeline_integration completed
INFO:sqlalchemy.engine.Engine:SELECT tasks.id AS tasks_id, tasks.task_id AS tasks_task_id, tasks.theme AS tasks_theme, tasks.keywords AS tasks_keywords, tasks.target_duration AS tasks_target_duration, tasks.user_description AS tasks_user_description, tasks.config AS tasks_config, tasks.priority AS tasks_priority, tasks.status AS tasks_status, tasks.progress AS tasks_progress, tasks.message AS tasks_message, tasks.result AS tasks_result, tasks.output_url AS tasks_output_url, tasks.error_message AS tasks_error_message, tasks.retry_count AS tasks_retry_count, tasks.created_at AS tasks_created_at, tasks.started_at AS tasks_started_at, tasks.completed_at AS tasks_completed_at, tasks.processing_time AS tasks_processing_time, tasks.project_id AS tasks_project_id
FROM tasks
WHERE tasks.task_id = ?
 LIMIT ? OFFSET ?
INFO:sqlalchemy.engine.Engine:[cached since 730.5s ago] ('3256dedc-aed9-46dd-8aa5-5b6b52802b3d', 1, 0)
INFO:sqlalchemy.engine.Engine:UPDATE tasks SET progress=?, message=? WHERE tasks.id = ?
INFO:sqlalchemy.engine.Engine:[cached since 625.7s ago] (70.0, 'VGPåˆ†æå®Œæˆï¼Œå¼€å§‹è§†é¢‘ç”Ÿæˆ', 103)
INFO:sqlalchemy.engine.Engine:COMMIT
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT tasks.id, tasks.task_id, tasks.theme, tasks.keywords, tasks.target_duration, tasks.user_description, tasks.config, tasks.priority, tasks.status, tasks.progress, tasks.message, tasks.result, tasks.output_url, tasks.error_message, tasks.retry_count, tasks.created_at, tasks.started_at, tasks.completed_at, tasks.processing_time, tasks.project_id
FROM tasks
WHERE tasks.id = ?
INFO:sqlalchemy.engine.Engine:[cached since 730.5s ago] (103,)
INFO:sqlalchemy.engine.Engine:SELECT tasks.id AS tasks_id, tasks.task_id AS tasks_task_id, tasks.theme AS tasks_theme, tasks.keywords AS tasks_keywords, tasks.target_duration AS tasks_target_duration, tasks.user_description AS tasks_user_description, tasks.config AS tasks_config, tasks.priority AS tasks_priority, tasks.status AS tasks_status, tasks.progress AS tasks_progress, tasks.message AS tasks_message, tasks.result AS tasks_result, tasks.output_url AS tasks_output_url, tasks.error_message AS tasks_error_message, tasks.retry_count AS tasks_retry_count, tasks.created_at AS tasks_created_at, tasks.started_at AS tasks_started_at, tasks.completed_at AS tasks_completed_at, tasks.processing_time AS tasks_processing_time, tasks.project_id AS tasks_project_id
FROM tasks
WHERE tasks.task_id = ?
 LIMIT ? OFFSET ?
INFO:sqlalchemy.engine.Engine:[cached since 730.5s ago] ('3256dedc-aed9-46dd-8aa5-5b6b52802b3d', 1, 0)
INFO:sqlalchemy.engine.Engine:UPDATE tasks SET progress=?, message=? WHERE tasks.id = ?
INFO:sqlalchemy.engine.Engine:[cached since 625.7s ago] (75.0, 'ç”Ÿæˆ 12 ä¸ªå…³é”®å¸§å›¾ç‰‡', 103)
INFO:sqlalchemy.engine.Engine:COMMIT
ğŸ” Node intro_outro extracted outputs: []
ğŸ¯ Context keys after intro_outro: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection', 'filters', 'filter_sequence_id', 'filter_application', 'effects', 'effects_sequence_id', 'dynamic_effects', 'auxiliary_track_id', 'aux_media_insertion', 'text_overlay_track_id', 'aux_text_insertion', 'subtitle_sequence_id', 'tts_track_id', 'subtitle_generation']
âœ… Node 15/16 completed: intro_outro
2025-10-09 17:17:31,486 INFO sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.task_id AS tasks_task_id, tasks.theme AS tasks_theme, tasks.keywords AS tasks_keywords, tasks.target_duration AS tasks_target_duration, tasks.user_description AS tasks_user_description, tasks.config AS tasks_config, tasks.priority AS tasks_priority, tasks.status AS tasks_status, tasks.progress AS tasks_progress, tasks.message AS tasks_message, tasks.result AS tasks_result, tasks.output_url AS tasks_output_url, tasks.error_message AS tasks_error_message, tasks.retry_count AS tasks_retry_count, tasks.created_at AS tasks_created_at, tasks.started_at AS tasks_started_at, tasks.completed_at AS tasks_completed_at, tasks.processing_time AS tasks_processing_time, tasks.project_id AS tasks_project_id
FROM tasks
WHERE tasks.task_id = ?
 LIMIT ? OFFSET ?
2025-10-09 17:17:31,486 INFO sqlalchemy.engine.Engine [cached since 730.5s ago] ('3256dedc-aed9-46dd-8aa5-5b6b52802b3d', 1, 0)
2025-10-09 17:17:31,488 INFO sqlalchemy.engine.Engine UPDATE tasks SET progress=?, message=? WHERE tasks.id = ?
2025-10-09 17:17:31,488 INFO sqlalchemy.engine.Engine [cached since 625.7s ago] (93.75, 'æ­£åœ¨æ‰§è¡Œtimeline_integration', 103)
2025-10-09 17:17:31,489 INFO sqlalchemy.engine.Engine COMMIT
2025-10-09 17:17:31,490 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-09 17:17:31,490 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.task_id, tasks.theme, tasks.keywords, tasks.target_duration, tasks.user_description, tasks.config, tasks.priority, tasks.status, tasks.progress, tasks.message, tasks.result, tasks.output_url, tasks.error_message, tasks.retry_count, tasks.created_at, tasks.started_at, tasks.completed_at, tasks.processing_time, tasks.project_id
FROM tasks
WHERE tasks.id = ?
2025-10-09 17:17:31,490 INFO sqlalchemy.engine.Engine [cached since 730.5s ago] (103,)
âš¡ æ‰§è¡Œ node 16/16: timeline_integration

ğŸ¬ [execute_node] Starting node: timeline_integration
ğŸ¬ [execute_node] Input context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection', 'filters', 'filter_sequence_id', 'filter_application', 'effects', 'effects_sequence_id', 'dynamic_effects', 'auxiliary_track_id', 'aux_media_insertion', 'text_overlay_track_id', 'aux_text_insertion', 'subtitle_sequence_id', 'tts_track_id', 'subtitle_generation', 'intro_outro']
ğŸ¬ [execute_node] context[theme_id] = äº§å“å±•ç¤º
ğŸ¬ [execute_node] context[keywords_id] = ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
ğŸ¬ [execute_node] context[target_duration_id] = 20
ğŸ¬ [execute_node] context[user_description_id] = å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
ğŸ¬ [execute_node] Fixed context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection', 'filters', 'filter_sequence_id', 'filter_application', 'effects', 'effects_sequence_id', 'dynamic_effects', 'auxiliary_track_id', 'aux_media_insertion', 'text_overlay_track_id', 'aux_text_insertion', 'subtitle_sequence_id', 'tts_track_id', 'subtitle_generation', 'intro_outro']

================================================================================
ğŸ” [prepare_context_for_node] node_type=timeline_integration
ğŸ” [prepare_context_for_node] raw_context keys=['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection', 'filters', 'filter_sequence_id', 'filter_application', 'effects', 'effects_sequence_id', 'dynamic_effects', 'auxiliary_track_id', 'aux_media_insertion', 'text_overlay_track_id', 'aux_text_insertion', 'subtitle_sequence_id', 'tts_track_id', 'subtitle_generation', 'intro_outro']
ğŸ” [prepare_context_for_node] input_data (before)=['assets', 'asset_timeline', 'transitions', 'transition_timeline', 'filters', 'filter_timeline', 'subtitles', 'subtitle_timeline', 'theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ theme_id in raw_context: äº§å“å±•ç¤º
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ keywords_id in raw_context: ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ target_duration_id in raw_context: 20
ğŸ” [prepare_context_for_node] å‘ç°å­—æ®µ user_description_id in raw_context: å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
ğŸ” [prepare_context_for_node] input_data (after)=['assets', 'asset_timeline', 'transitions', 'transition_timeline', 'filters', 'filter_timeline', 'subtitles', 'subtitle_timeline', 'theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
ğŸ” [prepare_context_for_node] Final values:
    theme_id: äº§å“å±•ç¤º
    keywords_id: ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
    target_duration_id: 20
    user_description_id: å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
================================================================================

ğŸ¬ [execute_node] Prepared input keys: ['assets', 'asset_timeline', 'transitions', 'transition_timeline', 'filters', 'filter_timeline', 'subtitles', 'subtitle_timeline', 'theme_id', 'keywords_id', 'target_duration_id', 'user_description_id']
ğŸ¬ [execute_node] Execution context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection', 'filters', 'filter_sequence_id', 'filter_application', 'effects', 'effects_sequence_id', 'dynamic_effects', 'auxiliary_track_id', 'aux_media_insertion', 'text_overlay_track_id', 'aux_text_insertion', 'subtitle_sequence_id', 'tts_track_id', 'subtitle_generation', 'intro_outro', 'assets', 'asset_timeline', 'transition_timeline', 'filter_timeline', 'subtitles', 'subtitle_timeline']
ğŸ¬ [execute_node] execution_context[theme_id] = äº§å“å±•ç¤º
ğŸ¬ [execute_node] execution_context[keywords_id] = ['æ™ºèƒ½æŠ•å½±ä»ª', '4Ké«˜æ¸…', 'ä¾¿æº', 'è¯­éŸ³æ§åˆ¶']
ğŸ¬ [execute_node] execution_context[target_duration_id] = 20
ğŸ¬ [execute_node] execution_context[user_description_id] = å±•ç¤ºæ™ºèƒ½æŠ•å½±ä»ªçš„å®Œæ•´åŠŸèƒ½æ¼”ç¤ºã€‚é¦–å…ˆå±•ç¤ºæŠ•å½±ä»ªçš„å¤–è§‚è®¾è®¡ï¼Œé»‘è‰²ç£¨ç ‚è´¨æ„Ÿçš„æœºèº«ã€‚ç„¶åå±•ç¤ºå¼€æœºæŠ•å½±ï¼Œè‡ªåŠ¨å¯¹ç„¦ã€‚æ¥ç€æ¼”ç¤ºåœ¨ç™½å¢™ä¸ŠæŠ•å°„4Kç”»é¢ã€‚å±•ç¤ºå¤šç§ä½¿ç”¨åœºæ™¯ï¼šå®¢å…è§‚å½±ã€åŠå…¬æ¼”ç¤ºã€‚æœ€åå±•ç¤ºæ™ºèƒ½åŠŸèƒ½ï¼šè¯­éŸ³æ§åˆ¶ã€æ— çº¿æŠ•å±ã€‚
ğŸ¬ [execute_node] Calling node.generate()...

ğŸ” [DEBUG] Node æœ€ç»ˆæ—¶é—´çº¿æ•´åˆ validation:
ğŸ” [DEBUG] Context keys: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection', 'filters', 'filter_sequence_id', 'filter_application', 'effects', 'effects_sequence_id', 'dynamic_effects', 'auxiliary_track_id', 'aux_media_insertion', 'text_overlay_track_id', 'aux_text_insertion', 'subtitle_sequence_id', 'tts_track_id', 'subtitle_generation', 'intro_outro', 'assets', 'asset_timeline', 'transition_timeline', 'filter_timeline', 'subtitles', 'subtitle_timeline']
ğŸ” [DEBUG] Required inputs: ['video_clips', 'audio_tracks', 'subtitle_sequence', 'intro_outro_sequence']
ğŸ” [DEBUG] Checking parameter 'video_clips': exists=False, value=NOT_FOUND
ğŸ” [DEBUG] Checking parameter 'audio_tracks': exists=False, value=NOT_FOUND
ğŸ” [DEBUG] Checking parameter 'subtitle_sequence': exists=False, value=NOT_FOUND
ğŸ” [DEBUG] Checking parameter 'intro_outro_sequence': exists=False, value=NOT_FOUND
ğŸ” Node timeline_integration extracted outputs: ['node_id']
ğŸ¯ Context keys after timeline_integration: ['theme_id', 'keywords_id', 'target_duration_id', 'user_description_id', 'reference_media', 'multimodal_fusion', 'video_type_id', 'structure_template_id', 'video_type_identification', 'emotions_id', 'emotion_analysis', 'shot_blocks_id', 'shot_block_generation', 'bgm_anchors', 'bgm_timeline', 'bgm_tracks_id', 'narrative_arc_id', 'bgm_anchor_planning', 'bgm_composition_id', 'track_id', 'bgm_composition', 'preliminary_sequence_id', 'total_main_duration_id', 'asset_request', 'node_id', 'audio_processing', 'sfx_track_id', 'sfx_integration', 'transitions', 'transition_sequence_id', 'transition_selection', 'filters', 'filter_sequence_id', 'filter_application', 'effects', 'effects_sequence_id', 'dynamic_effects', 'auxiliary_track_id', 'aux_media_insertion', 'text_overlay_track_id', 'aux_text_insertion', 'subtitle_sequence_id', 'tts_track_id', 'subtitle_generation', 'intro_outro']
âœ… Node 16/16 completed: timeline_integration
ğŸ“‹ VGPåˆ†ææ‘˜è¦: {'video_type': 'æœªçŸ¥', 'emotions': {}, 'shot_count': 0, 'asset_count': 0, 'subtitle_count': 0}
2025-10-09 17:17:31,492 INFO sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.task_id AS tasks_task_id, tasks.theme AS tasks_theme, tasks.keywords AS tasks_keywords, tasks.target_duration AS tasks_target_duration, tasks.user_description AS tasks_user_description, tasks.config AS tasks_config, tasks.priority AS tasks_priority, tasks.status AS tasks_status, tasks.progress AS tasks_progress, tasks.message AS tasks_message, tasks.result AS tasks_result, tasks.output_url AS tasks_output_url, tasks.error_message AS tasks_error_message, tasks.retry_count AS tasks_retry_count, tasks.created_at AS tasks_created_at, tasks.started_at AS tasks_started_at, tasks.completed_at AS tasks_completed_at, tasks.processing_time AS tasks_processing_time, tasks.project_id AS tasks_project_id
FROM tasks
WHERE tasks.task_id = ?
 LIMIT ? OFFSET ?
2025-10-09 17:17:31,492 INFO sqlalchemy.engine.Engine [cached since 730.5s ago] ('3256dedc-aed9-46dd-8aa5-5b6b52802b3d', 1, 0)
2025-10-09 17:17:31,492 INFO sqlalchemy.engine.Engine UPDATE tasks SET progress=?, message=? WHERE tasks.id = ?
2025-10-09 17:17:31,492 INFO sqlalchemy.engine.Engine [cached since 625.7s ago] (70.0, 'VGPåˆ†æå®Œæˆï¼Œå¼€å§‹è§†é¢‘ç”Ÿæˆ', 103)
2025-10-09 17:17:31,493 INFO sqlalchemy.engine.Engine COMMIT
2025-10-09 17:17:31,493 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-09 17:17:31,493 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.task_id, tasks.theme, tasks.keywords, tasks.target_duration, tasks.user_description, tasks.config, tasks.priority, tasks.status, tasks.progress, tasks.message, tasks.result, tasks.output_url, tasks.error_message, tasks.retry_count, tasks.created_at, tasks.started_at, tasks.completed_at, tasks.processing_time, tasks.project_id
FROM tasks
WHERE tasks.id = ?
2025-10-09 17:17:31,494 INFO sqlalchemy.engine.Engine [cached since 730.5s ago] (103,)
ğŸ¬ å¼€å§‹ä½¿ç”¨VGPåˆ†æç»“æœç”Ÿæˆè§†é¢‘...
ğŸ“‹ æ‰¾åˆ° 12 ä¸ªåˆ†é•œå—ï¼Œå¼€å§‹ç”Ÿæˆå…³é”®å¸§...
2025-10-09 17:17:31,494 INFO sqlalchemy.engine.Engine SELECT tasks.id AS tasks_id, tasks.task_id AS tasks_task_id, tasks.theme AS tasks_theme, tasks.keywords AS tasks_keywords, tasks.target_duration AS tasks_target_duration, tasks.user_description AS tasks_user_description, tasks.config AS tasks_config, tasks.priority AS tasks_priority, tasks.status AS tasks_status, tasks.progress AS tasks_progress, tasks.message AS tasks_message, tasks.result AS tasks_result, tasks.output_url AS tasks_output_url, tasks.error_message AS tasks_error_message, tasks.retry_count AS tasks_retry_count, tasks.created_at AS tasks_created_at, tasks.started_at AS tasks_started_at, tasks.completed_at AS tasks_completed_at, tasks.processing_time AS tasks_processing_time, tasks.project_id AS tasks_project_id
FROM tasks
WHERE tasks.task_id = ?
 LIMIT ? OFFSET ?
2025-10-09 17:17:31,494 INFO sqlalchemy.engine.Engine [cached since 730.5s ago] ('3256dedc-aed9-46dd-8aa5-5b6b52802b3d', 1, 0)
2025-10-09 17:17:31,494 INFO sqlalchemy.engine.Engine UPDATE tasks SET progress=?, message=? WHERE tasks.id = ?
2025-10-09 17:17:31,494 INFO sqlalchemy.engine.Engine [cached since 625.7s ago] (75.0, 'ç”Ÿæˆ 12 ä¸ªå…³é”®å¸§å›¾ç‰‡', 103)
2025-10-09 17:17:31,495 INFO sqlalchemy.engine.Engine COMMIT
2025-10-09 17:17:31,495 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-09 17:17:31,496 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.task_id, tasks.theme, tasks.keywords, tasks.target_duration, tasks.user_description, tasks.config, tasks.priority, tasks.status, tasks.progress, tasks.message, tasks.result, tasks.output_url, tasks.error_message, tasks.retry_count, tasks.created_at, tasks.started_at, tasks.completed_at, tasks.processing_time, tasks.project_id
FROM tasks
WHERE tasks.id = ?
2025-10-09 17:17:31,496 INFO sqlalchemy.engine.Engine [cached since 730.5s ago] (103,)
ğŸ¨ ä½¿ç”¨é€šä¹‰ä¸‡ç›¸(Wanx)ç”Ÿæˆå…³é”®å¸§å›¾ç‰‡...
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:SELECT tasks.id, tasks.task_id, tasks.theme, tasks.keywords, tasks.target_duration, tasks.user_description, tasks.config, tasks.priority, tasks.status, tasks.progress, tasks.message, tasks.result, tasks.output_url, tasks.error_message, tasks.retry_count, tasks.created_at, tasks.started_at, tasks.completed_at, tasks.processing_time, tasks.project_id
FROM tasks
WHERE tasks.id = ?
INFO:sqlalchemy.engine.Engine:[cached since 730.5s ago] (103,)
INFO:watchfiles.main:2 changes detected
INFO:dashscope:The task 5d012de3-e5f9-431e-9dcc-2d59e8594261 is  RUNNING
INFO:dashscope:The task 5d012de3-e5f9-431e-9dcc-2d59e8594261 is  RUNNING
INFO:dashscope:The task 5d012de3-e5f9-431e-9dcc-2d59e8594261 is  RUNNING
INFO:dashscope:The task 5d012de3-e5f9-431e-9dcc-2d59e8594261 is  RUNNING
INFO:dashscope:The task 5d012de3-e5f9-431e-9dcc-2d59e8594261 is  RUNNING
INFO:dashscope:The task 5d012de3-e5f9-431e-9dcc-2d59e8594261 is  RUNNING
INFO:dashscope:The task 5d012de3-e5f9-431e-9dcc-2d59e8594261 is  RUNNING
INFO:dashscope:The task 5d012de3-e5f9-431e-9dcc-2d59e8594261 is  RUNNING
INFO:dashscope:The task 5d012de3-e5f9-431e-9dcc-2d59e8594261 is  RUNNING
âœ… é€šä¹‰ä¸‡ç›¸ç”Ÿæˆå…³é”®å¸§ 1/12: https://dashscope-result-bj.oss-cn-beijing.aliyuncs.com/1d/54/20251009/c70535fc/1b75d621-06ce-4767-bc20-c6472b7c5abd-1.png?Expires=1760087876&OSSAccessKeyId=LTAI5tQZd8AEcZX6KZV4G8qL&Signature=NVEVe61E6PEaK7lFlINf1%2BF5sfM%3D
INFO:dashscope:The task 47c39de1-4304-4b4c-a6e0-0da6f296d6ed is  RUNNING
INFO:dashscope:The task 47c39de1-4304-4b4c-a6e0-0da6f296d6ed is  RUNNING
INFO:dashscope:The task 47c39de1-4304-4b4c-a6e0-0da6f296d6ed is  RUNNING
INFO:dashscope:The task 47c39de1-4304-4b4c-a6e0-0da6f296d6ed is  RUNNING
INFO:dashscope:The task 47c39de1-4304-4b4c-a6e0-0da6f296d6ed is  RUNNING
INFO:dashscope:The task 47c39de1-4304-4b4c-a6e0-0da6f296d6ed is  RUNNING
INFO:dashscope:The task 47c39de1-4304-4b4c-a6e0-0da6f296d6ed is  RUNNING
INFO:dashscope:The task 47c39de1-4304-4b4c-a6e0-0da6f296d6ed is  RUNNING
INFO:dashscope:The task 47c39de1-4304-4b4c-a6e0-0da6f296d6ed is  RUNNING
âœ… é€šä¹‰ä¸‡ç›¸ç”Ÿæˆå…³é”®å¸§ 2/12: https://dashscope-result-bj.oss-cn-beijing.aliyuncs.com/1d/65/20251009/c70535fc/26b2937b-973f-4e96-9c56-3f1516c52674-1.png?Expires=1760087901&OSSAccessKeyId=LTAI5tQZd8AEcZX6KZV4G8qL&Signature=QwGiY%2Fnbcb9vJrx0%2Bh6nl4gFXMc%3D
INFO:dashscope:The task ee52b5e9-e368-4bc9-84d0-b21ca7828bdb is  RUNNING
INFO:dashscope:The task ee52b5e9-e368-4bc9-84d0-b21ca7828bdb is  RUNNING
INFO:dashscope:The task ee52b5e9-e368-4bc9-84d0-b21ca7828bdb is  RUNNING
INFO:dashscope:The task ee52b5e9-e368-4bc9-84d0-b21ca7828bdb is  RUNNING
INFO:dashscope:The task ee52b5e9-e368-4bc9-84d0-b21ca7828bdb is  RUNNING
INFO:dashscope:The task ee52b5e9-e368-4bc9-84d0-b21ca7828bdb is  RUNNING
INFO:dashscope:The task ee52b5e9-e368-4bc9-84d0-b21ca7828bdb is  RUNNING
INFO:dashscope:The task ee52b5e9-e368-4bc9-84d0-b21ca7828bdb is  RUNNING

Process finished with exit code 137 (interrupted by signal 9:SIGKILL)
